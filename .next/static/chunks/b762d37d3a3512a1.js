(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26624,(e,t,n)=>{function i(e,t,n){function i(){var d=Date.now()-s;d<t&&d>=0?l=setTimeout(i,t-d):(l=null,n||(a=e.apply(o,r),o=r=null))}null==t&&(t=100);var l,r,o,s,a,d=function(){o=this,r=arguments,s=Date.now();var d=n&&!l;return l||(l=setTimeout(i,t)),d&&(a=e.apply(o,r),o=r=null),a};return d.clear=function(){l&&(clearTimeout(l),l=null)},d.flush=function(){l&&(a=e.apply(o,r),o=r=null,clearTimeout(l),l=null)},d}i.debounce=i,t.exports=i},74789,(e,t,n)=>{"use strict";t.exports=function(e){for(var t=function(e){var t,n=(e.length+8>>6)+1,i=Array(16*n);for(t=0;t<16*n;t++)i[t]=0;for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(8*e.length+t)%4*8;i[t>>2]|=128<<(8*e.length+t)%4*8;var l=8*e.length;return i[16*n-2]=255&l,i[16*n-2]|=(l>>>8&255)<<8,i[16*n-2]|=(l>>>16&255)<<16,i[16*n-2]|=(l>>>24&255)<<24,i}(e),n=0x67452301,i=-0x10325477,l=-0x67452302,r=0x10325476,o=0;o<t.length;o+=16){var d=n,h=i,g=l,f=r;n=c(n,i,l,r,t[o+0],7,-0x28955b88),r=c(r,n,i,l,t[o+1],12,-0x173848aa),l=c(l,r,n,i,t[o+2],17,0x242070db),i=c(i,l,r,n,t[o+3],22,-0x3e423112),n=c(n,i,l,r,t[o+4],7,-0xa83f051),r=c(r,n,i,l,t[o+5],12,0x4787c62a),l=c(l,r,n,i,t[o+6],17,-0x57cfb9ed),i=c(i,l,r,n,t[o+7],22,-0x2b96aff),n=c(n,i,l,r,t[o+8],7,0x698098d8),r=c(r,n,i,l,t[o+9],12,-0x74bb0851),l=c(l,r,n,i,t[o+10],17,-42063),i=c(i,l,r,n,t[o+11],22,-0x76a32842),n=c(n,i,l,r,t[o+12],7,0x6b901122),r=c(r,n,i,l,t[o+13],12,-0x2678e6d),l=c(l,r,n,i,t[o+14],17,-0x5986bc72),i=c(i,l,r,n,t[o+15],22,0x49b40821),n=u(n,i,l,r,t[o+1],5,-0x9e1da9e),r=u(r,n,i,l,t[o+6],9,-0x3fbf4cc0),l=u(l,r,n,i,t[o+11],14,0x265e5a51),i=u(i,l,r,n,t[o+0],20,-0x16493856),n=u(n,i,l,r,t[o+5],5,-0x29d0efa3),r=u(r,n,i,l,t[o+10],9,0x2441453),l=u(l,r,n,i,t[o+15],14,-0x275e197f),i=u(i,l,r,n,t[o+4],20,-0x182c0438),n=u(n,i,l,r,t[o+9],5,0x21e1cde6),r=u(r,n,i,l,t[o+14],9,-0x3cc8f82a),l=u(l,r,n,i,t[o+3],14,-0xb2af279),i=u(i,l,r,n,t[o+8],20,0x455a14ed),n=u(n,i,l,r,t[o+13],5,-0x561c16fb),r=u(r,n,i,l,t[o+2],9,-0x3105c08),l=u(l,r,n,i,t[o+7],14,0x676f02d9),i=u(i,l,r,n,t[o+12],20,-0x72d5b376),n=p(n,i,l,r,t[o+5],4,-378558),r=p(r,n,i,l,t[o+8],11,-0x788e097f),l=p(l,r,n,i,t[o+11],16,0x6d9d6122),i=p(i,l,r,n,t[o+14],23,-0x21ac7f4),n=p(n,i,l,r,t[o+1],4,-0x5b4115bc),r=p(r,n,i,l,t[o+4],11,0x4bdecfa9),l=p(l,r,n,i,t[o+7],16,-0x944b4a0),i=p(i,l,r,n,t[o+10],23,-0x41404390),n=p(n,i,l,r,t[o+13],4,0x289b7ec6),r=p(r,n,i,l,t[o+0],11,-0x155ed806),l=p(l,r,n,i,t[o+3],16,-0x2b10cf7b),i=p(i,l,r,n,t[o+6],23,0x4881d05),n=p(n,i,l,r,t[o+9],4,-0x262b2fc7),r=p(r,n,i,l,t[o+12],11,-0x1924661b),l=p(l,r,n,i,t[o+15],16,0x1fa27cf8),i=p(i,l,r,n,t[o+2],23,-0x3b53a99b),n=m(n,i,l,r,t[o+0],6,-0xbd6ddbc),r=m(r,n,i,l,t[o+7],10,0x432aff97),l=m(l,r,n,i,t[o+14],15,-0x546bdc59),i=m(i,l,r,n,t[o+5],21,-0x36c5fc7),n=m(n,i,l,r,t[o+12],6,0x655b59c3),r=m(r,n,i,l,t[o+3],10,-0x70f3336e),l=m(l,r,n,i,t[o+10],15,-1051523),i=m(i,l,r,n,t[o+1],21,-0x7a7ba22f),n=m(n,i,l,r,t[o+8],6,0x6fa87e4f),r=m(r,n,i,l,t[o+15],10,-0x1d31920),l=m(l,r,n,i,t[o+6],15,-0x5cfebcec),i=m(i,l,r,n,t[o+13],21,0x4e0811a1),n=m(n,i,l,r,t[o+4],6,-0x8ac817e),r=m(r,n,i,l,t[o+11],10,-0x42c50dcb),l=m(l,r,n,i,t[o+2],15,0x2ad7d2bb),i=m(i,l,r,n,t[o+9],21,-0x14792c6f),n=s(n,d),i=s(i,h),l=s(l,g),r=s(r,f)}return a(n)+a(i)+a(l)+a(r)};var i="0123456789abcdef";function l(e,t){return 1&e|1&t|(e>>>1|t>>>1)<<1}function r(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t}function o(e,t){return(e>>>1&t>>>1)<<1|1&e&(1&t)}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e){var t,n="";for(t=0;t<=3;t++)n+=i.charAt(e>>8*t+4&15)+i.charAt(e>>8*t&15);return n}function d(e,t,n,i,l,r){var o;return s((o=s(s(t,e),s(i,r)))<<l|o>>>32-l,n)}function c(e,t,n,i,r,s,a){return d(l(o(t,n),o(~t,i)),e,t,r,s,a)}function u(e,t,n,i,r,s,a){return d(l(o(t,i),o(n,~i)),e,t,r,s,a)}function p(e,t,n,i,l,o,s){return d(r(r(t,n),i),e,t,l,o,s)}function m(e,t,n,i,o,s,a){return d(r(n,l(t,~i)),e,t,o,s,a)}},26047,88942,e=>{"use strict";let t,n,i,l;var r,o=e.i(43476),s=e.i(932),a=e.i(71645),d=e.i(77160),c=e.i(16024),u=e.i(48837),p=e.i(79684),m=e.i(47912),h=e.i(81625),g=e.i(48253),f=(0,g.default)(function(e,t,n){return t=t.toLowerCase(),e+(n?(0,h.default)(t):t)}),x=e.i(84199),b=(0,g.default)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),y=e.i(40589),v=e.i(35962),j=e.i(98017),w=e.i(9054),S=e.i(16606);let C="structure",_=(0,d.defineLocaleResourceBundle)({locale:"en-US",namespace:C,resources:()=>e.A(53713)}),I=["_id","_type","_createdAt","_updatedAt","_rev"];function T(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[l,...r]=n;if(!("fields"in t))return"";let o=t.fields.find(e=>e.name===l);if(!o){if(!I.includes(l)){let e=`The current ordering config targeted the nonexistent field "${l}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in o.type&&"reference"===o.type.name){let t=o.type.to;return`${l}->{${t.map(t=>e(t,r)).join(",")}}`}let s=r.length>0&&e(o.type,r),a=s?`{${s}}`:"";return r.length>0?`${l}${a}`:l})(e,t.field.split("."),n)).join(", ")}class R extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";const l=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${l} (${i})`:l)}withHelpUrl(e){return this.helpId=e,this}}let P="structure-node-id-required",E="structure-title-required",k={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:C}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},D=[k,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:C}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function F(e,t,n){return e instanceof A?e.serialize({path:n,index:t}):e}class A{constructor(e,t){this._context=e,this.spec=t||{}}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new R("`title` is required for menu item",e.path,e.index,t).withHelpUrl(E)}if(!n&&!i)throw new R(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl("structure-action-or-intent-required");if(i&&n)throw new R("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl("structure-action-and-intent-mutually-exclusive");return{...this.spec,title:t}}clone(e){let t=new A(this._context);return t.spec={...this.spec,...e},t}}function V(e,{by:t,title:n,i18n:i},l){let r=new A(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(m.SortIcon).action("setSortOrder").params({by:t,extendedProjection:l});return i&&(r=r.i18n(i)),r}function M(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(D):D).map(t=>V(e,t,T(i,t.by))):[]}function L(e,t,n){return e instanceof z?e.serialize({path:n,index:t}):e}class z{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new z(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new z(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new z(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){if(!this._id)throw new R("`id` is required for a menu item group",e.path,e.index,this._title).withHelpUrl(P);if(!this._title)throw new R("`title` is required for a menu item group",e.path,this._id).withHelpUrl(E);return{id:this._id,title:this._title,i18n:this._i18n}}}let O=/([^A-Za-z0-9-_.])/;function B(e,t,n){if("string"!=typeof e)throw new R(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match(O)||[];if(i)throw new R(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new R("Structure node id cannot start with __edit__",t,n);return e}function H(e,t){if(t)return t;let n=f(e);return O.test(n)?f((0,w.default)(e)):n}class ${constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:H(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:l,component:r}=this.spec;if(!t)throw new R("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(P);if(!r)throw new R("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(P);return{id:B(t,e.path,e.index),title:n,type:"component",child:i,component:r,canHandleIntent:this.spec.canHandleIntent,options:l||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>F(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>L(t,n,e.path))}}clone(e){let t=new $;return t.spec={...this.spec,...e},t}}class N{constructor(e){this.spec={id:(0,x.uniqueId)("__divider__"),type:"divider",...e}}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(e){let t=new N;return t.spec={...this.spec,...e},t}}async function G(e,t){return await e(d.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,c.getPublishedId)(t)},{tag:"structure.resolve-type"})}class U{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||b(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new R("`id` is required for view item",e.path,e.index).withHelpUrl(P);if(!n)throw new R("`title` is required for view item",e.path,e.index).withHelpUrl(E);return{id:B(t,e.path,e.index),title:n,icon:i}}}function q(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}class W extends U{constructor(e){const t=(e=>(0,d.isRecord)(e)&&"component"===e.type)(e)?{...e}:{options:{}};super(),this.spec=t;const n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new R("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl("structure-view-component-required");return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new W;return t.spec={...this.spec,...e},t}}class K extends U{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new K;return t.spec={...this.spec,...e},t}}let Y=e=>new K(e);var X=Object.freeze({__proto__:null,ComponentViewBuilder:W,FormViewBuilder:K,GenericViewBuilder:U,component:e=>new W(e),form:Y,maybeSerializeView:q});class J{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:H(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options,id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options,type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options,template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}serialize({path:e=[],index:t,hint:n}={path:[]}){var i;let l,r=e[t||e.length-1],o=this.spec.id||r&&`${r}`||"",s={id:o,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof o||!o)throw new R("`id` is required for document nodes",e,t,n).withHelpUrl(P);if(!s||!s.id)throw new R("document id (`id`) is required for document nodes",e,o,n).withHelpUrl("structure-document-id-required");if(!s||!s.type)throw new R("document type (`schemaType`) is required for document nodes",e,o,n);let a=(this.spec.views&&this.spec.views.length>0?this.spec.views:[Y()]).map((t,n)=>q(t,n,e)),d=a.map(e=>e.id),c=(0,y.uniq)(d.filter((e,t)=>d.includes(e,t+1)));if(c.length>0)throw new R(`document node has views with duplicate IDs: ${c.join(",  ")}`,e,o,n);return{...this.spec,child:this.spec.child||(({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:l})=>{let r=i.type,o=l.slice(0,l.length-1),s=l[l.length-1];if(r||(r=await G(t,n)),!r)throw new R("Failed to resolve document, and no type provided in parameters.",o,s);return e({documentId:n,schemaType:r})})(this._context),id:B(o,e,t),type:"document",options:(l={id:(i=s).id||"",type:i.type||"*"},i.template&&(l.template=i.template),i.templateParameters&&(l.templateParameters=i.templateParameters),l),views:a}}clone(e={}){let t=new J(this._context),n={...this.spec.options,...e.options};return t.spec={...this.spec,...e,options:n},t}}class Q{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new R("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(P);if(!this.spec.templateId)throw new R("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(P);let i=this._context.templates.find(e=>e.id===this.spec.templateId);if(!i)throw new R("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(P);return{id:this.spec.id,templateId:this.spec.id,schemaType:i.schemaType,type:"initialValueTemplateItem",description:this.spec.description||i.description,title:this.spec.title||i.title,subtitle:this.spec.subtitle,icon:this.spec.icon||i.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(e={}){let t=new Q(this._context);return t.spec={...this.spec,...e},t}}let Z=Symbol("Document type list canHandleIntent"),ee=(e,t,{pane:n})=>{let i="create"===e,l=n.options?.filter||"",r=n.options?.params||{},o=n.schemaTypeName?[n.schemaTypeName]:eo(l,r),s=n.initialValueTemplates||[];return i&&t.template?s.some(e=>e.templateId===t.template):"edit"===e&&t.id&&o.includes(t.type)||i&&o.includes(t.type)};ee.identity=Z;let et=["default","card","media","detail","block"];function en(){}let ei=(e,t,{pane:n,index:i})=>i<=1&&ee(e,t,{pane:n});class el{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:H(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!et.includes(i))throw new R(`\`layout\` must be one of ${et.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let l=(this.spec.initialValueTemplates||[]).map((e,t)=>e instanceof Q?e.serialize({path:n,index:t}):e);return{id:B(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||en,canHandleIntent:this.spec.canHandleIntent||ei,displayOptions:this.spec.displayOptions,initialValueTemplates:l,menuItems:(this.spec.menuItems||[]).map((e,t)=>F(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>L(e,t,n))}}}class er extends el{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options,filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){let t;if("string"!=typeof this.spec.id||!this.spec.id)throw new R("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(P);if(!this.spec.options||!this.spec.options.filter)throw new R("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl("structure-filter-required");return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,S.generateHelpUrl)("structure-api-version-required-for-custom-filter")),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(t=this._context,(e,n)=>{let i=n.parent,l=n.params?.template?t.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(l?l.schemaType:i.schemaTypeName||G(t.getClient,e)).then(n=>n?t.resolveDocumentNode({schemaType:n,documentId:e}):new J(t).id("editor").documentId(e).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||d.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new R(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl("structure-query-provided-for-filter");return n})(this.spec,e)}}}clone(e){let t=new er(this._context);return t.spec={...this.spec,...e},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:l}=t,{filter:r,params:o}=l||{filter:"",params:{}},s=i?[i]:Array.from(new Set(eo(r,o)));if(0!==s.length)return s.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:m.AddIcon}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},l=eo(n,i);return 1===l.length?l[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function eo(e,t={}){let n=function(e,t={}){let n,i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,l=[];for(;null!==(n=i.exec(e));)l.push(n[1]||n[2]);return l.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let es=e=>"listItem"===e.type,ea=(e,t,n)=>(n.pane.items||[]).filter(em).some(e=>e.schemaType.name===t.type&&e._id===t.id)||ei(e,t,n),ed=(e,t)=>{let n=(t.parent.items.filter(es).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class ec extends el{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new R("`id` is required for lists",e.path,e.index).withHelpUrl(P);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new R("`items` must be an array of items",e.path,e.index).withHelpUrl("structure-list-items-must-be-array");let i=(e.path||[]).concat(t),l=n.map((e,t)=>(function(e,t,n){if(e instanceof eu)return e.serialize({path:n,index:t});if(e instanceof N)return e.serialize();if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){var i;let l=e&&e.type||(e instanceof ec?"ListBuilder":(i=e,(0,d.isRecord)(i)&&"function"==typeof i.then)?"Promise":Array.isArray(e)?"array":typeof e);throw new R(`List items must be of type "listItem", got "${l}"${"array"===l?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl("structure-invalid-list-item")}return e})(e,t,i)),r=l.filter((e,t)=>(0,v.find)(l,{id:e.id},t+1));if(r.length>0){let t=r.map(e=>e.id).slice(0,5),n=r.length>5?`${t.join(", ")}...`:t.join(", ");throw new R(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl("structure-list-item-ids-must-be-unique")}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||ea,child:this.spec.child||ed,items:l}}clone(e){let t=new ec(this._context);return t.spec={...this.spec,...e},t}}class eu{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:H(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new R("`id` is required for list items",e.path,e.index).withHelpUrl(P);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new R("`title` is required for list items",e.path,t).withHelpUrl(E);let l=this.spec.schemaType;if("string"==typeof l){let n=this._context.schema.get(l);if(!n)throw new R(`Could not find type "${l}" in schema`,e.path,t).withHelpUrl("structure-schema-type-not-found");l=n}let r={path:e.path.concat(t),hint:"child"},o=i instanceof $||i instanceof er||i instanceof J||i instanceof ec?i.serialize(r):i;if("function"==typeof o){let e=o;o=(t,n)=>e(t,{...n,serializeOptions:r})}return{...this.spec,id:B(t,e.path,e.index),schemaType:l,child:o,title:n,type:"listItem"}}clone(e){let t=new eu(this._context);return t.spec={...this.spec,...e},t}}class ep extends eu{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t,n=super.serialize({...e,titleIsOptional:!0});if(!n.schemaType)throw new R("`schemaType` is required for document list items",e.path,e.index).withHelpUrl("structure-schema-type-required");let i=n.child||(t=this._context,e=>{let i=n.schemaType&&("string"==typeof n.schemaType?n.schemaType:n.schemaType.name);return i?t.resolveDocumentNode({schemaType:i,documentId:e}):new J(t).id("documentEditor").documentId(e)});return{...n,child:i,schemaType:n.schemaType,_id:n.id}}clone(e){let t=new ep(this._context);return t.spec={...this.spec,...e},t}}function em(e){return(0,d.isRecord)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class eh extends er{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new eh(this._context);return n.spec={...this.spec,...t.getSpec(),...e},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new eh(this._context),i=this.spec.canHandleIntent,l=i&&i.identity===Z?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e,...l},n}}let eg=["sanity.imageAsset","sanity.fileAsset"];function ef(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!eg.includes(e))})(e).map(t=>ex(e,t))}function ex(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let l=i.title||(0,j.startCase)(t);return new eu(e).id(t).title(l).schemaType(i).child((n,i)=>{let l=i.parent,r="list"===l.type?l.items.find(e=>e.id===n):null,o=eb(e,t);return r&&r.title&&(o=o.title(r.title)),o})}function eb(e,t){let{schema:n,resolveDocumentNode:i}=e,l="string"==typeof t?t:t.schemaType,r="string"==typeof l?l:l.name,o="string"==typeof t?{}:t,s=n.get(r);if(!s)throw Error(`Schema type with name "${r}" not found`);let a=s.title||(0,j.startCase)(r);return new eh(e).id(o.id||r).title(o.title||a).filter("_type == $type").params({type:r}).schemaType(s).defaultOrdering(k.by).menuItemGroups(o.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:C}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:C}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:C}}}]).child(o.child||(e=>i({schemaType:r,documentId:e}))).canHandleIntent(o.canHandleIntent||ee).menuItems(o.menuItems||[...M(e,s),new A(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:C}}).title("Compact view").icon(m.StackCompactIcon).action("setLayout").params({layout:"default"}),new A(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:C}}).title("Detailed view").icon(m.StackIcon).action("setLayout").params({layout:"detail"})])}function ey(e){let t,n,i,l,r,h=(0,s.c)(26),{defaultDocumentNode:g,structure:f,children:x}=e,[b,y]=(0,a.useState)(!1),v=(0,d.useSource)(),j=(0,d.useConfigContextFromSource)(v),w=(0,d.useDocumentStore)(),{perspectiveStack:S}=(0,d.usePerspective)();h[0]!==g||h[1]!==S||h[2]!==v?(t=function({defaultDocumentNode:e,source:t,perspectiveStack:n}){let i=(0,d.getConfigContextFromSource)(t),l={...t,getStructureBuilder:()=>r,resolveDocumentNode:t=>{let n=e?.(r,{...t,...i})||new J(l);return n.getId()||(n=n.id("documentEditor")),t.documentId&&(n=n.documentId((0,c.getPublishedId)(t.documentId))),n.schemaType(t.schemaType)},perspectiveStack:n},r={defaults:()=>{let e;return e=ef(l),new ec(l).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:C}}).items(e).showIcons(e.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))},documentTypeList:(...e)=>eb(l,...e),documentTypeListItem:(...e)=>ex(l,...e),documentTypeListItems:(...e)=>ef(l,...e),document:(...e)=>new J(l,...e),documentWithInitialValueTemplate:(...e)=>(function({resolveDocumentNode:e,templates:t},n,i){let l=t.find(e=>e.id===n);if(!l)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:l.schemaType}).initialValueTemplate(n,i)})(l,...e),defaultDocument:l.resolveDocumentNode,list:(...e)=>new ec(l,...e),listItem:(...e)=>new eu(l,...e),menuItem:(...e)=>new A(l,...e),menuItemGroup:(...e)=>new z(l,...e),menuItemsFromInitialValueTemplateItems:(...e)=>(function(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let l=i.find(e=>e.id===t.templateId),r=t.title||l?.title||"Create",o={};l&&l.schemaType&&(o.type=l.schemaType),t.templateId&&(o.template=t.templateId);let s=t.parameters?[o,t.parameters]:o,a=l&&n.get(l.schemaType),d=t.i18n||l?.i18n,c=new A(e).title(r).icon(l&&l.icon||a?.icon||m.AddIcon).intent({type:"create",params:s});return d&&(c=c.i18n(d)),c.serialize()})})(l,...e),documentList:(...e)=>new er(l,...e),documentListItem:(...e)=>new ep(l,...e),orderingMenuItem:(...e)=>V(l,...e),orderingMenuItemsForType:(...e)=>M(l,...e),editor:(...e)=>(function(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new J(e);if(!t)return n;let{id:i,type:l,template:r,templateParameters:o}=t.options;return n=n.id(t.id).documentId(i),l&&(n=n.schemaType(l)),r&&(n=n.initialValueTemplate(r,o)),t.child&&(n=n.child(t.child)),n})(l,...e),defaultInitialValueTemplateItems:(...e)=>(function(e){let{schema:t,getStructureBuilder:n,templates:i}=e,l=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>l.indexOf(e.schemaType)-l.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))})(l,...e),initialValueTemplateItem:(e,t)=>new Q(l,{id:e,parameters:t,templateId:e}),component:e=>(0,p.isValidElementType)(e)?new $().component(e):new $(e),divider:e=>new N(e),view:X,context:l};return r}({defaultDocumentNode:g,source:v,perspectiveStack:S}),h[0]=g,h[1]=S,h[2]=v,h[3]=t):t=h[3];let _=t;e:{let e;if(f){let e;h[4]!==_||h[5]!==j||h[6]!==w||h[7]!==S||h[8]!==f?(e=f(_,{...j,documentStore:w,perspectiveStack:S}),h[4]=_,h[5]=j,h[6]=w,h[7]=S,h[8]=f,h[9]=e):e=h[9],n=e;break e}h[10]!==_?(e=_.defaults(),h[10]=_,h[11]=e):e=h[11],n=e}let I=n,T=!b,R=!b,P=!b,E=!b;h[12]!==b||h[13]!==T||h[14]!==R||h[15]!==P||h[16]!==E?(i={backButton:b,resizablePanes:T,reviewChanges:R,splitPanes:P,splitViews:E},h[12]=b,h[13]=T,h[14]=R,h[15]=P,h[16]=E,h[17]=i):i=h[17];let k=i;h[18]!==_.context||h[19]!==k||h[20]!==b||h[21]!==I?(l={features:k,layoutCollapsed:b,setLayoutCollapsed:y,rootPaneNode:I,structureContext:_.context},h[18]=_.context,h[19]=k,h[20]=b,h[21]=I,h[22]=l):l=h[22];let D=l;return h[23]!==x||h[24]!==D?(r=(0,o.jsx)(u.StructureToolContext.Provider,{value:D,children:x}),h[23]=x,h[24]=D,h[25]=r):r=h[25],r}e.s(["SerializeError",()=>R,"StructureToolProvider",()=>ey,"getExtendedProjection",()=>T,"structureLocaleNamespace",()=>C,"structureUsEnglishLocaleBundle",()=>_],88942);var ev=e.i(63486),ej=e.i(25917),ew=e.i(78491),eS=e.i(64308),eC=e.i(63647),e_=e.i(97053),eI=e.i(33483),eT=e.i(46932),eR=e.i(88653),eP=e.i(97083),eE=e.i(28696),ek=e.i(67e3),eD=e.i(28676),eF=e.i(56179),eA=e.i(66133),eA=eA,eV=e.i(21634),eM=e.i(61510),eL=e.i(43894),ez=e.i(68233),eO=e.i(374),eB=e.i(49242),eH=e.i(94059),e$=e.i(92481),eN=e.i(58832),eG=e.i(27492),eU=e.i(18692),eq=e.i(74e3),eW=e.i(34352),eK=e.i(27341),eY=e.i(11308),eX=e.i(60739),eJ=e.i(22249),eQ=e.i(10839),eZ=e.i(84973),e0=e.i(77497),e1=e.i(879),e2=e.i(8659),e3=e.i(45281),e4=e.i(93817),e5=e.i(2400),e6=e.i(39338),e8=e.i(78856),e7=e.i(30823),e9=e.i(7136),te=e.i(17312),tt=e.i(96623),tn=e.i(72441),ti=e.i(95944),tl=e.i(73904),tr=e.i(55083),to=e.i(29437),ts=e.i(89196),ta=e.i(24981),td=e.i(14494),tc=e.i(33327),tu=e.i(82065),tp=e.i(45456);let tm=({clientWidth:e,clientHeight:t,scrollWidth:n,scrollHeight:i})=>i>t||n>e,th=e=>{let t=window.getComputedStyle(e).overflow;return t.includes("auto")||t.includes("scroll")},tg=e=>{if(null==e)return{x:0,y:0};let{scrollTop:t,scrollHeight:n,clientHeight:i,scrollLeft:l,scrollWidth:r,clientWidth:o}=e;return{x:l?l/Math.max(1e-5,r-o):0,y:t?t/Math.max(1e-5,n-i):0}};function tf(){return(tf=Object.assign.bind()).apply(null,arguments)}function tx(e){return e.matches("body *")?e:window}class tb{constructor(e,t={}){var n,i=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(e){if(i.paused||!e.currentTarget)return;let t=i.getScrollContainer(e.currentTarget);await new Promise(e=>{requestAnimationFrame(()=>e())}),i.mirrorScrollPositions(tg(t),t)},this.elements=[...e].filter(Boolean).map(e=>this.getScrollContainer(e)),this.elements=[...new Set(this.elements)],this.options=tf({},this.defaults,t),this.options.debug&&(this.logger=(n="[scroll-mirror]",{log:(...e)=>console.log(n,...e),warn:(...e)=>console.warn(n,...e),error:(...e)=>console.error(n,...e)}),function(e,t){if(e.length<1)null==t||t.warn("No elements provided.");else for(let n of(e.length<2&&(null==t||t.warn("Only one element provided.",e)),e.some(e=>!e)&&(null==t||t.error("Some elements are not defined.",e)),e))n instanceof HTMLElement&&!tm(n)&&(null==t||t.warn("Element doesn't have overflow:",n)),n instanceof HTMLElement&&n.matches("body *")&&!th(n)&&(null==t||t.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',n))}(this.elements,this.logger)),this.elements.forEach(e=>this.addScrollHandler(e)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(tg(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(e=>this.removeScrollHandler(e))}addScrollHandler(e){this.removeScrollHandler(e),tx(e).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(e){tx(e).removeEventListener("scroll",this.handleScroll)}getScrollContainer(e){return e instanceof HTMLElement&&e.matches("body *")?e:document.documentElement}mirrorScrollPositions(e,t){this.elements.forEach(n=>{t!==n&&(this.removeScrollHandler(n),this.setScrollPosition(e,n),window.requestAnimationFrame(()=>{this.addScrollHandler(n)}))})}setScrollPosition(e,t){let{vertical:n,horizontal:i}=this.options,l=t.scrollWidth-t.clientWidth,r=t.scrollHeight-t.clientHeight;n&&r&&t.scrollTo({top:r*e.y,behavior:"instant"}),i&&l&&t.scrollTo({left:l*e.x,behavior:"instant"})}get progress(){return tg(this.elements.find(e=>tm(e)))}set progress(e){"number"==typeof e&&(e={x:e,y:e});let t=tf({},this.progress,e);(function(e,t){let n=!0;for(let[i,l]of Object.entries(e))("number"!=typeof l||l<0||l>1)&&(null==t||t.error(`progress.${i} must be a number between 0-1`),n=!1);return n})(t,this.logger)&&this.mirrorScrollPositions(t)}}var ty=e.i(32892),tv=e.i(24019),tj=a,tw=e.i(26624),tS=e.i(74789);let tC=Math.ceil(10*Math.random());function t_(e){return Object.prototype.toString.call(e).slice(8,-1)}function tI(e){let t=t_(e);return"Object"!==t&&"Array"!==t}class tT extends tj.Component{shouldComponentUpdate(e){return e.highlight!==this.props.highlight}render(){let e=this.props.string||"",t=this.props.highlight||"",n=e.search(t);if(!t||-1===n)return(0,o.jsx)("span",{children:e});let i=t.source.length,l=e.slice(n,n+i);return(0,o.jsx)("span",{children:e.split(t).map(function(e,t){return(0,o.jsxs)("span",{children:[t>0?(0,o.jsx)("span",{className:"json-inspector__hl",children:l}):null,e]},t)})})}}function tR(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}class tP extends tj.Component{constructor(e){super(e),this.state={expanded:this._isInitiallyExpanded(this.props)}}render(){let{label:e,data:t,root:n,id:i}=this.props,l="id_"+ ++tC,r={path:this.keypath(),key:e.toString(),value:t},s=this._onClick.bind(this,r);return(0,o.jsxs)("div",{"data-testid":n?"leaf-root":"leaf-child","aria-expanded":this.state.expanded,"data-root":n||void 0,className:this.getClassName(),id:"leaf-"+this._rootPath(),children:[(0,o.jsx)("input",{className:"json-inspector__radio",type:"radio",name:l,id:i,tabIndex:-1}),(0,o.jsxs)("label",{className:"json-inspector__line",htmlFor:l,onClick:s,children:[(0,o.jsx)("div",{className:"json-inspector__flatpath",children:r.path}),(0,o.jsxs)("span",{className:"json-inspector__key",children:[this.format(r.key),":",this.renderInteractiveLabel(r.key,!0)]}),this.renderTitle(),this.renderShowOriginalButton()]}),this.renderChildren()]})}renderTitle(){var e,t;let n=this.data(),i=t_(n);if(Array.isArray(n)){let t=n.length;return(0,o.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[t>0?"[…] ":"[] ",(e=t)+(1===e?" item":" items")]})}if("object"==typeof n&&null!==n){let e=Object.keys(n).length;return(0,o.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[e>0?"{…} ":"{} ",(t=e)+(1===t?" property":" properties")]})}return(0,o.jsxs)("span",{className:"json-inspector__value json-inspector__value_"+i.toLowerCase(),children:[this.format(String(n)),this.renderInteractiveLabel(n,!1)]})}renderChildren(){let{verboseShowOriginal:e,query:t,id:n,isExpanded:i,interactiveLabel:l,onClick:r,getOriginal:s}=this.props,a=this._rootPath(),d=this.data();return this.state.expanded&&(tR(d)||Array.isArray(d))?Object.keys(d).map(c=>{var u,p;let m=d[c],h=!this.state.original||!!e&&t;return(0,o.jsx)(tP,{data:m,label:c,prefix:a,onClick:r,id:n,query:t,getOriginal:h?s:void 0,isExpanded:i,interactiveLabel:l,verboseShowOriginal:e},(u=c,tI(p=m)?u+":"+(0,tS.default)(String(p)):u+"["+t_(p)+"]"))}):null}renderShowOriginalButton(){let{data:e,getOriginal:t,query:n}=this.props;return tI(e)||this.state.original||!t||!n||n.test(this.keypath())?null:(0,o.jsx)("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})}renderInteractiveLabel(e,t){let n=this.props.interactiveLabel;return"function"==typeof n?(0,o.jsx)(n,{value:String(e),originalValue:e,isKey:t,keypath:this.keypath()}):null}static getDerivedStateFromProps(e,t){return e.query?{expanded:!e.query.test(e.label)}:null}componentDidUpdate(e){e.query&&!this.props.query&&this.setState({expanded:this._isInitiallyExpanded(this.props)})}_rootPath(){return(this.props.prefix||"")+"."+this.props.label}keypath(){return this._rootPath().slice(6)}data(){return this.state.original||this.props.data}format(e){return(0,o.jsx)(tT,{string:e,highlight:this.props.query})}getClassName(){let e="json-inspector__leaf";return this.props.root&&(e+=" json-inspector__leaf_root"),this.state.expanded&&(e+=" json-inspector__leaf_expanded"),tI(this.props.data)||(e+=" json-inspector__leaf_composite"),e}toggle(){this.setState({expanded:!this.state.expanded})}_onClick(e,t){this.toggle(),this.props.onClick&&this.props.onClick(e),t.stopPropagation()}_onShowOriginalClick=e=>{this.setState({original:this.props.getOriginal?.(this.keypath())}),e.stopPropagation()};_isInitiallyExpanded(e){if(e.root)return!0;let t=this.keypath();return e.query?!e.query.test(t)&&"function"==typeof e.getOriginal:!!e.isExpanded&&e.isExpanded(t,e.data)}}let tE=(...e)=>{},tk=({onChange:e=tE})=>{let t=(0,tj.useCallback)(t=>e(t.target.value),[e]);return(0,o.jsx)("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:t})};function tD(e){return tR(e)?0===Object.keys(e).length:Array.isArray(e)?0===e.length:null===e||"string"!=typeof e||"number"!=typeof e||0===Object.keys(e).length}let tF=(r=(e,t)=>{let n=t||{cacheResults:!0},i={};return function(t){let l;if(!n.cacheResults)return tA(e,t,n);if(!i[t]){for(var r=t.length-1;r>0;r-=1)if(i[l=t.slice(0,r)]){i[t]=tA(i[l],t,n);break}}return i[t]||(i[t]=tA(e,t,n)),i[t]}},(e,t)=>(l&&e===n&&t===i||(n=e,i=t,l=r(e,t)),l));function tA(e,t,n){return tR(e)||Array.isArray(e)?Object.keys(e).reduce(function(i,l){let r,o=e[l];return o&&("object"!=typeof o?(tV(t,l,n)||tV(t,o,n))&&(i[l]=o):tV(t,l,n)?i[l]=o:tD(r=tA(o,t,n))||Object.assign(i,{[l]:r})),i},{}):{}}function tV(e,t,n){if(!t)return!1;var i=String(t),l=e;return n?.ignoreCase&&(i=i.toLowerCase(),l=l.toLowerCase()),-1!==i.indexOf(l)}function tM(e){return parseInt(e,10)}let tL=e=>e.length>=2,tz={cacheResults:!0,ignoreCase:!1};class tO extends tj.Component{static defaultProps={data:null,search:tk,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:tE,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(e){return e.length>=2},isExpanded:function(e,t){return!1},verboseShowOriginal:!1};constructor(e){super(e),this.state={query:"",filterer:tF(e.data,e.filterOptions)}}render(){let{data:e,className:t,onClick:n,id:i,isExpanded:l,interactiveLabel:r,verboseShowOriginal:s,filterOptions:a=tz,validateQuery:d=tL}=this.props,c=""!==this.state.query&&d(this.state.query),u=c?this.state.filterer(this.state.query):e,p=c&&tD(u);return(0,o.jsxs)("div",{"data-testid":"json-inspector",className:"json-inspector "+t,children:[this.renderToolbar(),p?(0,o.jsx)("div",{className:"json-inspector__not-found",children:"Nothing found"}):(0,o.jsx)(tP,{data:u,onClick:n,id:i,getOriginal:this.getOriginal,query:c?new RegExp(this.state.query,a.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:l,interactiveLabel:r,verboseShowOriginal:s})]})}renderToolbar(){let e=this.props.search;return e?(0,o.jsx)("div",{className:"json-inspector__toolbar",children:(0,o.jsx)(e,{onChange:(0,tw.default)(this.search,this.props.searchOptions?.debounceTime),data:this.props.data,query:this.state.query})}):null}search=e=>{this.setState({query:e})};static getDerivedStateFromProps(e,t){let n=tF(e.data,e.filterOptions);return n===t.filterer?null:{...t,filterer:n}}shouldComponentUpdate(e,t){return t.query!==this.state.query||e.data!==this.props.data||e.onClick!==this.props.onClick}createFilterer=(e,t)=>{this.setState({filterer:tF(e,t)})};getOriginal=e=>(function e(t,n){var i=n.split("."),l=i.shift();return l?Array.isArray(t)&&t[tM(l)]?e(t[tM(l)],i.join(".")):tR(t)&&l in t?e(t[l],i.join(".")):void 0:t})(this.props.data,e)}var tB=e.i(60719),tH=e.i(71857),t$=e.i(33331),tN=e.i(74875),tG=e.i(1851),tU=e.i(40289),tq=e.i(83107),tW=e.i(45736),tK=e.i(91426),tY=e.i(8551);function tX(e,t){return"function"==typeof e?e(t):e}function tJ(e,t){return n=>{t.setState(t=>({...t,[e]:tX(n,t[e])}))}}function tQ(e){return e instanceof Function}function tZ(e,t,n){let i,l=[];return r=>{let o,s;n.key&&n.debug&&(o=Date.now());let a=e(r);if(!(a.length!==l.length||a.some((e,t)=>l[t]!==e)))return i;if(l=a,n.key&&n.debug&&(s=Date.now()),i=t(...a),null==n||null==n.onChange||n.onChange(i),n.key&&n.debug&&null!=n&&n.debug()){let e=Math.round((Date.now()-o)*100)/100,t=Math.round((Date.now()-s)*100)/100,i=t/16,l=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c⏱ ${l(t,5)} /${l(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*i,120))}deg 100% 31%);`,null==n?void 0:n.key)}return i}}function t0(e,t,n,i){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:i}}e.i(47167);let t1="debugHeaders";function t2(e,t,n){var i;let l={id:null!=(i=n.id)?i:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(l),e},getContext:()=>({table:e,header:l,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(l,e)}),l}function t3(e,t,n,i){var l,r;let o=0,s=function(e,t){void 0===t&&(t=1),o=Math.max(o,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&s(e.columns,t+1)},0)};s(e);let a=[],d=(e,t)=>{let l={depth:t,id:[i,`${t}`].filter(Boolean).join("_"),headers:[]},r=[];e.forEach(e=>{let o,s=[...r].reverse()[0],a=e.column.depth===l.depth,d=!1;if(a&&e.column.parent?o=e.column.parent:(o=e.column,d=!0),s&&(null==s?void 0:s.column)===o)s.subHeaders.push(e);else{let l=t2(n,o,{id:[i,t,o.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:d,placeholderId:d?`${r.filter(e=>e.column===o).length}`:void 0,depth:t,index:r.length});l.subHeaders.push(e),r.push(l)}l.headers.push(e),e.headerGroup=l}),a.push(l),t>0&&d(r,t-1)};d(t.map((e,t)=>t2(n,e,{depth:o,index:t})),o-1),a.reverse();let c=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,i=[0];return e.subHeaders&&e.subHeaders.length?(i=[],c(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:l}=e;t+=n,i.push(l)})):t=1,n+=Math.min(...i),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return c(null!=(l=null==(r=a[0])?void 0:r.headers)?l:[]),a}let t4=(e,t,n,i,l,r,o)=>{let s={id:t,index:i,original:n,depth:l,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return s._valuesCache[t]=n.accessorFn(s.original,i),s._valuesCache[t]},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return n.columnDef.getUniqueValues?s._uniqueValuesCache[t]=n.columnDef.getUniqueValues(s.original,i):s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]},renderValue:t=>{var n;return null!=(n=s.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=r?r:[],getLeafRows:()=>{var e,t;let n,i;return e=s.subRows,t=e=>e.subRows,n=[],(i=e=>{e.forEach(e=>{n.push(e);let l=t(e);null!=l&&l.length&&i(l)})})(e),n},getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){let n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:tZ(()=>[e.getAllLeafColumns()],t=>t.map(t=>{var n;let i;return n=t.id,i={id:`${s.id}_${t.id}`,row:s,column:t,getValue:()=>s.getValue(n),renderValue:()=>{var t;return null!=(t=i.getValue())?t:e.options.renderFallbackValue},getContext:tZ(()=>[e,t,s,i],(e,t,n,i)=>({table:e,column:t,row:n,cell:i,getValue:i.getValue,renderValue:i.renderValue}),t0(e.options,"debugCells","cell.getContext"))},e._features.forEach(n=>{null==n.createCell||n.createCell(i,t,s,e)},{}),i}),t0(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:tZ(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),t0(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let n=e._features[t];null==n||null==n.createRow||n.createRow(s,e)}return s},t5=(e,t,n)=>{var i,l;let r=null==n||null==(i=n.toString())?void 0:i.toLowerCase();return!!(null==(l=e.getValue(t))||null==(l=l.toString())||null==(l=l.toLowerCase())?void 0:l.includes(r))};t5.autoRemove=e=>nr(e);let t6=(e,t,n)=>{var i;return!!(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.includes(n))};t6.autoRemove=e=>nr(e);let t8=(e,t,n)=>{var i;return(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.toLowerCase())===(null==n?void 0:n.toLowerCase())};t8.autoRemove=e=>nr(e);let t7=(e,t,n)=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)};t7.autoRemove=e=>nr(e);let t9=(e,t,n)=>!n.some(n=>{var i;return!(null!=(i=e.getValue(t))&&i.includes(n))});t9.autoRemove=e=>nr(e)||!(null!=e&&e.length);let ne=(e,t,n)=>n.some(n=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)});ne.autoRemove=e=>nr(e)||!(null!=e&&e.length);let nt=(e,t,n)=>e.getValue(t)===n;nt.autoRemove=e=>nr(e);let nn=(e,t,n)=>e.getValue(t)==n;nn.autoRemove=e=>nr(e);let ni=(e,t,n)=>{let[i,l]=n,r=e.getValue(t);return r>=i&&r<=l};ni.resolveFilterValue=e=>{let[t,n]=e,i="number"!=typeof t?parseFloat(t):t,l="number"!=typeof n?parseFloat(n):n,r=null===t||Number.isNaN(i)?-1/0:i,o=null===n||Number.isNaN(l)?1/0:l;if(r>o){let e=r;r=o,o=e}return[r,o]},ni.autoRemove=e=>nr(e)||nr(e[0])&&nr(e[1]);let nl={includesString:t5,includesStringSensitive:t6,equalsString:t8,arrIncludes:t7,arrIncludesAll:t9,arrIncludesSome:ne,equals:nt,weakEquals:nn,inNumberRange:ni};function nr(e){return null==e||""===e}function no(e,t,n){return!!e&&!!e.autoRemove&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}let ns={sum:(e,t,n)=>n.reduce((t,n)=>{let i=n.getValue(e);return t+("number"==typeof i?i:0)},0),min:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i>n||void 0===i&&n>=n)&&(i=n)}),i},max:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i<n||void 0===i&&n>=n)&&(i=n)}),i},extent:(e,t,n)=>{let i,l;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(void 0===i?n>=n&&(i=l=n):(i>n&&(i=n),l<n&&(l=n)))}),[i,l]},mean:(e,t)=>{let n=0,i=0;if(t.forEach(t=>{let l=t.getValue(e);null!=l&&(l*=1)>=l&&(++n,i+=l)}),n)return i/n},median:(e,t)=>{if(!t.length)return;let n=t.map(t=>t.getValue(e));if(!(Array.isArray(n)&&n.every(e=>"number"==typeof e)))return;if(1===n.length)return n[0];let i=Math.floor(n.length/2),l=n.sort((e,t)=>e-t);return n.length%2!=0?l[i]:(l[i-1]+l[i])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},na=()=>({left:[],right:[]}),nd={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},nc=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),nu=null;function np(e){return"touchstart"===e.type}function nm(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let nh=()=>({pageIndex:0,pageSize:10}),ng=()=>({top:[],bottom:[]}),nf=(e,t,n,i,l)=>{var r;let o=l.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),o.getCanSelect()&&(e[t]=!0)):delete e[t],i&&null!=(r=o.subRows)&&r.length&&o.getCanSelectSubRows()&&o.subRows.forEach(t=>nf(e,t.id,n,i,l))};function nx(e,t){let n=e.getState().rowSelection,i=[],l={},r=function(e,t){return e.map(e=>{var t;let o=nb(e,n);if(o&&(i.push(e),l[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:r(e.subRows)}),o)return e}).filter(Boolean)};return{rows:r(t.rows),flatRows:i,rowsById:l}}function nb(e,t){var n;return null!=(n=t[e.id])&&n}function ny(e,t,n){var i;if(!(null!=(i=e.subRows)&&i.length))return!1;let l=!0,r=!1;return e.subRows.forEach(e=>{if((!r||l)&&(e.getCanSelect()&&(nb(e,t)?r=!0:l=!1),e.subRows&&e.subRows.length)){let n=ny(e,t);"all"===n?r=!0:("some"===n&&(r=!0),l=!1)}}),l?"all":!!r&&"some"}let nv=/([0-9]+)/gm;function nj(e,t){return e===t?0:e>t?1:-1}function nw(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function nS(e,t){let n=e.split(nv).filter(Boolean),i=t.split(nv).filter(Boolean);for(;n.length&&i.length;){let e=n.shift(),t=i.shift(),l=parseInt(e,10),r=parseInt(t,10),o=[l,r].sort();if(isNaN(o[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(o[1]))return isNaN(l)?-1:1;if(l>r)return 1;if(r>l)return -1}return n.length-i.length}let nC={alphanumeric:(e,t,n)=>nS(nw(e.getValue(n)).toLowerCase(),nw(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>nS(nw(e.getValue(n)),nw(t.getValue(n))),text:(e,t,n)=>nj(nw(e.getValue(n)).toLowerCase(),nw(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>nj(nw(e.getValue(n)),nw(t.getValue(n))),datetime:(e,t,n)=>{let i=e.getValue(n),l=t.getValue(n);return i>l?1:i<l?-1:0},basic:(e,t,n)=>nj(e.getValue(n),t.getValue(n))},n_=[{createTable:e=>{e.getHeaderGroups=tZ(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>{var r,o;let s=null!=(r=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[],a=null!=(o=null==l?void 0:l.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[];return t3(t,[...s,...n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),...a],e)},t0(e.options,t1,"getHeaderGroups")),e.getCenterHeaderGroups=tZ(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>t3(t,n=n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),e,"center"),t0(e.options,t1,"getCenterHeaderGroups")),e.getLeftHeaderGroups=tZ(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,i)=>{var l;return t3(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"left")},t0(e.options,t1,"getLeftHeaderGroups")),e.getRightHeaderGroups=tZ(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,i)=>{var l;return t3(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"right")},t0(e.options,t1,"getRightHeaderGroups")),e.getFooterGroups=tZ(()=>[e.getHeaderGroups()],e=>[...e].reverse(),t0(e.options,t1,"getFooterGroups")),e.getLeftFooterGroups=tZ(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),t0(e.options,t1,"getLeftFooterGroups")),e.getCenterFooterGroups=tZ(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),t0(e.options,t1,"getCenterFooterGroups")),e.getRightFooterGroups=tZ(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),t0(e.options,t1,"getRightFooterGroups")),e.getFlatHeaders=tZ(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),t0(e.options,t1,"getFlatHeaders")),e.getLeftFlatHeaders=tZ(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),t0(e.options,t1,"getLeftFlatHeaders")),e.getCenterFlatHeaders=tZ(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),t0(e.options,t1,"getCenterFlatHeaders")),e.getRightFlatHeaders=tZ(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),t0(e.options,t1,"getRightFlatHeaders")),e.getCenterLeafHeaders=tZ(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t0(e.options,t1,"getCenterLeafHeaders")),e.getLeftLeafHeaders=tZ(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t0(e.options,t1,"getLeftLeafHeaders")),e.getRightLeafHeaders=tZ(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t0(e.options,t1,"getRightLeafHeaders")),e.getLeafHeaders=tZ(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var i,l,r,o,s,a;return[...null!=(i=null==(l=e[0])?void 0:l.headers)?i:[],...null!=(r=null==(o=t[0])?void 0:o.headers)?r:[],...null!=(s=null==(a=n[0])?void 0:a.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},t0(e.options,t1,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:tJ("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,i;let l=e.columns;return null==(n=l.length?l.some(e=>e.getIsVisible()):null==(i=t.getState().columnVisibility)?void 0:i[e.id])||n},e.getCanHide=()=>{var n,i;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(i=t.options.enableHiding)||i)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=tZ(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),t0(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=tZ(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],t0(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,n)=>tZ(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),t0(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:tJ("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=tZ(e=>[nm(t,e)],t=>t.findIndex(t=>t.id===e.id),t0(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=n=>{var i;return(null==(i=nm(t,n)[0])?void 0:i.id)===e.id},e.getIsLastColumn=n=>{var i;let l=nm(t,n);return(null==(i=l[l.length-1])?void 0:i.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=tZ(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>i=>{let l=[];if(null!=e&&e.length){let t=[...e],n=[...i];for(;n.length&&t.length;){let e=t.shift(),i=n.findIndex(t=>t.id===e);i>-1&&l.push(n.splice(i,1)[0])}l=[...l,...n]}else l=i;var r=l;if(!(null!=t&&t.length)||!n)return r;let o=r.filter(e=>!t.includes(e.id));return"remove"===n?o:[...t.map(e=>r.find(t=>t.id===e)).filter(Boolean),...o]},t0(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:na(),...e}),getDefaultOptions:e=>({onColumnPinningChange:tJ("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{let i=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,l,r,o,s,a;return"right"===n?{left:(null!=(r=null==e?void 0:e.left)?r:[]).filter(e=>!(null!=i&&i.includes(e))),right:[...(null!=(o=null==e?void 0:e.right)?o:[]).filter(e=>!(null!=i&&i.includes(e))),...i]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=i&&i.includes(e))),...i],right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=i&&i.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=i&&i.includes(e))),right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=i&&i.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,i,l;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(i=null!=(l=t.options.enableColumnPinning)?l:t.options.enablePinning)||i)}),e.getIsPinned=()=>{let n=e.getLeafColumns().map(e=>e.id),{left:i,right:l}=t.getState().columnPinning,r=n.some(e=>null==i?void 0:i.includes(e)),o=n.some(e=>null==l?void 0:l.includes(e));return r?"left":!!o&&"right"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();return l?null!=(n=null==(i=t.getState().columnPinning)||null==(i=i[l])?void 0:i.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=tZ(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.column.id))},t0(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=tZ(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),t0(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=tZ(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),t0(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,i;return e.setColumnPinning(t?na():null!=(n=null==(i=e.initialState)?void 0:i.columnPinning)?n:na())},e.getIsSomeColumnsPinned=t=>{var n,i,l;let r=e.getState().columnPinning;return t?!!(null==(n=r[t])?void 0:n.length):!!((null==(i=r.left)?void 0:i.length)||(null==(l=r.right)?void 0:l.length))},e.getLeftLeafColumns=tZ(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),t0(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=tZ(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),t0(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=tZ(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.id))},t0(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:tJ("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"string"==typeof i?nl.includesString:"number"==typeof i?nl.inNumberRange:"boolean"==typeof i||null!==i&&"object"==typeof i?nl.equals:Array.isArray(i)?nl.arrIncludes:nl.weakEquals},e.getFilterFn=()=>{var n,i;return tQ(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(i=t.options.filterFns)?void 0:i[e.columnDef.filterFn])?n:nl[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,i,l;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(i=t.options.enableColumnFilters)||i)&&(null==(l=t.options.enableFilters)||l)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().columnFilters)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{var i,l;let r=e.getFilterFn(),o=null==t?void 0:t.find(t=>t.id===e.id),s=tX(n,o?o.value:void 0);if(no(r,s,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];let a={id:e.id,value:s};return o?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?a:t))?l:[]:null!=t&&t.length?[...t,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{let n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var i;return null==(i=tX(t,e))?void 0:i.filter(e=>{let t=n.find(t=>t.id===e.id);return!(t&&no(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var n,i;e.setColumnFilters(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:tJ("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;let i=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof i||"number"==typeof i}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,i,l,r;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(i=t.options.enableGlobalFilter)||i)&&(null==(l=t.options.enableFilters)||l)&&(null==(r=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||r)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>nl.includesString,e.getGlobalFilterFn=()=>{var t,n;let{globalFilterFn:i}=e.options;return tQ(i)?i:"auto"===i?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[i])?t:nl[i]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:tJ("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let n=t.getFilteredRowModel().flatRows.slice(10),i=!1;for(let t of n){let n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return nC.datetime;if("string"==typeof n&&(i=!0,n.split(nv).length>1))return nC.alphanumeric}return i?nC.text:nC.basic},e.getAutoSortDir=()=>{let n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,i;if(!e)throw Error();return tQ(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(i=t.options.sortingFns)?void 0:i[e.columnDef.sortingFn])?n:nC[e.columnDef.sortingFn]},e.toggleSorting=(n,i)=>{let l=e.getNextSortingOrder(),r=null!=n;t.setSorting(o=>{let s,a=null==o?void 0:o.find(t=>t.id===e.id),d=null==o?void 0:o.findIndex(t=>t.id===e.id),c=[],u=r?n:"desc"===l;if("toggle"!=(s=null!=o&&o.length&&e.getCanMultiSort()&&i?a?"toggle":"add":null!=o&&o.length&&d!==o.length-1?"replace":a?"toggle":"replace")||r||l||(s="remove"),"add"===s){var p;(c=[...o,{id:e.id,desc:u}]).splice(0,c.length-(null!=(p=t.options.maxMultiSortColCount)?p:Number.MAX_SAFE_INTEGER))}else c="toggle"===s?o.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===s?o.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return c})},e.getFirstSortDir=()=>{var n,i;return(null!=(n=null!=(i=e.columnDef.sortDescFirst)?i:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var i,l;let r=e.getFirstSortDir(),o=e.getIsSorted();return o?(o===r||null!=(i=t.options.enableSortingRemoval)&&!i||!!n&&null!=(l=t.options.enableMultiRemove)&&!l)&&("desc"===o?"asc":"desc"):r},e.getCanSort=()=>{var n,i;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(i=t.options.enableSorting)||i)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,i;return null!=(n=null!=(i=e.columnDef.enableMultiSort)?i:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;let i=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!i&&(i.desc?"desc":"asc")},e.getSortIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().sorting)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let n=e.getCanSort();return i=>{n&&(null==i.persist||i.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(i))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,i;e.setSorting(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:tJ("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,i;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(i=t.options.enableGrouping)||i)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"number"==typeof i?ns.sum:"[object Date]"===Object.prototype.toString.call(i)?ns.extent:void 0},e.getAggregationFn=()=>{var n,i;if(!e)throw Error();return tQ(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(i=t.options.aggregationFns)?void 0:i[e.columnDef.aggregationFn])?n:ns[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,i;e.setGrouping(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];let i=t.getColumn(n);return null!=i&&i.columnDef.getGroupingValue?(e._groupingValuesCache[n]=i.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,i)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=n.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:tJ("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetExpanded)?i:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,i;e.setExpanded(t?{}:null!=(n=null==(i=e.initialState)?void 0:i.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(i=>{var l;let r=!0===i||!!(null!=i&&i[e.id]),o={};if(!0===i?Object.keys(t.getRowModel().rowsById).forEach(e=>{o[e]=!0}):o=i,n=null!=(l=n)?l:!r,!r&&n)return{...o,[e.id]:!0};if(r&&!n){let{[e.id]:t,...n}=o;return n}return i})},e.getIsExpanded=()=>{var n;let i=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===i||(null==i?void 0:i[e.id]))},e.getCanExpand=()=>{var n,i,l;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(i=t.options.enableExpanding)||i)&&!!(null!=(l=e.subRows)&&l.length)},e.getIsAllParentsExpanded=()=>{let n=!0,i=e;for(;n&&i.parentId;)n=(i=t.getRow(i.parentId,!0)).getIsExpanded();return n},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...nh(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:tJ("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetPageIndex)?i:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>tX(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?nh():null!=(n=e.initialState.pagination)?n:nh())},e.setPageIndex=t=>{e.setPagination(n=>{let i=tX(t,n.pageIndex);return i=Math.max(0,Math.min(i,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...n,pageIndex:i}})},e.resetPageIndex=t=>{var n,i;e.setPageIndex(t?0:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageIndex)?n:0)},e.resetPageSize=t=>{var n,i;e.setPageSize(t?10:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{let n=Math.max(1,tX(t,e.pageSize)),i=Math.floor(e.pageSize*e.pageIndex/n);return{...e,pageIndex:i,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var i;let l=tX(t,null!=(i=e.options.pageCount)?i:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...n,pageCount:l}}),e.getPageOptions=tZ(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},t0(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return -1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:ng(),...e}),getDefaultOptions:e=>({onRowPinningChange:tJ("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,i,l)=>{let r=i?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],o=new Set([...l?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...r]);t.setRowPinning(e=>{var t,i,l,r,s,a;return"bottom"===n?{top:(null!=(l=null==e?void 0:e.top)?l:[]).filter(e=>!(null!=o&&o.has(e))),bottom:[...(null!=(r=null==e?void 0:e.bottom)?r:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)]}:"top"===n?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)],bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=o&&o.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=o&&o.has(e))),bottom:(null!=(i=null==e?void 0:e.bottom)?i:[]).filter(e=>!(null!=o&&o.has(e)))}})},e.getCanPin=()=>{var n;let{enableRowPinning:i,enablePinning:l}=t.options;return"function"==typeof i?i(e):null==(n=null!=i?i:l)||n},e.getIsPinned=()=>{let n=[e.id],{top:i,bottom:l}=t.getState().rowPinning,r=n.some(e=>null==i?void 0:i.includes(e)),o=n.some(e=>null==l?void 0:l.includes(e));return r?"top":!!o&&"bottom"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();if(!l)return -1;let r=null==(n="top"===l?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(i=null==r?void 0:r.indexOf(e.id))?i:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,i;return e.setRowPinning(t?ng():null!=(n=null==(i=e.initialState)?void 0:i.rowPinning)?n:ng())},e.getIsSomeRowsPinned=t=>{var n,i,l;let r=e.getState().rowPinning;return t?!!(null==(n=r[t])?void 0:n.length):!!((null==(i=r.top)?void 0:i.length)||(null==(l=r.bottom)?void 0:l.length))},e._getPinnedRows=(t,n,i)=>{var l;return(null==(l=e.options.keepPinnedRows)||l?(null!=n?n:[]).map(t=>{let n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:i}))},e.getTopRows=tZ(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),t0(e.options,"debugRows","getTopRows")),e.getBottomRows=tZ(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),t0(e.options,"debugRows","getBottomRows")),e.getCenterRows=tZ(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{let i=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!i.has(e.id))},t0(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:tJ("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let i={...n},l=e.getPreGroupedRowModel().flatRows;return t?l.forEach(e=>{e.getCanSelect()&&(i[e.id]=!0)}):l.forEach(e=>{delete i[e.id]}),i})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{let i=void 0!==t?t:!e.getIsAllPageRowsSelected(),l={...n};return e.getRowModel().rows.forEach(t=>{nf(l,t.id,i,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=tZ(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?nx(e,n):{rows:[],flatRows:[],rowsById:{}},t0(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=tZ(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?nx(e,n):{rows:[],flatRows:[],rowsById:{}},t0(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=tZ(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?nx(e,n):{rows:[],flatRows:[],rowsById:{}},t0(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState(),i=!!(t.length&&Object.keys(n).length);return i&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(i=!1),i},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState(),i=!!t.length;return i&&t.some(e=>!n[e.id])&&(i=!1),i},e.getIsSomeRowsSelected=()=>{var t;let n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,i)=>{let l=e.getIsSelected();t.setRowSelection(r=>{var o;if(n=void 0!==n?n:!l,e.getCanSelect()&&l===n)return r;let s={...r};return nf(s,e.id,n,null==(o=null==i?void 0:i.selectChildren)||o,t),s})},e.getIsSelected=()=>{let{rowSelection:n}=t.getState();return nb(e,n)},e.getIsSomeSelected=()=>{let{rowSelection:n}=t.getState();return"some"===ny(e,n)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=t.getState();return"all"===ny(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return n=>{var i;t&&e.toggleSelected(null==(i=n.target)?void 0:i.checked)}}}},{getDefaultColumnDef:()=>nd,getInitialState:e=>({columnSizing:{},columnSizingInfo:nc(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:tJ("columnSizing",e),onColumnSizingInfoChange:tJ("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,i,l;let r=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:nd.minSize,null!=(i=null!=r?r:e.columnDef.size)?i:nd.size),null!=(l=e.columnDef.maxSize)?l:nd.maxSize)},e.getStart=tZ(e=>[e,nm(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),t0(t.options,"debugColumns","getStart")),e.getAfter=tZ(e=>[e,nm(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),t0(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...i}=t;return i})},e.getCanResize=()=>{var n,i;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(i=t.options.enableColumnResizing)||i)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,n=e=>{if(e.subHeaders.length)e.subHeaders.forEach(n);else{var i;t+=null!=(i=e.column.getSize())?i:0}};return n(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{let i=t.getColumn(e.column.id),l=null==i?void 0:i.getCanResize();return r=>{if(!i||!l||(null==r.persist||r.persist(),np(r)&&r.touches&&r.touches.length>1))return;let o=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[i.id,i.getSize()]],a=np(r)?Math.round(r.touches[0].clientX):r.clientX,d={},c=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var i,l;let r="rtl"===t.options.columnResizeDirection?-1:1,o=(n-(null!=(i=null==e?void 0:e.startOffset)?i:0))*r,s=Math.max(o/(null!=(l=null==e?void 0:e.startSize)?l:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;d[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:o,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...d})))},u=e=>{c("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("undefined"!=typeof document?document:null),m={moveHandler:e=>c("move",e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",m.moveHandler),null==p||p.removeEventListener("mouseup",m.upHandler),u(e.clientX)}},h={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),c("move",e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",h.moveHandler),null==p||p.removeEventListener("touchend",h.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof nu)return nu;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return nu=e}()&&{passive:!1};np(r)?(null==p||p.addEventListener("touchmove",h.moveHandler,g),null==p||p.addEventListener("touchend",h.upHandler,g)):(null==p||p.addEventListener("mousemove",m.moveHandler,g),null==p||p.addEventListener("mouseup",m.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:a,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:i.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?nc():null!=(n=e.initialState.columnSizingInfo)?n:nc())},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function nI(e,t){var n,i,l;let r;return e?"function"==typeof(i=n=e)&&(r=Object.getPrototypeOf(i)).prototype&&r.prototype.isReactComponent||"function"==typeof n||"object"==typeof(l=n)&&"symbol"==typeof l.$$typeof&&["react.memo","react.forward_ref"].includes(l.$$typeof.description)?a.createElement(e,t):e:null}let nT="diffView",nR="previousDocument",nP="nextDocument";function nE(){let e,t,n,i=(0,s.c)(9),{navigate:l,state:r}=(0,eE.useRouter)();i[0]!==l||i[1]!==r?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,o={...(0,ek.fromPairs)(r._searchParams),...t?{[nT]:t}:{},...n?{[nR]:[n.type,n.id].join(",")}:{},...i?{[nP]:[i.type,i.id].join(",")}:{}};l({...r,_searchParams:(0,eD.toPairs)(o)})},i[0]=l,i[1]=r,i[2]=e):e=i[2];let o=e;i[3]!==l||i[4]!==r?(t=()=>{l({...r,_searchParams:(r._searchParams??[]).filter(nk)})},i[3]=l,i[4]=r,i[5]=t):t=i[5];let a=t;return i[6]!==a||i[7]!==o?(n={navigateDiffView:o,exitDiffView:a},i[6]=a,i[7]=o,i[8]=n):n=i[8],n}function nk(e){let[t]=e;return![nT,nR,nP].includes(t)}let nD=["version"];function nF(e){let t,n,i,l,r,o,d,c,u=(0,s.c)(22);u[0]!==e?(t=void 0===e?{}:e,u[0]=e,u[1]=t):t=u[1];let{onParamsError:p}=t,{state:m}=(0,eE.useRouter)();if(u[2]!==m._searchParams){let e=new URLSearchParams(m._searchParams);i=e.get(nR),n=e.get(nP),l=e.get(nT),u[2]=m._searchParams,u[3]=n,u[4]=i,u[5]=l}else n=u[3],i=u[4],l=u[5];let h=l,g=[i,n,h].some(nA),f=i??"",x=n??"",b=h??"";u[6]!==f||u[7]!==x||u[8]!==b?(r=function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[l,r]=e.split(",").filter(Boolean),[o,s]=t.split(",").filter(Boolean);return nD.includes(n)||i.push(["invalidModeParam",n]),(typeof l>"u"||typeof r>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof o>"u"||typeof s>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:l,id:r},next:{type:o,id:s}}}}}({previousDocument:f,nextDocument:x,mode:b}),u[6]=f,u[7]=x,u[8]=b,u[9]=r):r=u[9];let y=r;if(u[10]!==g||u[11]!==p||u[12]!==y.errors||u[13]!==y.result?(o=()=>{"error"===y.result&&g&&p?.(y.errors)},u[10]=g,u[11]=p,u[12]=y.errors,u[13]=y.result,u[14]=o):o=u[14],u[15]!==g||u[16]!==p||u[17]!==y?(d=[g,p,y],u[15]=g,u[16]=p,u[17]=y,u[18]=d):d=u[18],(0,a.useEffect)(o,d),"error"===y.result){let e;return u[19]===Symbol.for("react.memo_cache_sentinel")?(e={isActive:!1},u[19]=e):e=u[19],e}return u[20]!==y.params?(c={state:"ready",isActive:!0,...y.params},u[20]=y.params,u[21]=c):c=u[21],c}function nA(e){return null!==e}function nV(e){return null!==e}function nM(e,t){return(0,c.isPublishedId)(e)?"published":(0,c.isDraftId)(e)?"draft":t.find(({_id:t})=>(0,d.getReleaseIdFromReleaseDocumentId)(t)===(0,c.getVersionFromId)(e))??(0,c.getVersionFromId)(e)}let nL=e_.styled.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,nz=e_.styled.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,nO=e=>{let t,n,i,l,r,a,c,u,p,h,g,f,x,b,y,v,j=(0,s.c)(48),{documentId:w,state:S}=e,{t:_}=(0,d.useTranslation)(C);j[0]!==w?(t={documentId:w},j[0]=w,j[1]=t):t=j[1];let{data:I}=(0,d.useDocumentVersions)(t),{exitDiffView:T,navigateDiffView:R}=nE(),{documents:P}=nF(),E=(0,d.useActiveReleases)();j[2]!==I?(n=I.flatMap(n$),j[2]=I,j[3]=n):n=j[3];let k=n;if(j[4]!==E.data||j[5]!==k){let e;j[7]!==k?(e=e=>{let t=(0,d.getReleaseIdFromReleaseDocumentId)(e._id);return"u">typeof t&&k.includes(t)},j[7]=k,j[8]=e):e=j[8],i=E.data.filter(e),j[4]=E.data,j[5]=k,j[6]=i}else i=j[6];let D=i;j[9]!==E?(l=function({loading:e,error:t}){return e?"pending":"u">typeof t?"error":"ready"}(E),j[9]=E,j[10]=l):l=j[10];let F=l;j[11]!==P||j[12]!==R?(r=e=>{"u">typeof P?.previous&&R({previousDocument:{...P.previous,id:e}})},j[11]=P,j[12]=R,j[13]=r):r=j[13];let A=r;j[14]!==P||j[15]!==R?(a=e=>{"u">typeof P?.next&&R({nextDocument:{...P.next,id:e}})},j[14]=P,j[15]=R,j[16]=a):a=j[16];let V=a;return j[17]!==_?(c=_("compare-versions.title"),j[17]=_,j[18]=c):c=j[18],j[19]!==c?(u=(0,o.jsx)(ej.Box,{padding:4,children:(0,o.jsx)(ej.Text,{as:"h1",size:1,muted:!0,children:c})}),j[19]=c,j[20]=u):u=j[20],j[21]!==w||j[22]!==P||j[23]!==A||j[24]!==D||j[25]!==F||j[26]!==S?(p="u">typeof P?.previous&&(0,o.jsx)(nB,{releases:D,releasesState:F,onSelectRelease:A,role:"previous",documentId:w,state:S,document:P.previous}),j[21]=w,j[22]=P,j[23]=A,j[24]=D,j[25]=F,j[26]=S,j[27]=p):p=j[27],j[28]!==u||j[29]!==p?(h=(0,o.jsxs)(nz,{children:[u,p]}),j[28]=u,j[29]=p,j[30]=h):h=j[30],j[31]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)(ej.Flex,{align:"center",paddingX:3,children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(m.TransferIcon,{})})}),j[31]=g):g=j[31],j[32]!==w||j[33]!==P||j[34]!==V||j[35]!==D||j[36]!==F||j[37]!==S?(f="u">typeof P?.next&&(0,o.jsx)(nB,{releases:D,releasesState:F,onSelectRelease:V,role:"next",documentId:w,state:S,document:P.next}),j[32]=w,j[33]=P,j[34]=V,j[35]=D,j[36]=F,j[37]=S,j[38]=f):f=j[38],j[39]===Symbol.for("react.memo_cache_sentinel")?(x={justifySelf:"end"},j[39]=x):x=j[39],j[40]!==T?(b=(0,o.jsx)(ej.Box,{padding:3,style:x,children:(0,o.jsx)(ej.Button,{icon:m.CloseIcon,mode:"bleed",onClick:T,padding:2})}),j[40]=T,j[41]=b):b=j[41],j[42]!==f||j[43]!==b?(y=(0,o.jsxs)(nz,{children:[f,b]}),j[42]=f,j[43]=b,j[44]=y):y=j[44],j[45]!==h||j[46]!==y?(v=(0,o.jsxs)(nL,{children:[h,g,y]}),j[45]=h,j[46]=y,j[47]=v):v=j[47],v},nB=e=>{let t,n,i,l,r,a,u,p,h,g,f=(0,s.c)(46),{releases:x,releasesState:b,onSelectRelease:y,role:v,documentId:j,document:w}=e;f[0]!==x?(t=void 0===x?[]:x,f[0]=x,f[1]=t):t=f[1];let S=t;f[2]!==w.id?(n=(0,c.getPublishedId)(w.id),f[2]=w.id,f[3]=n):n=f[3];let{published:_,draft:I}=(0,d.useEditState)(n,w.type);f[4]!==w.id||f[5]!==S?(i=nM(w.id,S),f[4]=w.id,f[5]=S,f[6]=i):i=f[6];let T=i,{t:R}=(0,d.useTranslation)(C),{t:P}=(0,d.useTranslation)(),{document:E}=(0,d.useWorkspace)(),{drafts:k}=E,{enabled:D}=k;if("error"===b){let e,t;return f[7]!==R?(e=R("compare-version.error.loadReleases.title"),f[7]=R,f[8]=e):e=f[8],f[9]!==e?(t=(0,o.jsx)(ej.Badge,{tone:"critical",radius:3,children:e}),f[9]=e,f[10]=t):t=f[10],t}if(f[11]!==b||f[12]!==T||f[13]!==P||f[14]!==R?(l=function({selected:e,tCore:t,tStructure:n,releasesState:i}){if("pending"===i)return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,d.isReleaseDocument)(e)){let n=e?(0,d.getReleaseTone)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,o.jsx)(d.ReleaseAvatar,{padding:1,tone:n}),iconRight:e&&(0,d.isReleaseScheduledOrScheduling)(e)?(0,o.jsx)(m.LockIcon,{}):void 0,tone:n}}if((0,d.isSystemBundleName)(e)){let t="published"===e?"positive":"caution";return{text:n(["compare-versions.status",e].join(".")),icon:(0,o.jsx)(d.ReleaseAvatar,{padding:1,tone:t}),tone:t}}return{text:e,icon:(0,o.jsx)(d.ReleaseAvatar,{padding:1,tone:"neutral"}),tone:"neutral"}}({selected:T,tCore:P,tStructure:R,releasesState:b}),f[11]=b,f[12]=T,f[13]=P,f[14]=R,f[15]=l):l=f[15],f[16]!==l?(r=(0,o.jsx)(ej.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...l}),f[16]=l,f[17]=r):r=f[17],f[18]!==j||f[19]!==y||f[20]!==_||f[21]!==T?(a=_&&(0,o.jsx)(nH,{type:"published",onSelect:y,isSelected:"published"===T,documentId:j}),f[18]=j,f[19]=y,f[20]=_,f[21]=T,f[22]=a):a=f[22],f[23]!==j||f[24]!==I||f[25]!==D||f[26]!==y||f[27]!==T?(u=D&&I&&(0,o.jsx)(nH,{type:"draft",onSelect:y,isSelected:"draft"===T,documentId:j}),f[23]=j,f[24]=I,f[25]=D,f[26]=y,f[27]=T,f[28]=u):u=f[28],f[29]!==j||f[30]!==y||f[31]!==S||f[32]!==T){let e;f[34]!==j||f[35]!==y||f[36]!==T?(e=e=>(0,o.jsx)(nH,{release:e,onSelect:y,isSelected:"string"!=typeof T&&T?._id===e._id,documentId:j},e._id),f[34]=j,f[35]=y,f[36]=T,f[37]=e):e=f[37],p=S.map(e),f[29]=j,f[30]=y,f[31]=S,f[32]=T,f[33]=p}else p=f[33];return f[38]!==u||f[39]!==p||f[40]!==a?(h=(0,o.jsxs)(ej.Menu,{children:[a,u,p]}),f[38]=u,f[39]=p,f[40]=a,f[41]=h):h=f[41],f[42]!==v||f[43]!==h||f[44]!==r?(g=(0,o.jsx)(ev.MenuButton,{id:v,button:r,menu:h}),f[42]=v,f[43]=h,f[44]=r,f[45]=g):g=f[45],g},nH=e=>{let t,n,i,l,r,a,u,p,h,g,f,x,b=(0,s.c)(51),{type:y,release:v,onSelect:j,isSelected:w,documentId:S}=e,{t:_}=(0,d.useTranslation)(),{t:I}=(0,d.useTranslation)(C);b[0]!==S||b[1]!==j||b[2]!==v||b[3]!==y?(t=()=>{"draft"===y?j((0,c.getDraftId)(S)):"published"===y?j((0,c.getPublishedId)(S)):"u">typeof v?._id&&j((0,c.getVersionId)(S,(0,d.getReleaseIdFromReleaseDocumentId)(v._id)))},b[0]=S,b[1]=j,b[2]=v,b[3]=y,b[4]=t):t=b[4];let T=t;if(y){let e,t,n,i,l,r,s="published"===y?"positive":"caution";b[5]!==s?(e=(0,o.jsx)(d.ReleaseAvatar,{padding:2,tone:s}),b[5]=s,b[6]=e):e=b[6],b[7]!==y?(t=["compare-versions.status",y],b[7]=y,b[8]=t):t=b[8];let a=t.join(".");return b[9]!==a||b[10]!==I?(n=I(a),b[9]=a,b[10]=I,b[11]=n):n=b[11],b[12]!==n?(i=(0,o.jsx)(ej.Box,{paddingY:2,children:(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:n})}),b[12]=n,b[13]=i):i=b[13],b[14]!==e||b[15]!==i?(l=(0,o.jsxs)(ej.Flex,{gap:1,children:[e,i]}),b[14]=e,b[15]=i,b[16]=l):l=b[16],b[17]!==w||b[18]!==T||b[19]!==l?(r=(0,o.jsx)(ej.MenuItem,{padding:1,paddingRight:3,onClick:T,pressed:w,children:l}),b[17]=w,b[18]=T,b[19]=l,b[20]=r):r=b[20],r}b[21]!==v?(n=v?(0,d.getReleaseTone)(v):"neutral",b[21]=v,b[22]=n):n=b[22];let R=n;return b[23]!==R?(i=(0,o.jsx)(d.ReleaseAvatar,{padding:2,tone:R}),b[23]=R,b[24]=i):i=b[24],b[25]!==v.metadata.title||b[26]!==_?(l=v.metadata.title||_("release.placeholder-untitled-release"),b[25]=v.metadata.title,b[26]=_,b[27]=l):l=b[27],b[28]!==l?(r=(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:l}),b[28]=l,b[29]=r):r=b[29],b[30]!==v.metadata.releaseType||b[31]!==_?(a=["asap","undecided"].includes(v.metadata.releaseType)&&(0,o.jsx)(ej.Text,{muted:!0,size:1,children:_(`release.type.${v.metadata.releaseType}`)}),b[30]=v.metadata.releaseType,b[31]=_,b[32]=a):a=b[32],b[33]!==v?(u="scheduled"===v.metadata.releaseType&&(0,o.jsx)(ej.Text,{muted:!0,size:1,children:(0,d.formatRelativeLocalePublishDate)(v)}),b[33]=v,b[34]=u):u=b[34],b[35]!==r||b[36]!==a||b[37]!==u?(p=(0,o.jsxs)(ej.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,children:[r,a,u]}),b[35]=r,b[36]=a,b[37]=u,b[38]=p):p=b[38],b[39]!==v?(h=(0,d.isReleaseScheduledOrScheduling)(v)&&(0,o.jsx)(ej.Box,{padding:2,children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(m.LockIcon,{})})}),b[39]=v,b[40]=h):h=b[40],b[41]!==h?(g=(0,o.jsx)(ej.Flex,{flex:"none",children:h}),b[41]=h,b[42]=g):g=b[42],b[43]!==g||b[44]!==i||b[45]!==p?(f=(0,o.jsxs)(ej.Flex,{gap:1,children:[i,p,g]}),b[43]=g,b[44]=i,b[45]=p,b[46]=f):f=b[46],b[47]!==w||b[48]!==T||b[49]!==f?(x=(0,o.jsx)(ej.MenuItem,{padding:1,paddingRight:3,onClick:T,pressed:w,children:f}),b[47]=w,b[48]=T,b[49]=f,b[50]=x):x=b[50],x};function n$(e){return(0,c.getVersionFromId)(e)??[]}let nN=e_.styled.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function nG(e){return e.document?.components?.unstable_layout}function nU(e){return e.path}function nq(e,t){return(0,ty.default)(e.path,t.path)}let nW=e_.styled.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,nK=(0,e_.styled)(ej.Card)`
  position: relative;
  grid-area: var(--grid-area);
`,nY=(0,e_.styled)(ej.Container)`
  width: auto;
`,nX=(0,a.forwardRef)(function(e,t){let n,i,l,r,c,p,m,h,g,f,x,b,y=(0,s.c)(36),{role:v,documentType:j,documentId:w,scrollElement:S,syncChannel:C,compareDocument:_}=e,I=(0,a.useRef)(null),[T,R]=(0,a.useState)(null),[P,E]=(0,a.useState)(null);y[0]!==_||y[1]!==w||y[2]!==j||y[3]!==v||y[4]!==S||y[5]!==C?(n=()=>(0,o.jsx)(nJ,{compareDocument:_,documentId:w,documentType:j,role:v,scrollElement:S,syncChannel:C}),y[0]=_,y[1]=w,y[2]=j,y[3]=v,y[4]=S,y[5]=C,y[6]=n):n=y[6];let k=n;y[7]!==k?(i={pick:nG,defaultComponent:k},y[7]=k,y[8]=i):i=y[8];let D=(0,d.useMiddlewareComponents)(i);y[9]===Symbol.for("react.memo_cache_sentinel")?(l={isInteractive:!1,onOpenReviewChanges:eF.noop,onSetFocus:eF.noop,isReviewChangesOpen:!1},y[9]=l):l=y[9];let F=`${v}-document`;y[10]!==F?(r={"--grid-area":F},y[10]=F,y[11]=r):r=y[11];let A=r,V="next"===v,M="next"!==v&&"none";y[12]!==M?(c={"--scrollbar-width":M},y[12]=M,y[13]=c):c=y[13];let L=c;return y[14]!==D||y[15]!==w||y[16]!==j?(p=(0,o.jsx)(ew.DialogProvider,{position:"absolute",children:(0,o.jsx)(nY,{ref:I,padding:4,width:1,children:(0,o.jsx)(D,{documentId:w,documentType:j})})}),y[14]=D,y[15]=w,y[16]=j,y[17]=p):p=y[17],y[18]!==T||y[19]!==p?(m=(0,o.jsx)(ej.PortalProvider,{element:T,children:p}),y[18]=T,y[19]=p,y[20]=m):m=y[20],y[21]!==t||y[22]!==L||y[23]!==m?(h=(0,o.jsx)(nW,{ref:t,style:L,children:m}),y[21]=t,y[22]=L,y[23]=m,y[24]=h):h=y[24],y[25]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:R}),y[25]=g):g=y[25],y[26]!==h||y[27]!==A||y[28]!==V?(f=(0,o.jsxs)(nK,{ref:E,style:A,borderLeft:V,children:[h,g]}),y[26]=h,y[27]=A,y[28]=V,y[29]=f):f=y[29],y[30]!==P||y[31]!==f?(x=(0,o.jsx)(ej.BoundaryElementProvider,{element:P,children:f}),y[30]=P,y[31]=f,y[32]=x):x=y[32],y[33]!==S||y[34]!==x?(b=(0,o.jsx)(u.ReviewChangesContext.Provider,{value:l,children:(0,o.jsx)(d.ChangeIndicatorsTracker,{children:(0,o.jsx)(d.VirtualizerScrollInstanceProvider,{scrollElement:S,containerElement:I,children:x})})}),y[33]=S,y[34]=x,y[35]=b):b=y[35],b}),nJ=e=>{var t,n;let i,l,r,p,m,h,g,f,x,b,y,v=(0,s.c)(52),{role:j,documentType:w,documentId:S,syncChannel:C,compareDocument:_}=e;v[0]!==_?(i={compareDocument:_},v[0]=_,v[1]=i):i=v[1];let I=function(e){let t,n,i,l=(0,s.c)(4),{compareDocument:r}=e;l[0]!==r.id?(t=(0,c.getPublishedId)(r.id),l[0]=r.id,l[1]=t):t=l[1];let o=r.type;l[2]!==r.id?(n=(0,c.getVersionFromId)(r.id),l[2]=r.id,l[3]=n):n=l[3];let a=(0,d.useEditState)(t,o,"low",n);e:{if((0,c.isVersionId)(r.id)){i=a.version??void 0;break e}if((0,c.isDraftId)(r.id)){i=a.draft??void 0;break e}if((0,c.isPublishedId)(r.id)){i=a.published??void 0;break e}i=void 0}return i}(i),{data:T}=(0,d.useActiveReleases)(),[R]=(0,a.useState)(nQ);v[2]!==S||v[3]!==T?(l=nM(S,T),v[2]=S,v[3]=T,v[4]=l):l=v[4];let P=l;v[5]!==S?(r=(0,c.getPublishedId)(S),v[5]=S,v[6]=r):r=v[6],v[7]!==S?(t=S,p=(0,c.isVersionId)(t)?(0,c.getVersionFromId)(t):(0,c.isPublishedId)(t)?"published":void 0,v[7]=S,v[8]=p):p=v[8],v[9]!==S?(m=(0,c.getVersionFromId)(S),v[9]=S,v[10]=m):m=v[10],v[11]!==I||v[12]!==w||v[13]!==r||v[14]!==p||v[15]!==m?(h={documentId:r,documentType:w,selectedPerspectiveName:p,releaseId:m,comparisonValue:I,displayInlineChanges:!0},v[11]=I,v[12]=w,v[13]=r,v[14]=p,v[15]=m,v[16]=h):h=v[16];let{formState:E,onChange:k,onFocus:D,onBlur:F,onSetActiveFieldGroup:A,onSetCollapsedFieldSet:V,onSetCollapsedPath:M,collapsedFieldSets:L,ready:z,collapsedPaths:O,schemaType:B,value:H,onProgrammaticFocus:$,openPath:N,onPathOpen:G}=(0,d.useDocumentForm)(h),U=null===E||!z;v[17]!==j||v[18]!==C?(g={id:j,syncChannel:C},v[17]=j,v[18]=C,v[19]=g):g=v[19];let q=function(e){let t,n,i,l=(0,s.c)(11),{syncChannel:r,id:o}=e;l[0]!==o||l[1]!==r?(t=e=>r.next({...e,source:o}),l[0]=o,l[1]=r,l[2]=t):t=l[2];let a=t;if(l[3]!==o||l[4]!==r){let e;l[6]!==o?(e=e=>{let{source:t}=e;return t!==o},l[6]=o,l[7]=e):e=l[7],n=r.pipe((0,eq.distinctUntilChanged)(nq),(0,eJ.filter)(e),(0,eH.map)(nU)),l[3]=o,l[4]=r,l[5]=n}else n=l[5];let d=n;return l[8]!==d||l[9]!==a?(i={path:d,push:a},l[8]=d,l[9]=a,l[10]=i):i=l[10],i}(g);v[20]!==G||v[21]!==q||v[22]!==j?(f=e=>{G(e),q.push({source:j,path:e})},v[20]=G,v[21]=q,v[22]=j,v[23]=f):f=v[23];let W=f;return v[24]!==G||v[25]!==$||v[26]!==q.path?(x=()=>{let e=q.path.subscribe(e=>{G(e),$(e)});return()=>e.unsubscribe()},v[24]=G,v[25]=$,v[26]=q.path,v[27]=x):x=v[27],v[28]!==G||v[29]!==$||v[30]!==q.path||v[31]!==j?(b=[G,$,q.path,j],v[28]=G,v[29]=$,v[30]=q.path,v[31]=j,v[32]=b):b=v[32],(0,a.useEffect)(x,b),v[33]!==L||v[34]!==O||v[35]!==I||v[36]!==E||v[37]!==U||v[38]!==F||v[39]!==k||v[40]!==D||v[41]!==W||v[42]!==A||v[43]!==V||v[44]!==M||v[45]!==N||v[46]!==R||v[47]!==P||v[48]!==j||v[49]!==B||v[50]!==H?(y=U?(0,o.jsx)(d.LoadingBlock,{showText:!0}):(0,o.jsx)(u.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,o.jsx)(d.FormBuilder,{__internal_patchChannel:R,id:`diffView-pane-${j}`,onChange:k,onPathFocus:D,onPathOpen:W,onPathBlur:F,onFieldGroupSelect:A,onSetFieldSetCollapsed:V,onSetPathCollapsed:M,collapsedPaths:O,collapsedFieldSets:L,focusPath:E.focusPath,openPath:N,changed:E.changed,focused:E.focused,groups:E.groups,validation:E.validation,members:E.members,perspective:"draft"===(n=P)?"drafts":n,hasUpstreamVersion:E.hasUpstreamVersion,presence:E.presence,schemaType:B,value:H,compareValue:I})}),v[33]=L,v[34]=O,v[35]=I,v[36]=E,v[37]=U,v[38]=F,v[39]=k,v[40]=D,v[41]=W,v[42]=A,v[43]=V,v[44]=M,v[45]=N,v[46]=R,v[47]=P,v[48]=j,v[49]=B,v[50]=H,v[51]=y):y=v[51],y};function nQ(){return(0,d.createPatchChannel)()}let nZ=e_.styled.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,n0=e=>{let t,n,i=(0,s.c)(6),{children:l,documentId:r,documentType:a}=e;i[0]!==r||i[1]!==a?(t={intent:"edit",params:{id:r,type:a}},i[0]=r,i[1]=a,i[2]=t):t=i[2];let{href:d}=(0,eE.useIntentLink)(t);return i[3]!==l||i[4]!==d?(n=(0,o.jsx)(nZ,{href:d,target:"_blank",rel:"noopener noreferrer",children:l}),i[3]=l,i[4]=d,i[5]=n):n=i[5],n},n1=e=>{var t;let n,i,l,r,d,c,p,m,h,g,f,x,b=(0,s.c)(24),{documentId:y}=e,{documents:v,state:j,mode:w}=nF(),{exitDiffView:S}=nE(),C=((h=(0,s.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(m=new e2.Subject,h[0]=m):m=h[0],m),[_,I]=(0,a.useState)(null),[T,R]=(0,a.useState)(null),P=(0,a.useContext)(u.ReferenceInputOptionsContext);b[0]!==P?(n={...P,disableNew:!0,EditReferenceLinkComponent:n0},b[0]=P,b[1]=n):n=b[1];let E=n;return b[2]!==T||b[3]!==_?(i=[_,T],b[2]=T,b[3]=_,b[4]=i):i=b[4],t=i,(x=(0,s.c)(3))[0]!==t?(g=()=>{let e=t.filter(nV);if(0===e.length)return;let n=new tb(e);return()=>n.destroy()},f=[t],x[0]=t,x[1]=g,x[2]=f):(g=x[1],f=x[2]),(0,a.useEffect)(g,f),b[5]!==y||b[6]!==w||b[7]!==j?(l="version"===w&&(0,o.jsx)(nO,{documentId:y,state:j}),b[5]=y,b[6]=w,b[7]=j,b[8]=l):l=b[8],b[9]!==v||b[10]!==T||b[11]!==_||b[12]!==j||b[13]!==C?(r="ready"===j&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(nX,{documentType:v.previous.type,documentId:v.previous.id,role:"previous",ref:I,scrollElement:_,syncChannel:C,compareDocument:v.previous}),(0,o.jsx)(nX,{documentType:v.next.type,documentId:v.next.id,role:"next",ref:R,scrollElement:T,syncChannel:C,compareDocument:v.previous})]}),b[9]=v,b[10]=T,b[11]=_,b[12]=j,b[13]=C,b[14]=r):r=b[14],b[15]!==l||b[16]!==r?(d=(0,o.jsxs)(nN,{children:[l,r]}),b[15]=l,b[16]=r,b[17]=d):d=b[17],b[18]!==S||b[19]!==d?(c=(0,o.jsx)(ev.Dialog,{id:"diffView",width:"auto",onClose:S,padding:!1,__unstable_hideCloseButton:!0,children:d}),b[18]=S,b[19]=d,b[20]=c):c=b[20],b[21]!==E||b[22]!==c?(p=(0,o.jsx)(u.ReferenceInputOptionsContext.Provider,{value:E,children:c}),b[21]=E,b[22]=c,b[23]=p):p=b[23],p},n2=e=>{let t,n,i,l=(0,s.c)(9),{children:r,documentId:a}=e,c=(0,ew.useToast)(),{t:u}=(0,d.useTranslation)(C);l[0]!==u||l[1]!==c?(t={onParamsError:e=>{c.push({id:"diffViewParamsParsingError",status:"error",title:u("compare-version.error.invalidParams.title"),description:(0,o.jsx)("ul",{children:e.map(e=>{let[t,n]=e;return(0,o.jsx)("li",{children:u(`compare-version.error.${t}`,{input:n})},t)})})})}},l[0]=u,l[1]=c,l[2]=t):t=l[2];let{isActive:p}=nF(t);return l[3]!==a||l[4]!==p?(n=p&&(0,o.jsx)(n1,{documentId:a}),l[3]=a,l[4]=p,l[5]=n):n=l[5],l[6]!==r||l[7]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[r,n]}),l[6]=r,l[7]=n,l[8]=i):i=l[8],i};function n3(){let e=(0,a.useContext)(u.PaneLayoutContext);if(!e)throw Error("PaneLayout: missing context value");return e}let n4=(0,e_.styled)(ej.Layer)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function n5(e){let t,n,i=(0,s.c)(7),{disabled:l,element:r}=e,{resize:d}=n3(),[c,u]=(0,a.useState)(!1);i[0]!==r||i[1]!==d?(t=e=>{if(!r)return;u(!0),e.preventDefault();let t=e.pageX;d("start",r,0);let n=e=>{e.preventDefault(),d("move",r,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),d("end",r,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=r,i[1]=d,i[2]=t):t=i[2];let p=t,m=l?"":void 0,h=c?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,o.jsx)(n4,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let n6=(0,e_.styled)(ej.Card)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,n8=(0,a.forwardRef)(function(e,t){let n,i,l,r,c,p,m,h,g,f,x,b,y,v,j,w,S,C,_,I,T,R,P,E,k,D,F,A,V,M=(0,s.c)(86);M[0]!==e?({children:n,currentMinWidth:l,currentMaxWidth:i,flex:h,id:r,minWidth:p,maxWidth:c,selected:g,...m}=e,M[0]=e,M[1]=n,M[2]=i,M[3]=l,M[4]=r,M[5]=c,M[6]=p,M[7]=m,M[8]=h,M[9]=g):(n=M[1],i=M[2],l=M[3],r=M[4],c=M[5],p=M[6],m=M[7],h=M[8],g=M[9]);let L=void 0===h?1:h,z=void 0!==g&&g,[O,B]=(0,a.useState)(null),{collapse:H,collapsed:$,expand:N,expandedElement:G,mount:U,panes:q}=n3();if(M[10]!==q||M[11]!==O){let e;M[14]!==O?(e=e=>e.element===O,M[14]=O,M[15]=e):e=M[15],x=(f=q.find(e))&&q.indexOf(f),M[10]=q,M[11]=O,M[12]=f,M[13]=x}else f=M[12],x=M[13];let W=x,K="number"==typeof W?q[W+1]:void 0,Y=W===q.length-1,X=G===O,J=!$&&(f?.collapsed||!1),Q=K?.collapsed||!1,Z=(0,a.useRef)(null),ee=f?.flex??L,et=f?.currentMinWidth??l,en=f?.currentMaxWidth??i;M[16]===Symbol.for("react.memo_cache_sentinel")?(b=()=>Z.current,M[16]=b):b=M[16],(0,a.useImperativeHandle)(t,b),M[17]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{B(e),Z.current=e},M[17]=y):y=M[17];let ei=y;M[18]!==i||M[19]!==l||M[20]!==L||M[21]!==r||M[22]!==c||M[23]!==p||M[24]!==U||M[25]!==O?(v=()=>{if(O)return U(O,{currentMinWidth:l,currentMaxWidth:i,flex:L,id:r,minWidth:p,maxWidth:c})},j=[l,i,L,r,p,c,U,O],M[18]=i,M[19]=l,M[20]=L,M[21]=r,M[22]=c,M[23]=p,M[24]=U,M[25]=O,M[26]=v,M[27]=j):(v=M[26],j=M[27]),(0,a.useLayoutEffect)(v,j),M[28]!==H||M[29]!==O?(w=()=>{O&&H(O)},M[28]=H,M[29]=O,M[30]=w):w=M[30];let el=w;M[31]!==N||M[32]!==O?(S=()=>{O&&N(O)},M[31]=N,M[32]=O,M[33]=S):S=M[33];let er=S,eo=!$&&J;M[34]!==el||M[35]!==er||M[36]!==Y||M[37]!==W||M[38]!==O||M[39]!==eo?(C={collapse:el,collapsed:eo,expand:er,index:W,isLast:Y,rootElement:O},M[34]=el,M[35]=er,M[36]=Y,M[37]=W,M[38]=O,M[39]=eo,M[40]=C):C=M[40];let es=C;e:{if($){_=void 0;break e}if(J){_=51;break e}if(0===et||Y){_=p||204;break e}_=et||p||204}let ea=_;t:{if(J){I=51;break t}if($&&Y){I=void 0;break t}if(Y){if(c){I=en??c;break t}I=void 0;break t}I=en??c}let ed=I,ec=$&&!Y;M[41]!==J||M[42]!==Y||M[43]!==$||M[44]!==Q||M[45]!==O?(T=!Y&&!$&&(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,o.jsx)(n5,{disabled:J||Q,element:O})}),M[41]=J,M[42]=Y,M[43]=$,M[44]=Q,M[45]=O,M[46]=T):T=M[46];let eu=T,ep=ed===1/0?void 0:ed;M[47]!==ee||M[48]!==ea||M[49]!==ep?(R={flex:ee,minWidth:ea,maxWidth:ep},M[47]=ee,M[48]=ea,M[49]=ep,M[50]=R):R=M[50];let em=R,eh=$?void 0:"hidden",eg=J?"":void 0,ef=z?"":void 0;return M[51]!==J||M[52]!==en||M[53]!==et||M[54]!==X||M[55]!==ee||M[56]!==ed||M[57]!==ea||M[58]!==W?(P=!1,M[51]=J,M[52]=en,M[53]=et,M[54]=X,M[55]=ee,M[56]=ed,M[57]=ea,M[58]=W,M[59]=P):P=M[59],M[60]!==n||M[61]!==ec?(E=!ec&&(0,o.jsx)(ej.Flex,{direction:"column",height:"fill",children:n}),M[60]=n,M[61]=ec,M[62]=E):E=M[62],M[63]!==O||M[64]!==E?(k=(0,o.jsx)(ej.BoundaryElementProvider,{element:O,children:E}),M[63]=O,M[64]=E,M[65]=k):k=M[65],M[66]!==ec||M[67]!==r||M[68]!==W||M[69]!==m||M[70]!==em||M[71]!==eh||M[72]!==eg||M[73]!==ef||M[74]!==P||M[75]!==k?(D=(0,o.jsxs)(n6,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:ec,id:r,overflow:eh,...m,"data-pane-collapsed":eg,"data-pane-index":W,"data-pane-selected":ef,ref:ei,style:em,children:[P,k]}),M[66]=ec,M[67]=r,M[68]=W,M[69]=m,M[70]=em,M[71]=eh,M[72]=eg,M[73]=ef,M[74]=P,M[75]=k,M[76]=D):D=M[76],M[77]!==Y||M[78]!==D?(F=(0,o.jsx)(d.IsLastPaneProvider,{isLastPane:Y,children:D}),M[77]=Y,M[78]=D,M[79]=F):F=M[79],M[80]!==es||M[81]!==F?(A=(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"pane",children:(0,o.jsx)(u.PaneContext.Provider,{value:es,children:F})}),M[80]=es,M[81]=F,M[82]=A):A=M[82],M[83]!==eu||M[84]!==A?(V=(0,o.jsxs)(o.Fragment,{children:[A,eu]}),M[83]=eu,M[84]=A,M[85]=V):V=M[85],V}),n7=(0,e_.styled)(ej.Card)`
  position: relative;
  outline: none;
`;function n9(){let e=(0,a.useContext)(u.PaneContext);if(!e)throw Error("Pane: missing context value");return e}n7.displayName="PaneContent__root";let ie=(0,a.forwardRef)(function(e,t){let n,i,l,r,a,d,c=(0,s.c)(14);c[0]!==e?({as:n,children:i,overflow:l,padding:r,...a}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=l,c[4]=r,c[5]=a):(n=c[1],i=c[2],l=c[3],r=c[4],a=c[5]);let{collapsed:u}=n9(),{collapsed:p}=n3(),m=p?void 0:l;return c[6]!==n||c[7]!==i||c[8]!==u||c[9]!==r||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,o.jsx)(n7,{"data-testid":"pane-content",forwardedAs:n,...a,flex:1,hidden:u,overflow:m,padding:r,ref:t,tone:"inherit",children:i}),c[6]=n,c[7]=i,c[8]=u,c[9]=r,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function it(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let ii={constrainSize:!0,placement:"left-start",portal:!0};function il(e){let t,n,i,l,r=(0,s.c)(35),{disabled:a,isAfterGroup:c,node:u}=e,p=(0,d.useGetI18nText)("i18n"in u?u:void 0);if("divider"===u.type){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ej.MenuDivider,{}),r[0]=e):e=r[0],e}r[1]!==p||r[2]!==u?(t=p(u),r[1]=p,r[2]=u,r[3]=t):t=r[3];let{title:m}=t;if("group"===u.type){let e,t,n,i;if(0===u.children.length)return null;if(u.expanded){let e,t,n;return r[4]!==c?(e=c&&(0,o.jsx)(ej.MenuDivider,{}),r[4]=c,r[5]=e):e=r[5],r[6]!==a||r[7]!==u.children||r[8]!==u.disabled?(t=u.children.map((e,t)=>(0,o.jsx)(il,{disabled:a||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),r[6]=a,r[7]=u.children,r[8]=u.disabled,r[9]=t):t=r[9],r[10]!==e||r[11]!==t?(n=(0,o.jsxs)(o.Fragment,{children:[e,t]}),r[10]=e,r[11]=t,r[12]=n):n=r[12],n}r[13]!==c?(e=c&&(0,o.jsx)(ej.MenuDivider,{}),r[13]=c,r[14]=e):e=r[14];let l=u.icon;return r[15]!==a||r[16]!==u.children||r[17]!==u.disabled?(t=u.children.map((e,t)=>(0,o.jsx)(il,{disabled:a||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),r[15]=a,r[16]=u.children,r[17]=u.disabled,r[18]=t):t=r[18],r[19]!==a||r[20]!==u.icon||r[21]!==t||r[22]!==m?(n=(0,o.jsx)(tc.MenuGroup,{disabled:a,icon:l,popover:ii,text:m,children:t}),r[19]=a,r[20]=u.icon,r[21]=t,r[22]=m,r[23]=n):n=r[23],r[24]!==e||r[25]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[e,n]}),r[24]=e,r[25]=n,r[26]=i):i=r[26],i}return r[27]!==c?(n=c&&(0,o.jsx)(ej.MenuDivider,{}),r[27]=c,r[28]=n):n=r[28],r[29]!==a||r[30]!==u?(i=(0,o.jsx)(ir,{disabled:a,node:u}),r[29]=a,r[30]=u,r[31]=i):i=r[31],r[32]!==n||r[33]!==i?(l=(0,o.jsxs)(o.Fragment,{children:[n,i]}),r[32]=n,r[33]=i,r[34]=l):l=r[34],l}function ir(e){let t,n=(0,s.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,o.jsx)(is,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,o.jsx)(io,{...e}),n[3]=e,n[4]=t):t=n[4],t}function io(e){let t,n,i,l,r,a=(0,s.c)(19),{disabled:c,node:u}=e;a[0]!==u.disabled?(t="object"==typeof u.disabled&&(0,o.jsx)(ej.Text,{size:1,children:u.disabled.reason}),a[0]=u.disabled,a[1]=t):t=a[1];let p=t,{title:h}=(0,d.useI18nText)(u),g=c||!!u.disabled;a[2]!==u.hotkey?(n=u.hotkey?.split("+"),a[2]=u.hotkey,a[3]=n):n=a[3];let f=u.icon,x=u.iconRight||u.selected&&m.CheckmarkIcon,b=u.onAction,y=u.selected,v=u.tone;a[4]!==u.title?(i=it(u.title),a[4]=u.title,a[5]=i):i=a[5];let j=`action-${i}`;return a[6]!==u.icon||a[7]!==u.onAction||a[8]!==u.selected||a[9]!==u.tone||a[10]!==g||a[11]!==n||a[12]!==x||a[13]!==j||a[14]!==h?(l=(0,o.jsx)(ev.MenuItem,{disabled:g,hotkeys:n,icon:f,iconRight:x,onClick:b,pressed:y,text:h,tone:v,"data-testid":j}),a[6]=u.icon,a[7]=u.onAction,a[8]=u.selected,a[9]=u.tone,a[10]=g,a[11]=n,a[12]=x,a[13]=j,a[14]=h,a[15]=l):l=a[15],a[16]!==l||a[17]!==p?(r=(0,o.jsx)(d.TooltipOfDisabled,{content:p,placement:"left",children:l}),a[16]=l,a[17]=p,a[18]=r):r=a[18],r}function is(e){let t,n,i,l,r,a,c=(0,s.c)(23),{disabled:u,intent:p,node:h}=e;c[0]!==h.disabled?(t="object"==typeof h.disabled&&(0,o.jsx)(ej.Text,{size:1,children:h.disabled.reason}),c[0]=h.disabled,c[1]=t):t=c[1];let g=t;c[2]!==p.params||c[3]!==p.type?(n={intent:p.type,params:p.params},c[2]=p.params,c[3]=p.type,c[4]=n):n=c[4];let f=(0,eE.useIntentLink)(n);c[5]!==f||c[6]!==h?(i=e=>{f.onClick(e),h.onAction()},c[5]=f,c[6]=h,c[7]=i):i=c[7];let x=i,{title:b}=(0,d.useI18nText)(h),y=u||!!h.disabled;c[8]!==h.hotkey?(l=h.hotkey?.split("+"),c[8]=h.hotkey,c[9]=l):l=c[9];let v=h.selected?m.CheckmarkIcon:void 0;return c[10]!==x||c[11]!==f.href||c[12]!==h.icon||c[13]!==h.selected||c[14]!==h.tone||c[15]!==y||c[16]!==l||c[17]!==v||c[18]!==b?(r=(0,o.jsx)(ev.MenuItem,{as:"a",disabled:y,hotkeys:l,href:f.href,icon:h.icon,iconRight:v,onClick:x,pressed:h.selected,text:b,tone:h.tone}),c[10]=x,c[11]=f.href,c[12]=h.icon,c[13]=h.selected,c[14]=h.tone,c[15]=y,c[16]=l,c[17]=v,c[18]=b,c[19]=r):r=c[19],c[20]!==r||c[21]!==g?(a=(0,o.jsx)(d.TooltipOfDisabled,{content:g,placement:"left",children:r}),c[20]=r,c[21]=g,c[22]=a):a=c[22],a}let ia={constrainSize:!0,placement:"bottom",portal:!0};function id(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&id(e.children,t))}function ic(e){let t,n,i,l,r,c=(0,s.c)(13),{nodes:u,actionsNodes:p}=e,m=(0,a.useId)(),h=id(u,"critical"),g=id(u,"caution"),f=h?"critical":g?"caution":void 0;return c[0]!==f?(t=(0,o.jsx)(d.ContextMenuButton,{tone:f,"data-testid":"pane-context-menu-button"}),c[0]=f,c[1]=t):t=c[1],c[2]!==p?(n=p&&(0,o.jsxs)(o.Fragment,{children:[p,(0,o.jsx)(ej.MenuDivider,{})]}),c[2]=p,c[3]=n):n=c[3],c[4]!==u?(i=u.map((e,t)=>{let n=u[t-1]?.type==="group";return(0,o.jsx)(il,{isAfterGroup:n,node:e},e.key)}),c[4]=u,c[5]=i):i=c[5],c[6]!==n||c[7]!==i?(l=(0,o.jsxs)(ej.Menu,{children:[n,i]}),c[6]=n,c[7]=i,c[8]=l):l=c[8],c[9]!==m||c[10]!==t||c[11]!==l?(r=(0,o.jsx)(ev.MenuButton,{button:t,id:m,menu:l,popover:ia}),c[9]=m,c[10]=t,c[11]=l,c[12]=r):r=c[12],r}let iu=(0,e_.styled)(ej.Layer)`
  position: sticky;
  bottom: 0;
`,ip=(0,e_.styled)(ej.Card)`
  padding-bottom: env(safe-area-inset-bottom);
`,im=(0,a.forwardRef)(function(e,t){let n,i,l=(0,s.c)(7),{children:r,padding:a}=e,{collapsed:c}=n9();return l[0]!==r||l[1]!==a?(n=(0,o.jsx)(ip,{tone:"inherit",children:(0,o.jsx)(ej.Box,{padding:a,children:r})}),l[0]=r,l[1]=a,l[2]=n):n=l[2],l[3]!==c||l[4]!==t||l[5]!==n?(i=(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,o.jsx)(iu,{"data-testid":"pane-footer",hidden:c,ref:t,children:n})}),l[3]=c,l[4]=t,l[5]=n,l[6]=i):i=l[6],i}),ih=(0,e_.styled)(ej.Layer)(({$border:e})=>e_.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),ig=(0,e_.styled)(ej.Flex)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,ix=(0,e_.styled)(ej.Card)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return e_.css`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),ib=(0,e_.styled)(ew.TextSkeleton)`
  width: 66%;
  max-width: 175px;
`,iy=(0,e_.styled)(ej.Text)`
  cursor: default;
  outline: none;
`,iv=(0,a.forwardRef)(function(e,t){let n,i,l,r,a,c,u,p,m,h,g,f,x,b=(0,s.c)(48),{actions:y,backButton:v,border:j,contentAfter:w,loading:S,subActions:C,tabs:_,tabIndex:I,title:T,appendTitle:R}=e,{collapse:P,collapsed:E,expand:k,rootElement:D}=n9(),F=(0,ew.useElementRect)(D||null),A=E?F?.height||window.innerHeight:void 0;b[0]!==A?(n={width:A},b[0]=A,b[1]=n):n=b[1];let V=n;b[2]!==P||b[3]!==E?(i=()=>{E||P()},b[2]=P,b[3]=E,b[4]=i):i=b[4];let M=i;b[5]!==E||b[6]!==k?(l=()=>{E&&k()},b[5]=E,b[6]=k,b[7]=l):l=b[7];let L=l,z=!!(!E&&(_||C)),O=E?"":void 0,B=E?"":void 0;b[8]!==v?(r=v&&(0,o.jsx)(ej.Box,{flex:"none",children:v}),b[8]=v,b[9]=r):r=b[9];let H=v?1:2;b[10]!==S?(a=S&&(0,o.jsx)(ej.Box,{children:(0,o.jsx)(ib,{animated:!0,radius:1,size:1})}),b[10]=S,b[11]=a):a=b[11],b[12]!==R||b[13]!==S||b[14]!==T?(c=!S&&(0,o.jsxs)(ej.Flex,{align:"center",gap:1,children:[(0,o.jsx)(iy,{size:1,textOverflow:"ellipsis",weight:"semibold",children:T}),R]}),b[12]=R,b[13]=S,b[14]=T,b[15]=c):c=b[15],b[16]!==M||b[17]!==H||b[18]!==a||b[19]!==c||b[20]!==I?(u=(0,o.jsxs)(ix,{__unstable_focusRing:!0,flex:1,onClick:M,paddingLeft:H,padding:2,tabIndex:I,children:[a,c]}),b[16]=M,b[17]=H,b[18]=a,b[19]=c,b[20]=I,b[21]=u):u=b[21],b[22]!==y||b[23]!==E?(p=y&&(0,o.jsx)(ej.Box,{hidden:E,children:(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneHeader",children:y})}),b[22]=y,b[23]=E,b[24]=p):p=b[24],b[25]!==u||b[26]!==p||b[27]!==r?(m=(0,o.jsxs)(ej.Flex,{align:"flex-start",gap:3,children:[r,u,p]}),b[25]=u,b[26]=p,b[27]=r,b[28]=m):m=b[28],b[29]!==E||b[30]!==z||b[31]!==C||b[32]!==_?(h=z&&(0,o.jsxs)(ej.Flex,{align:"center",hidden:E,overflow:"auto",children:[(0,o.jsx)(ej.Box,{flex:1,marginRight:3*!!C,children:_}),C]}),b[29]=E,b[30]=z,b[31]=C,b[32]=_,b[33]=h):h=b[33],b[34]!==L||b[35]!==V||b[36]!==m||b[37]!==h?(g=(0,o.jsxs)(ig,{direction:"column",gap:3,onClick:L,padding:3,sizing:"border",style:V,children:[m,h]}),b[34]=L,b[35]=V,b[36]=m,b[37]=h,b[38]=g):g=b[38];let $=!E&&w;return b[39]!==g||b[40]!==$||b[41]!==B?(f=(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,o.jsxs)(ej.Card,{"data-collapsed":B,tone:"inherit",children:[g,$]})}),b[39]=g,b[40]=$,b[41]=B,b[42]=f):f=b[42],b[43]!==j||b[44]!==t||b[45]!==f||b[46]!==O?(x=(0,o.jsx)(ej.LayerProvider,{zOffset:100,children:(0,o.jsx)(ih,{$border:j,"data-collapsed":O,"data-testid":"pane-header",ref:t,children:f})}),b[43]=j,b[44]=t,b[45]=f,b[46]=O,b[47]=x):x=b[47],x});function ij(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function iw(e){let t=(0,s.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,o.jsx)(iS,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,o.jsx)(i_,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function iS(e){let t,n,i,l,r,a=(0,s.c)(23),{node:c}=e,{title:u}=(0,d.useI18nText)(c),{t:p}=(0,d.useTranslation)();if(c.intent){let t;return a[0]!==c.intent||a[1]!==e?(t=(0,o.jsx)(iC,{...e,intent:c.intent}),a[0]=c.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==c?(t=ij(c),a[3]=c,a[4]=t):t=a[4];let{disabledReason:m,ariaLabel:h,isDisabled:g}=t;a[5]!==h||a[6]!==p||a[7]!==u?(n=h||u||p("status-button.aria-label"),a[5]=h,a[6]=p,a[7]=u,a[8]=n):n=a[8],a[9]!==g||a[10]!==c.hotkey?(i=!g&&c.hotkey?c.hotkey.split("+"):void 0,a[9]=g,a[10]=c.hotkey,a[11]=i):i=a[11];let f=g?m:u;return a[12]!==i||a[13]!==f?(l={hotkeys:i,content:f},a[12]=i,a[13]=f,a[14]=l):l=a[14],a[15]!==g||a[16]!==c.icon||a[17]!==c.onAction||a[18]!==c.selected||a[19]!==c.tone||a[20]!==n||a[21]!==l?(r=(0,o.jsx)(d.StatusButton,{disabled:g,icon:c.icon,onClick:c.onAction,selected:c.selected,tone:c.tone,"aria-label":n,tooltipProps:l}),a[15]=g,a[16]=c.icon,a[17]=c.onAction,a[18]=c.selected,a[19]=c.tone,a[20]=n,a[21]=l,a[22]=r):r=a[22],r}function iC(e){let t,n,i,l,r,a,c,u=(0,s.c)(27),{intent:p,node:m}=e;u[0]!==p.params||u[1]!==p.type?(t={intent:p.type,params:p.params},u[0]=p.params,u[1]=p.type,u[2]=t):t=u[2];let h=(0,eE.useIntentLink)(t),{t:g}=(0,d.useTranslation)();u[3]!==h||u[4]!==m?(n=e=>{h.onClick(e),m.onAction()},u[3]=h,u[4]=m,u[5]=n):n=u[5];let f=n;u[6]!==m?(i=ij(m),u[6]=m,u[7]=i):i=u[7];let{disabledReason:x,ariaLabel:b,isDisabled:y}=i;u[8]!==b||u[9]!==m.title||u[10]!==g?(l=b||m.title||g("status-button.aria-label"),u[8]=b,u[9]=m.title,u[10]=g,u[11]=l):l=u[11],u[12]!==y||u[13]!==m.hotkey?(r=!y&&m.hotkey?m.hotkey.split("+"):void 0,u[12]=y,u[13]=m.hotkey,u[14]=r):r=u[14];let v=y?x:m.title;return u[15]!==r||u[16]!==v?(a={hotkeys:r,content:v,placement:"bottom",portal:!0},u[15]=r,u[16]=v,u[17]=a):a=u[17],u[18]!==f||u[19]!==h.href||u[20]!==y||u[21]!==m.icon||u[22]!==m.selected||u[23]!==m.tone||u[24]!==l||u[25]!==a?(c=(0,o.jsx)(d.StatusButton,{forwardedAs:"a",disabled:y,href:h.href,icon:m.icon,onClick:f,selected:m.selected,tone:m.tone,"aria-label":l,tooltipProps:a}),u[18]=f,u[19]=h.href,u[20]=y,u[21]=m.icon,u[22]=m.selected,u[23]=m.tone,u[24]=l,u[25]=a,u[26]=c):c=u[26],c}function i_(e){let t,n,i,l,r,c=(0,s.c)(16),{node:u}=e,{title:p}=(0,d.useI18nText)(u),h=!!u.disabled,g=u.icon??m.UnknownIcon;c[0]!==u.title?(t={content:u.title,portal:!0},c[0]=u.title,c[1]=t):t=c[1],c[2]!==h||c[3]!==g||c[4]!==t||c[5]!==p?(n=(0,o.jsx)(ev.Button,{disabled:h,icon:g,label:p,mode:"bleed",tooltipProps:t}),c[2]=h,c[3]=g,c[4]=t,c[5]=p,c[6]=n):n=c[6];let f=(0,a.useId)();return c[7]!==u.children||c[8]!==u.disabled?(i=u.children.map((e,t)=>(0,o.jsx)(il,{disabled:!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),c[7]=u.children,c[8]=u.disabled,c[9]=i):i=c[9],c[10]!==i?(l=(0,o.jsx)(ej.Menu,{children:i}),c[10]=i,c[11]=l):l=c[11],c[12]!==n||c[13]!==f||c[14]!==l?(r=(0,o.jsx)(ev.MenuButton,{button:n,id:f,menu:l}),c[12]=n,c[13]=f,c[14]=l,c[15]=r):r=c[15],r}let iI=(0,e_.styled)(ej.Card)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,iT=[];function iR(e){let t,n,i,l,r,d,c,p,m,h,g,f,x,b,y,v,j,w=(0,s.c)(41);w[0]!==e?({children:t,minWidth:n,onCollapse:i,onExpand:l,...r}=e,w[0]=e,w[1]=t,w[2]=n,w[3]=i,w[4]=l,w[5]=r):(t=w[1],n=w[2],i=w[3],l=w[4],r=w[5]);let[S]=(0,a.useState)(iP),[C,_]=(0,a.useState)(null),I=(0,ew.useElementRect)(C)?.width||0,T=void 0!==I&&n?I<n:void 0;w[6]===Symbol.for("react.memo_cache_sentinel")?(d={expandedElement:null,panes:[],resizing:!1},w[6]=d):d=w[6];let[R,P]=(0,a.useState)(d);w[7]!==S||w[8]!==C?(c=()=>S.setRootElement(C),p=[S,C],w[7]=S,w[8]=C,w[9]=c,w[10]=p):(c=w[9],p=w[10]),(0,a.useEffect)(c,p),w[11]!==S||w[12]!==I?(m=()=>S.setRootWidth(I),h=[S,I],w[11]=S,w[12]=I,w[13]=m,w[14]=h):(m=w[13],h=w[14]),(0,a.useEffect)(m,h),w[15]!==S?(g=()=>S.subscribe(P),f=[S],w[15]=S,w[16]=g,w[17]=f):(g=w[16],f=w[17]),(0,a.useEffect)(g,f),w[18]!==T||w[19]!==i||w[20]!==l?(x=()=>{void 0!==T&&(T&&i&&i(),!T&&l&&l())},b=[T,i,l],w[18]=T,w[19]=i,w[20]=l,w[21]=x,w[22]=b):(x=w[21],b=w[22]),(0,a.useEffect)(x,b),w[23]!==T||w[24]!==S.collapse||w[25]!==S.expand||w[26]!==S.mount||w[27]!==S.resize||w[28]!==R.expandedElement||w[29]!==R.panes||w[30]!==R.resizing?(y={collapse:S.collapse,collapsed:T,expand:S.expand,expandedElement:R.expandedElement,mount:S.mount,panes:R.panes,resize:S.resize,resizing:R.resizing},w[23]=T,w[24]=S.collapse,w[25]=S.expand,w[26]=S.mount,w[27]=S.resize,w[28]=R.expandedElement,w[29]=R.panes,w[30]=R.resizing,w[31]=y):y=w[31];let E=y,k=T?"":void 0,D=R.resizing?"":void 0,F=I?"":void 0;return w[32]!==t||w[33]!==r||w[34]!==k||w[35]!==D||w[36]!==F?(v=(0,o.jsx)(iI,{"data-ui":"PaneLayout",...r,"data-collapsed":k,"data-resizing":D,"data-mounted":F,ref:_,children:t}),w[32]=t,w[33]=r,w[34]=k,w[35]=D,w[36]=F,w[37]=v):v=w[37],w[38]!==E||w[39]!==v?(j=(0,o.jsx)(u.PaneLayoutContext.Provider,{value:E,children:v}),w[38]=E,w[39]=v,w[40]=j):j=w[40],j}function iP(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},r=null,o=0,s=null,a=null,d=new Map,c=!1;function u(e){i.delete(e),s=e,p()}return{collapse:function(e){i.add(e),s===e&&(s=null),p()},expand:u,maximize:function(e){a=e,p()},mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),r&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||iT,l=n.get(t)||iT,r=Math.max(i.length,l.length);for(let e=0;e<r;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(r,t),u(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),a===e&&(a=null),p()}},resize:function(e,i,r){let o=t.indexOf(i),s=n.get(i);if(!s)return;let a=t[o+1],u=n.get(a);if(u){if("start"===e&&(c=!0,l.left={element:i,flex:s.flex||1,width:i.offsetWidth},l.right={element:a,flex:u.flex||1,width:a.offsetWidth},p()),"move"===e&&l.left&&l.right){let e,t,n,o,c,m,h,g,f,x,b,y;d=new Map;let{leftW:v,rightW:j,leftFlex:w,rightFlex:S}=(e={flex:l.left.flex+l.right.flex,width:l.left.width+l.right.width},t=s.minWidth??204,n=u.minWidth??204,o=Math.min(s.maxWidth||1/0,e.width-n),c=Math.min(u.maxWidth||1/0,e.width-t),m=t-l.left.width,m<(h=l.right.width-c)&&(m=h),g=l.right.width-n,g>(f=o-l.left.width)&&(g=f),x=Math.min(Math.max(r,m),g),b=l.left.width+x,y=l.right.width-x,{leftFlex:b/e.width*e.flex,leftW:b,rightFlex:y/e.width*e.flex,rightW:y});d.set(i,{flex:w,width:v}),d.set(a,{flex:S,width:j}),p()}if("end"===e){c=!1;let e=d.get(i),t=d.get(a);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:e?.flex??s.flex}),n.set(a,{...u,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:t?.flex??u.flex}),d=new Map,delete l.left,delete l.right,p()}}},setRootElement:function(e){r=e},setRootWidth:function(e){o=e,p()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function p(){if(!o)return;let l=[];for(let e of t)e!==s&&l.unshift(e);s&&l.unshift(s);let r=new WeakMap,u=l.length,p=l[0],m=o-(u-1)*51;for(let e of l){let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,o=e===p,s=i.has(e),c=l>m,u=!o&&(s||c),h=d.get(e);r.set(e,{element:e,collapsed:u,currentMinWidth:h?.width??t.currentMinWidth,currentMaxWidth:h?.width??t.currentMaxWidth,flex:h?.flex??t.flex??1,maximized:e===a}),u?m-=51:m-=l-51}let h=[];for(let e of t){let t=r.get(e);t&&h.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:h,resizing:c})}}()}function iE(e){let t,n,i,l=(0,s.c)(12),{children:r,currentMinWidth:a,flex:d,minWidth:c,paneKey:u,title:p,tone:m}=e,h=void 0===p?"Error":p,g=void 0===m?"critical":m;return l[0]!==h?(t=(0,o.jsx)(iv,{title:h}),l[0]=h,l[1]=t):t=l[1],l[2]!==r?(n=(0,o.jsx)(ie,{overflow:"auto",children:(0,o.jsx)(ej.Box,{paddingX:4,paddingY:5,children:r})}),l[2]=r,l[3]=n):n=l[3],l[4]!==a||l[5]!==d||l[6]!==c||l[7]!==u||l[8]!==t||l[9]!==n||l[10]!==g?(i=(0,o.jsxs)(n8,{currentMinWidth:a,flex:d,id:u,minWidth:c,tone:g,children:[t,n]}),l[4]=a,l[5]=d,l[6]=c,l[7]=u,l[8]=t,l[9]=n,l[10]=g,l[11]=i):i=l[11],i}function ik(e){let t,n,i,l=(0,s.c)(6),{children:r,ms:d}=e,c=void 0===d?0:d,[u,p]=(0,a.useState)(c<=0);if(l[0]!==c?(t=()=>{if(c<=0)return;let e=setTimeout(()=>p(!0),c);return()=>{clearTimeout(e)}},n=[c],l[0]=c,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,a.useEffect)(t,n),!u||!r){let e;return l[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),l[3]=e):e=l[3],e}return l[4]!==r?(i="function"==typeof r?r():r,l[4]=r,l[5]=i):i=l[5],i}function iD(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(d.isDev){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" ➝ ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,e3.of)(null);return(0,e4.merge)(...t.map(e=>n.pipe((0,eO.mapTo)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,eB.delay)(e.ms))))}let iF=(0,e_.styled)(ej.Flex)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,iA=(0,a.memo)(e=>{let t,n,i,l,r,c,u,p,m,h,g=(0,s.c)(28),{delay:f,flex:x,message:b,minWidth:y,paneKey:v,path:j,selected:w,title:S,tone:_}=e,I=void 0===f?300:f,T=void 0===b?iD:b,{t:R}=(0,d.useTranslation)(C);e:{if("function"==typeof T){let e;g[0]!==T||g[1]!==j?(e=T(j?j.split(";"):[]),g[0]=T,g[1]=j,g[2]=e):e=g[2],t=e;break e}t=T}let P=t;g[3]!==P||g[4]!==R?(n=()=>"string"==typeof P?P:R("panes.resolving.default-message"),g[3]=P,g[4]=R,g[5]=n):n=g[5];let[E,k]=(0,a.useState)(n);g[6]!==P||g[7]!==R?(i=()=>{if("object"!=typeof P||"function"!=typeof P.subscribe)return;let e=P.subscribe(e=>{k("messageKey"in e?R(e.messageKey):e.message)});return()=>e.unsubscribe()},l=[P,R],g[6]=P,g[7]=R,g[8]=i,g[9]=l):(i=g[8],l=g[9]),(0,a.useEffect)(i,l);let[D,F]=(0,a.useState)(null),[A,V]=(0,a.useState)(!1);g[10]!==D?(r=()=>{if(D)return(0,ew._raf2)(()=>V(!0))},c=[D],g[10]=D,g[11]=r,g[12]=c):(r=g[11],c=g[12]),(0,a.useEffect)(r,c);let M=A?"":void 0,L=S||E;g[13]!==L?(u=(0,o.jsx)(d.LoadingBlock,{showText:!0,title:L}),g[13]=L,g[14]=u):u=g[14],g[15]!==u||g[16]!==M?(p=(0,o.jsx)(iF,{align:"center","data-mounted":M,direction:"column",height:"fill",justify:"center",ref:F,children:u}),g[15]=u,g[16]=M,g[17]=p):p=g[17];let z=p;return g[18]!==z||g[19]!==I?(m=(0,o.jsx)(ie,{children:z}),g[18]=z,g[19]=I,g[20]=m):m=g[20],g[21]!==x||g[22]!==y||g[23]!==v||g[24]!==w||g[25]!==m||g[26]!==_?(h=(0,o.jsx)(n8,{flex:x,id:v,minWidth:y,selected:w,tone:_,children:m}),g[21]=x,g[22]=y,g[23]=v,g[24]=w,g[25]=m,g[26]=_,g[27]=h):h=g[27],h});function iV(){let e=(0,a.useContext)(u.DocumentPaneContext);if(!e)throw Error("DocumentPane: missing context value");return e}function iM(e){let t,n,i=(0,s.c)(8),{children:l,documentId:r,documentType:a}=e;return i[0]!==l||i[1]!==r||i[2]!==a?(t=(0,o.jsx)(iL,{documentId:r,documentType:a,children:l}),i[0]=l,i[1]=r,i[2]=a,i[3]=t):t=i[3],i[4]!==r||i[5]!==a||i[6]!==t?(n=(0,o.jsx)(d.CommentsEnabledProvider,{documentId:r,documentType:a,children:t}),i[4]=r,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function iL(e){let t,n,i,l,r,c,u=(0,s.c)(26),{children:p,documentId:m,documentType:h}=e,{enabled:g}=(0,d.useCommentsEnabled)(),{connectionState:f,onPathOpen:x,inspector:b,openInspector:y}=iV(),{selectedReleaseId:v}=(0,d.usePerspective)(),{params:j,setParams:w}=lI(),{resolveIntentLink:S}=(0,eE.useRouter)(),C=j?.comment,_=(0,a.useRef)(j);u[0]!==j?(t=()=>{_.current=j},n=[j],u[0]=j,u[1]=t,u[2]=n):(t=u[1],n=u[2]),(0,a.useLayoutEffect)(t,n),u[3]!==m||u[4]!==h||u[5]!==S?(i=e=>{let t=S("edit",{id:m,type:h,inspect:d.COMMENTS_INSPECTOR_NAME,comment:e});return`${window.location.origin}${t}`},u[3]=m,u[4]=h,u[5]=S,u[6]=i):i=u[6];let I=i;u[7]!==w?(l=()=>{w({..._.current,comment:void 0})},u[7]=w,u[8]=l):l=u[8];let T=l;u[9]!==b?.name||u[10]!==y?(r=()=>{b?.name!==d.COMMENTS_INSPECTOR_NAME&&y(d.COMMENTS_INSPECTOR_NAME)},u[9]=b?.name,u[10]=y,u[11]=r):r=u[11];let R=r;if(!g){let e;return u[12]!==p?(e=(0,o.jsx)(o.Fragment,{children:p}),u[12]=p,u[13]=e):e=u[13],e}let P=b?.name===d.COMMENTS_INSPECTOR_NAME,E="connecting"===f;return u[14]!==p||u[15]!==m||u[16]!==h||u[17]!==I||u[18]!==T||u[19]!==R||u[20]!==x||u[21]!==C||u[22]!==v||u[23]!==P||u[24]!==E?(c=(0,o.jsx)(d.CommentsProvider,{documentId:m,documentType:h,getCommentLink:I,isCommentsOpen:P,isConnecting:E,onClearSelectedComment:T,onCommentsOpen:R,onPathOpen:x,selectedCommentId:C,sortOrder:"desc",type:"field",releaseId:v,children:p}),u[14]=p,u[15]=m,u[16]=h,u[17]=I,u[18]=T,u[19]=R,u[20]=x,u[21]=C,u[22]=v,u[23]=P,u[24]=E,u[25]=c):c=u[25],c}function iz(e){let t,n,i,l,r,c,u=(0,s.c)(20),{children:p}=e,{data:m}=(0,d.useActiveReleases)(),{actions:h,editState:g,isInitialValueLoading:f,revisionId:x}=iV(),b=(0,a.useRef)(null);if(u[0]!==m||u[1]!==g?.release){let e;u[3]!==g?.release?(e=e=>e===g?.release,u[3]=g?.release,u[4]=e):e=u[4],t=m.map(iO).find(e),u[0]=m,u[1]=g?.release,u[2]=t}else t=u[2];let y=t;u[5]!==g||u[6]!==f||u[7]!==y||u[8]!==x?(n=g?{...g,release:y,revision:x||void 0,initialValueResolved:!f}:null,u[5]=g,u[6]=f,u[7]=y,u[8]=x,u[9]=n):n=u[9];let v=n;if(!v)return null;u[10]===Symbol.for("react.memo_cache_sentinel")?(i=()=>b.current?.(),u[10]=i):i=u[10],u[11]!==v?(l={...v,onComplete:i},u[11]=v,u[12]=l):l=u[12];let j=h||d.EMPTY_ARRAY;return u[13]!==v||u[14]!==p?(r=e=>{let{states:t}=e;return(0,o.jsx)(iH,{states:t,actionProps:v,children:p})},u[13]=v,u[14]=p,u[15]=r):r=u[15],u[16]!==l||u[17]!==j||u[18]!==r?(c=(0,o.jsx)(d.GetHookCollectionState,{args:l,hooks:j,resetRef:b,children:r}),u[16]=l,u[17]=j,u[18]=r,u[19]=c):c=u[19],c}function iO(e){return(0,d.getReleaseIdFromReleaseDocumentId)(e._id)}iA.displayName="Memo(LoadingPane)";let iB=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule","discardVersion","unpublishVersion"];function iH(e){let t,n,i,l=(0,s.c)(9),{states:r,children:a,actionProps:c}=e,{t:p}=(0,d.useTranslation)(C);l[0]!==c?(t=(0,d.getDocumentIdForCanvasLink)(c),l[0]=c,l[1]=t):t=l[1];let{isLinked:m}=(0,d.useCanvasCompanionDoc)(t);return l[2]!==m||l[3]!==r||l[4]!==p?(n=m?r.map(e=>e.action&&iB.includes(e.action)?e:{...e,disabled:!0,title:p("action.disabled-by-canvas.tooltip")}):r,l[2]=m,l[3]=r,l[4]=p,l[5]=n):n=l[5],l[6]!==a||l[7]!==n?(i=(0,o.jsx)(u.DocumentActionsStateContext.Provider,{value:n,children:a}),l[6]=a,l[7]=n,l[8]=i):i=l[8],i}function i$(){let e=(0,a.useContext)(u.StructureToolContext);if(!e)throw Error("StructureTool: missing context value");return e}let iN={},iG="inspect:",iU=[{id:"inspectors"},{id:"links"}],iq="sanity/structure/history";function iW(e){let t,n,i,l,r,c,u,p,m,h=(0,s.c)(22),{documentId:g,documentType:f,inspectors:x,onMenuItems:b}=e,y=x.length;h[0]!==y?(t=()=>Array.from(Array(y)),h[0]=y,h[1]=t):t=h[1];let[v,j]=(0,a.useState)(t);h[2]!==y||h[3]!==v?(n=()=>{if(v.length!==y){let e=Array.from(Array(y));for(let t=0;t<y;t++)e[t]=v[t];j(e)}},i=[y,v],h[2]=y,h[3]=v,h[4]=n,h[5]=i):(n=h[4],i=h[5]),(0,a.useEffect)(n,i),h[6]===Symbol.for("react.memo_cache_sentinel")?(l=(e,t)=>{j(n=>{let i=[...n];return i[e]=t,i})},h[6]=l):l=h[6];let w=l;if(h[7]!==v||h[8]!==b?(r=()=>{b(v.filter(Boolean))},c=[v,b],h[7]=v,h[8]=b,h[9]=r,h[10]=c):(r=h[9],c=h[10]),(0,a.useEffect)(r,c),h[11]!==g||h[12]!==f||h[13]!==x){let e;h[15]!==g||h[16]!==f?(e=(e,t)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:i,useMenuItem:l}){return(0,a.memo)(function(){let r,o,c,u=(0,s.c)(4);u[0]===Symbol.for("react.memo_cache_sentinel")?(r={documentId:e,documentType:t},u[0]=r):r=u[0];let p=l(r),m=(0,d.useUnique)(p);return u[1]!==m?(o=()=>{i(n,m)},c=[m],u[1]=m,u[2]=o,u[3]=c):(o=u[2],c=u[3]),(0,a.useEffect)(o,c),null})}({documentId:g,documentType:f,index:t,setMenuItem:w,useMenuItem:e.useMenuItem}),e.name]:[iY,""],h[15]=g,h[16]=f,h[17]=e):e=h[17],u=x.map(e),h[11]=g,h[12]=f,h[13]=x,h[14]=u}else u=h[14];let S=u;return h[18]!==S?(p=S.map(iK),h[18]=S,h[19]=p):p=h[19],h[20]!==p?(m=(0,o.jsx)(o.Fragment,{children:p}),h[20]=p,h[21]=m):m=h[21],m}function iK(e){let[t,n]=e;return n&&(0,o.jsx)(t,{},n)}function iY(){return null}function iX(){let e,t,n,i,l=(0,s.c)(22),{connectionState:r,schemaType:o,editState:a,isDeleted:c,lastRevisionDocument:u}=iV(),{selectedPerspectiveName:p}=(0,d.usePerspective)(),{t:m}=(0,d.useTranslation)(C);e:{if(c){e=u;break e}if(p&&(0,d.isPublishedPerspective)(p)){e=a?.published;break e}e=a?.version||a?.draft||a?.published}let h=e,g=!!h;t:{if(c&&u&&o)try{let e;l[0]!==u||l[1]!==o?(e=(0,d.prepareForPreview)(u,o),l[0]=u,l[1]=o,l[2]=e):e=l[2],t=e;break t}catch(e){console.warn("Failed to prepare preview for deleted document:",e),t=null;break t}t=null}let f=t,x=g&&!c;l[3]!==h||l[4]!==o||l[5]!==x?(n={enabled:x,schemaType:o,value:h},l[3]=h,l[4]=o,l[5]=x,l[6]=n):n=l[6];let{error:b,value:y}=(0,d.useValuePreview)(n);if("connecting"===r&&!g){let e;return l[7]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},l[7]=e):e=l[7],e}if(c&&f){let e;return l[8]!==f.title?(e={error:void 0,title:f.title},l[8]=f.title,l[9]=e):e=l[9],e}if(!y&&!c){let e,t,n=o?.title||o?.name;return l[10]!==m||l[11]!==n?(e=m("panes.document-header-title.new.text",{schemaType:n}),l[10]=m,l[11]=n,l[12]=e):e=l[12],l[13]!==e?(t={error:void 0,title:e},l[13]=e,l[14]=t):t=l[14],t}if(b){let e,t;return l[15]!==b.message||l[16]!==m?(e=m("panes.document-list-pane.error.text",{error:b.message}),l[15]=b.message,l[16]=m,l[17]=e):e=l[17],l[18]!==e?(t={error:e,title:void 0},l[18]=e,l[19]=t):t=l[19],t}let v=y?.title;return l[20]!==v?(i={error:void 0,title:v},l[20]=v,l[21]=i):i=l[21],i}iW.displayName="DocumentInspectorMenuItemsResolver";let iJ=["patch","commit"],iQ=(0,a.memo)(function(){let e,t,n,i,l,r=(0,s.c)(13),{push:c}=(0,ew.useToast)(),{documentId:u,documentType:p,value:m}=iV(),h=iX(),g=h.error,f=(0,d.useDocumentOperationEvent)(u,p),x=(0,a.useRef)(f),b=lI(),{t:y}=(0,d.useTranslation)(C),{handleOpenDialog:v}=(0,d.useDocumentLimitsUpsellContext)();e:{if(!h.title&&!g&&!iJ.includes(f?.op)&&"string"==typeof m.title&&f?.type==="success"){e=m.title;break e}e=h.title}let j=e;r[0]!==y||r[1]!==j?(t=j||y("panes.document-operation-results.operation-undefined-title"),r[0]=y,r[1]=j,r[2]=t):t=r[2];let w=t;r[3]!==w?(n=w.length>25?`${w.slice(0,25)}...`:w,r[3]=w,r[4]=n):n=r[4];let S=n;return r[5]!==S||r[6]!==f||r[7]!==v||r[8]!==b||r[9]!==c||r[10]!==y?(i=()=>{let e;if(f&&f!==x.current){if("error"===f.type){if((0,d.isDocumentLimitError)(f.error))return void v("document_action");c({closable:!0,duration:3e4,status:"error",title:y("panes.document-operation-results.operation-error",{context:f.op}),description:(0,o.jsxs)("details",{children:[(0,o.jsx)("summary",{children:y("panes.document-operation-results.error.summary.title")}),f.error.message]})})}return"success"!==f.type||iJ.includes(f.op)||c({closable:!0,status:"success",title:(0,o.jsx)(d.Translate,{context:f.op,i18nKey:"panes.document-operation-results.operation-success",t:y,values:{op:f.op,title:S},components:{Strong:"strong"}})}),"success"===f.type&&"delete"===f.op&&(e=setTimeout(()=>b.closeCurrentAndAfter(),0)),x.current=f,()=>clearTimeout(e)}},l=[f,b,c,y,S,v],r[5]=S,r[6]=f,r[7]=v,r[8]=b,r[9]=c,r[10]=y,r[11]=i,r[12]=l):(i=r[11],l=r[12]),(0,a.useEffect)(i,l),null}),iZ=(0,e_.styled)(ej.Card)({position:"relative",zIndex:"1",lineHeight:"0"});function i0(e){let t,n,i,l,r,a,c,u,p,h,g,f,x=(0,s.c)(25);x[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:l,title:a,...r}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=l,x[5]=r,x[6]=a):(t=x[1],n=x[2],i=x[3],l=x[4],r=x[5],a=x[6]);let{t:b}=(0,d.useTranslation)(C);return x[7]!==a?(c=(0,o.jsx)(ej.Box,{flex:1,padding:3,children:(0,o.jsx)(ej.Text,{as:"h1",size:1,weight:"medium",children:a})}),x[7]=a,x[8]=c):c=x[8],x[9]!==b?(u=b("document-inspector.close-button.tooltip"),x[9]=b,x[10]=u):u=x[10],x[11]!==u?(p={content:u},x[11]=u,x[12]=p):p=x[12],x[13]!==n||x[14]!==l||x[15]!==p?(h=(0,o.jsx)(ej.Box,{flex:"none",padding:1,children:(0,o.jsx)(ev.Button,{"aria-label":n,icon:m.CloseIcon,mode:"bleed",onClick:l,tooltipProps:p})}),x[13]=n,x[14]=l,x[15]=p,x[16]=h):h=x[16],x[17]!==c||x[18]!==h?(g=(0,o.jsxs)(ej.Flex,{padding:2,children:[c,h]}),x[17]=c,x[18]=h,x[19]=g):g=x[19],x[20]!==t||x[21]!==i||x[22]!==r||x[23]!==g?(f=(0,o.jsxs)(iZ,{...r,as:i,children:[g,t]}),x[20]=t,x[21]=i,x[22]=r,x[23]=g,x[24]=f):f=x[24],f}function i1(e){let t,n,i,l=(0,s.c)(14),{documentId:r,documentType:a,flex:c}=e,{collapsed:u}=n9(),{closeInspector:p,inspector:m}=iV(),{features:h}=i$();l[0]!==p||l[1]!==m?(t=()=>{m&&p(m.name)},l[0]=p,l[1]=m,l[2]=t):t=l[2];let g=t;if(u||!m)return null;let f=m.component;l[3]!==f||l[4]!==r||l[5]!==a||l[6]!==g?(n=(0,o.jsx)(f,{onClose:g,documentId:r,documentType:a}),l[3]=f,l[4]=r,l[5]=a,l[6]=g,l[7]=n):n=l[7];let x=n;if(h.resizablePanes){let e;return l[8]!==x||l[9]!==c?(e=(0,o.jsx)(d.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:x}),l[8]=x,l[9]=c,l[10]=e):e=l[10],e}return l[11]!==x||l[12]!==c?(i=(0,o.jsx)(ej.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:x}),l[11]=x,l[12]=c,l[13]=i):i=l[13],i}function i2(e,t,n){let i,l,r,o,a=(0,s.c)(16),c=(0,d.useKeyValueStore)();a[0]!==t||a[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),a[0]=t,a[1]=e,a[2]=i):i=a[2];let u=i.join(".");if(a[3]!==n||a[4]!==c||a[5]!==u){let e;a[7]!==n?(e=e=>null===e?n:e,a[7]=n,a[8]=e):e=a[8],l=c.getKey(u).pipe((0,eH.map)(e)),a[3]=n,a[4]=c,a[5]=u,a[6]=l}else l=a[6];let p=(0,eP.useObservable)(l,n);a[9]!==c||a[10]!==u||a[11]!==p?(r=async e=>{e!==p&&await c.setKey(u,e)},a[9]=c,a[10]=u,a[11]=p,a[12]=r):r=a[12];let m=r;return a[13]!==m||a[14]!==p?(o=[p,m],a[13]=m,a[14]=p,a[15]=o):o=a[15],o}let i3={id:"parsed",title:"document-inspector.view-mode.parsed"},i4={id:"raw",title:"document-inspector.view-mode.raw-json"},i5=[i3,i4],i6=new tB.default({maxSize:1e3});function i8(e){let{path:t}=e,n=i6.get(t);void 0!==n&&i6.set(t,!n)}function i7(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function i9(e){i7(e.target)}function le(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),i7(e.currentTarget))}let lt=e_.styled.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return e_.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,ej.rem)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,ej.rem)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,ej.rem)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,ej.rem)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,ej.rem)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function ln(e){let t,n,i,l=(0,s.c)(8),{onChange:r,query:a}=e;l[0]!==r?(t=e=>r(e.target.value),l[0]=r,l[1]=t):t=l[1];let c=t,{t:u}=(0,d.useTranslation)(C);l[2]!==u?(n=u("document-inspector.search.placeholder"),l[2]=u,l[3]=n):n=l[3];let p=a||"";return l[4]!==c||l[5]!==n||l[6]!==p?(i=(0,o.jsx)(ej.TextInput,{icon:m.SearchIcon,onChange:c,placeholder:n,radius:2,value:p}),l[4]=c,l[5]=n,l[6]=p,l[7]=i):i=l[7],i}function li(e){let t,n,i,l,r,a,c,u,p,m,h,g,f,x,b,y,v=(0,s.c)(49),{value:j}=e,{onInspectClose:w,paneKey:S}=iV(),_=`${S}_inspect_`,[I,T]=i2("inspect-view-mode",null,"parsed");v[0]!==I?(t=i5.find(e=>e.id===I),v[0]=I,v[1]=t):t=v[1];let R=t;v[2]!==T?(n=async()=>{await T(i3.id)},v[2]=T,v[3]=n):n=v[3];let P=n;v[4]!==T?(i=async()=>{await T(i4.id)},v[4]=T,v[5]=i):i=v[5];let E=i,{t:k}=(0,d.useTranslation)(C),D=`${_}dialog`;v[6]!==k||v[7]!==j?(l=(0,d.isRecord)(j)&&(0,d.isString)(j._id)&&(0,d.isString)(j._type)?(0,o.jsx)(d.Translate,{t:k,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,o.jsx)("em",{children:(0,o.jsx)(sB,{document:j})})}}):(0,o.jsx)("em",{children:k("document-inspector.dialog.title-no-value")}),v[6]=k,v[7]=j,v[8]=l):l=v[8],v[9]===Symbol.for("react.memo_cache_sentinel")?(r={position:"sticky",bottom:0,zIndex:3},v[9]=r):r=v[9];let F=`${_}tabpanel`,A=`${_}tab-${i3.id}`;v[10]!==k?(a=k(i3.title),v[10]=k,v[11]=a):a=v[11];let V=R===i3;v[12]!==P||v[13]!==F||v[14]!==A||v[15]!==a||v[16]!==V?(c=(0,o.jsx)(ev.Tab,{"aria-controls":F,id:A,label:a,onClick:P,selected:V}),v[12]=P,v[13]=F,v[14]=A,v[15]=a,v[16]=V,v[17]=c):c=v[17];let M=`${_}tabpanel`,L=`${_}tab-${i4.id}`;v[18]!==k?(u=k(i4.title),v[18]=k,v[19]=u):u=v[19];let z=R===i4;v[20]!==E||v[21]!==M||v[22]!==L||v[23]!==u||v[24]!==z?(p=(0,o.jsx)(ev.Tab,{"aria-controls":M,id:L,label:u,onClick:E,selected:z}),v[20]=E,v[21]=M,v[22]=L,v[23]=u,v[24]=z,v[25]=p):p=v[25],v[26]!==c||v[27]!==p?(m=(0,o.jsx)(ej.Card,{padding:3,paddingTop:0,shadow:1,style:r,children:(0,o.jsxs)(ej.TabList,{space:1,children:[c,p]})}),v[26]=c,v[27]=p,v[28]=m):m=v[28];let O=`${_}tab-${I}`,B=`${_}tabpanel`;return v[29]===Symbol.for("react.memo_cache_sentinel")?(h={outline:"none"},v[29]=h):h=v[29],v[30]!==j||v[31]!==R?(g=R===i3&&(0,o.jsx)(lt,{children:(0,o.jsx)(tO,{data:j,isExpanded:function e(t,n){let i=i6.get(t);return void 0===i?(i6.set(t,Array.isArray(n)||(0,d.isRecord)(n)),e(t,n)):i},onClick:i8,search:ln,filterOptions:{ignoreCase:!0}})}),v[30]=j,v[31]=R,v[32]=g):g=v[32],v[33]!==j||v[34]!==R?(f=R===i4&&(0,o.jsx)(ej.Code,{language:"json",tabIndex:0,onKeyDown:le,onDoubleClick:i9,size:1,children:JSON.stringify(j,null,2)}),v[33]=j,v[34]=R,v[35]=f):f=v[35],v[36]!==O||v[37]!==B||v[38]!==g||v[39]!==f?(x=(0,o.jsxs)(ew.TabPanel,{"aria-labelledby":O,flex:1,id:B,overflow:"auto",padding:4,style:h,children:[g,f]}),v[36]=O,v[37]=B,v[38]=g,v[39]=f,v[40]=x):x=v[40],v[41]!==m||v[42]!==x?(b=(0,o.jsxs)(ej.Flex,{direction:"column",height:"fill",children:[m,x]}),v[41]=m,v[42]=x,v[43]=b):b=v[43],v[44]!==w||v[45]!==b||v[46]!==D||v[47]!==l?(y=(0,o.jsx)(ev.Dialog,{bodyHeight:"fill",id:D,header:l,onClose:w,onClickOutside:w,padding:!1,width:2,children:b}),v[44]=w,v[45]=b,v[46]=D,v[47]=l,v[48]=y):y=v[48],y}function ll(e){let t,n,i,l,r,a,d,c,u,p,m,h=(0,s.c)(22);h[0]!==e?({action:n,content:i,icon:t,tone:r,paddingY:a,...l}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=i,h[4]=l,h[5]=r,h[6]=a):(t=h[1],n=h[2],i=h[3],l=h[4],r=h[5],a=h[6]);let g=void 0===r?"transparent":r,f=void 0===a?2:a;return h[7]!==t?(d=t&&(0,o.jsx)(ej.Text,{size:0,children:(0,o.jsx)(t,{})}),h[7]=t,h[8]=d):d=h[8],h[9]!==i?(c=(0,o.jsx)(ej.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:i}),h[9]=i,h[10]=c):c=h[10],h[11]!==n?(u=n&&(0,o.jsx)(ev.Button,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),h[11]=n,h[12]=u):u=h[12],h[13]!==d||h[14]!==c||h[15]!==u?(p=(0,o.jsxs)(ej.Flex,{align:"center",gap:3,paddingX:2,children:[d,c,u]}),h[13]=d,h[14]=c,h[15]=u,h[16]=p):p=h[16],h[17]!==f||h[18]!==l||h[19]!==p||h[20]!==g?(m=(0,o.jsx)(ej.Box,{padding:1,children:(0,o.jsx)(ej.Card,{radius:3,paddingX:2,paddingY:f,tone:g,...l,children:p})}),h[17]=f,h[18]=l,h[19]=p,h[20]=g,h[21]=m):m=h[21],m}function lr(){let e=(0,s.c)(3),{isDeleted:t,isDeleting:n,ready:i}=iV(),{selectedPerspective:l}=(0,d.usePerspective)();if(!i)return null;if(!(0,d.isPublishedPerspective)(l)&&!(0,d.isDraftPerspective)(l)&&(0,d.isReleaseDocument)(l)&&"archived"===l.state){let t;return e[0]!==l?(t=(0,o.jsx)(ls,{release:l}),e[0]=l,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(lo,{}),e[2]=t):t=e[2],t}}function lo(){let e,t,n,i,l,r,a=(0,s.c)(17),{documentId:c,documentType:u}=iV(),{restore:p}=(0,d.useDocumentOperation)(c,u),{navigateIntent:h}=(0,eE.useRouter)();a[0]!==c||a[1]!==u||a[2]!==h||a[3]!==p?(e=()=>{p.execute("lastRevision"),h("edit",{id:c,type:u})},a[0]=c,a[1]=u,a[2]=h,a[3]=p,a[4]=e):e=a[4];let g=e,{t:f}=(0,d.useTranslation)(C);return a[5]!==f?(t=f("banners.deleted-document-banner.restore-button.text"),a[5]=f,a[6]=t):t=a[6],a[7]!==g||a[8]!==t?(n={onClick:g,text:t},a[7]=g,a[8]=t,a[9]=n):n=a[9],a[10]!==f?(i=f("banners.deleted-document-banner.text"),a[10]=f,a[11]=i):i=a[11],a[12]!==i?(l=(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:i}),a[12]=i,a[13]=l):l=a[13],a[14]!==n||a[15]!==l?(r=(0,o.jsx)(ll,{action:n,content:l,"data-testid":"deleted-document-banner",icon:m.ReadOnlyIcon}),a[14]=n,a[15]=l,a[16]=r):r=a[16],r}let ls=e=>{let t,n,i,l=(0,s.c)(8),{release:r}=e,{t:a}=(0,d.useTranslation)();return l[0]!==r.metadata?.title||l[1]!==a?(t=r.metadata?.title||a("release.placeholder-untitled-release"),l[0]=r.metadata?.title,l[1]=a,l[2]=t):t=l[2],l[3]!==t?(n={title:t},l[3]=t,l[4]=n):n=l[4],l[5]!==a||l[6]!==n?(i=(0,o.jsx)(ll,{tone:"caution",content:(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:(0,o.jsx)(d.Translate,{t:a,i18nKey:"banners.deleted-release-banner.text",values:n})}),"data-testid":"deleted-release-banner",icon:m.DocumentRemoveIcon}),l[5]=a,l[6]=n,l[7]=i):i=l[7],i};function la(){let e,t,n=(0,s.c)(5),{schemaType:i}=iV(),{t:l}=(0,d.useTranslation)(C);return(0,eS.isDeprecatedSchemaType)(i)?(n[0]!==l?(e=(0,o.jsx)(d.Translate,{t:l,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=l,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,o.jsx)(ll,{content:(0,o.jsxs)(ej.Text,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:m.ErrorOutlineIcon}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let ld=(0,tp.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),lc=(0,tp.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),lu=(0,e_.styled)(ej.Box)`
  box-sizing: border-box;
`;function lp(e){let t,n,i,l,r,c,u,p,m,h,g,f,x,b,y,v=(0,s.c)(56),{onClose:j,onRequestSubmitted:w}=e,{t:S}=(0,d.useTranslation)(C),_=(0,tu.useTelemetry)(),I=`request-permissions-${(0,a.useId)()}`,T=(0,d.useProjectId)();v[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},v[0]=t):t=v[0];let R=(0,d.useClient)(t),P=(0,ew.useToast)(),E=(0,d.useZIndex)(),[k,D]=(0,a.useState)(!1),[F,A]=(0,a.useState)(""),[V,M]=(0,a.useState)(),[L,z]=(0,a.useState)(!1),[O,B]=(0,a.useState)(!1);e:{let e,t="administrator";if(!T||!R){let e;v[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e3.of)(t),v[1]=e):e=v[1],n=e;break e}if(v[2]!==R.observable||v[3]!==T){let n,i;v[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(lh).find(lm)?"editor":t,v[5]=n):n=v[5],v[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,e3.of)(t),v[6]=i):i=v[6],e=R.observable.request({url:`/projects/${T}/roles`}).pipe((0,eH.map)(n),(0,eN.startWith)(t),(0,e$.catchError)(i)),v[2]=R.observable,v[3]=T,v[4]=e}else e=v[4];n=e}let H=(0,eP.useObservable)(n);v[7]!==R||v[8]!==F||v[9]!==w||v[10]!==T||v[11]!==H||v[12]!==_||v[13]!==P?(i=()=>{D(!0),R.request({url:`/access/project/${T}/requests`,method:"post",body:{note:F,requestUrl:window?.location.href,requestedRole:H,type:"role"}}).then(e=>{e&&(w&&w(),_.log(lc),P.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(z(!0),M(n)),409===t?(B(!0),M(n)):P.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{D(!1)})},v[7]=R,v[8]=F,v[9]=w,v[10]=T,v[11]=H,v[12]=_,v[13]=P,v[14]=i):i=v[14];let $=i,N=E.fullscreen;v[15]!==S?(l=S("request-permission-dialog.header.text"),v[15]=S,v[16]=l):l=v[16],v[17]!==S?(r=S("confirm-dialog.cancel-button.fallback-text"),v[17]=S,v[18]=r):r=v[18],v[19]!==j||v[20]!==r?(c={onClick:j,text:r},v[19]=j,v[20]=r,v[21]=c):c=v[21];let G=L||O;return v[22]!==S?(u=S("request-permission-dialog.confirm-button.text"),v[22]=S,v[23]=u):u=v[23],v[24]!==k||v[25]!==$||v[26]!==G||v[27]!==u?(p={onClick:$,loading:k,disabled:G,text:u,tone:"primary",type:"submit"},v[24]=k,v[25]=$,v[26]=G,v[27]=u,v[28]=p):p=v[28],v[29]!==p||v[30]!==c?(m={cancelButton:c,confirmButton:p},v[29]=p,v[30]=c,v[31]=m):m=v[31],v[32]!==S?(h=S("request-permission-dialog.description.text"),v[32]=S,v[33]=h):h=v[33],v[34]!==h?(g=(0,o.jsx)(ej.Text,{children:h}),v[34]=h,v[35]=g):g=v[35],v[36]!==O||v[37]!==L||v[38]!==k||v[39]!==V||v[40]!==F||v[41]!==$||v[42]!==S?(f=L||O?(0,o.jsx)(ej.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,o.jsxs)(ej.Text,{size:1,children:[L&&(0,o.jsx)(o.Fragment,{children:V??S("request-permission-dialog.warning.limit-reached.text")}),O&&(0,o.jsx)(o.Fragment,{children:V??S("request-permission-dialog.warning.denied.text")})]})}):(0,o.jsxs)(ej.Stack,{space:3,paddingBottom:0,children:[(0,o.jsx)(ej.TextInput,{placeholder:S("request-permission-dialog.note-input.placeholder.text"),disabled:k,onKeyDown:e=>{"Enter"===e.key&&$()},maxLength:150,value:F,onChange:e=>{A(e.currentTarget.value)}}),(0,o.jsx)(ej.Text,{align:"right",muted:!0,size:1,children:`${F.length}/150`})]}),v[36]=O,v[37]=L,v[38]=k,v[39]=V,v[40]=F,v[41]=$,v[42]=S,v[43]=f):f=v[43],v[44]!==g||v[45]!==f?(x=(0,o.jsx)(lu,{children:(0,o.jsxs)(ej.Stack,{space:4,children:[g,f]})}),v[44]=g,v[45]=f,v[46]=x):x=v[46],v[47]!==I||v[48]!==j||v[49]!==m||v[50]!==x||v[51]!==l?(b=(0,o.jsx)(ev.Dialog,{width:1,id:I,header:l,footer:m,onClose:j,onClickOutside:j,children:x}),v[47]=I,v[48]=j,v[49]=m,v[50]=x,v[51]=l,v[52]=b):b=v[52],v[53]!==b||v[54]!==E.fullscreen?(y=(0,o.jsx)(ew.DialogProvider,{position:"fixed",zOffset:N,children:b}),v[53]=b,v[54]=E.fullscreen,v[55]=y):y=v[55],y}function lm(e){return"editor"===e.name}function lh(e){return e?.appliesToUsers}(0,e_.styled)(ej.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let lg={loading:!0,error:!1,status:void 0},lf={loading:!1,error:!1,status:"none"},lx={loading:!1,error:!1,status:"declined"},lb={loading:!1,error:!1,status:"pending"},ly={loading:!1,error:!1,status:"expired"};function lv(e){let t,n,i,l,r,c,u,p,h=(0,s.c)(29),{requiredPermission:g}=e,f=(0,d.useCurrentUser)(),{data:x,loading:b,error:y}=(()=>{let e,t,n,i=(0,s.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let l=(0,d.useClient)(e),r=(0,d.useProjectId)();e:{var o,a;let e;if(!l||!r){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e3.of)(lf),i[1]=e):e=i[1],t=e;break e}i[2]!==l||i[3]!==r?(o=l,a=r,e=o.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,eH.map)(e=>{if(!e||0===e.length)return lf;let t=e.filter(e=>e.resourceId===a&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,tH.isAfter)((0,t$.addWeeks)(new Date(n.createdAt),2),new Date)?lx:t.find(e=>"pending"===e.status&&(0,tH.isAfter)((0,t$.addWeeks)(new Date(e.createdAt),2),new Date))?lb:t.find(e=>"pending"===e.status&&(0,tN.isBefore)((0,t$.addWeeks)(new Date(e.createdAt),2),new Date))?ly:lf}),(0,e$.catchError)(e=>(console.error("Failed to fetch access requests",e),(0,e3.of)({loading:!1,error:!0,status:void 0}))),(0,eN.startWith)(lg)),i[2]=l,i[3]=r,i[4]=e):e=i[4],t=e}let c=t,{loading:u,error:p,status:m}=(0,eP.useObservable)(c,lg);return i[5]!==p||i[6]!==u||i[7]!==m?(n={data:m,loading:u,error:p},i[5]=p,i[6]=u,i[7]=m,i[8]=n):n=i[8],n})(),[v,j]=(0,a.useState)(!1),w="pending"===x||"declined"===x||v,S=f?.roles||[],_=1===S.length&&"viewer"===S[0].name,[I,T]=(0,a.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(t={style:"short"},h[0]=t):t=h[0];let R=(0,d.useListFormat)(t),{t:P}=(0,d.useTranslation)(C),E=(0,tu.useTelemetry)(),k=S.map(lw),D=R.formatToParts(k).map(lj);return h[1]!==D?(n={Roles:()=>(0,o.jsx)(o.Fragment,{children:D})},h[1]=D,h[2]=n):n=h[2],h[3]!==k||h[4]!==D.length?(i={count:D.length,roles:k},h[3]=k,h[4]=D.length,h[5]=i):i=h[5],h[6]!==g||h[7]!==P||h[8]!==n||h[9]!==i?(l=(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:(0,o.jsx)(d.Translate,{t:P,i18nKey:"banners.permission-check-banner.missing-permission",components:n,values:i,context:g})}),h[6]=g,h[7]=P,h[8]=n,h[9]=i,h[10]=l):l=h[10],h[11]!==_||h[12]!==w||h[13]!==y||h[14]!==b||h[15]!==x||h[16]!==T||h[17]!==P||h[18]!==E?(r=_&&x&&!y&&!b?{onClick:w?void 0:()=>{T(!0),E.log(ld)},text:P(w?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:w?"default":"primary",disabled:w,mode:w?"bleed":void 0}:void 0,h[11]=_,h[12]=w,h[13]=y,h[14]=b,h[15]=x,h[16]=T,h[17]=P,h[18]=E,h[19]=r):r=h[19],h[20]!==l||h[21]!==r?(c=(0,o.jsx)(ll,{content:l,action:r,"data-testid":"permission-check-banner",icon:m.ReadOnlyIcon}),h[20]=l,h[21]=r,h[22]=c):c=h[22],h[23]!==T||h[24]!==I?(u=I&&(0,o.jsx)(lp,{onClose:()=>T(!1),onRequestSubmitted:()=>{j(!0),T(!1)}}),h[23]=T,h[24]=I,h[25]=u):u=h[25],h[26]!==c||h[27]!==u?(p=(0,o.jsxs)(o.Fragment,{children:[c,u]}),h[26]=c,h[27]=u,h[28]=p):p=h[28],p}function lj(e){return"element"===e.type?(0,o.jsx)("code",{children:e.value},e.value):e.value}function lw(e){return e.title}let lS=(0,a.memo)(()=>{let e,t,n,i,l,r,a,u,p=(0,s.c)(30),h=(0,d.useDocumentPreviewStore)(),{selectedPerspectiveName:g}=(0,d.usePerspective)(),{params:f,groupIndex:x,routerPanesState:b,replaceCurrent:y,BackLink:v}=lI(),j=b[x]?.[0].id,w=b[x-1]?.[0],S=w?.id,_=!!w?.params?.rev;p[0]!==f?(e=f?.parentRefPath&&(0,td.fromString)(f.parentRefPath)||null,p[0]=f,p[1]=e):e=p[1];let I=e,{t:T}=(0,d.useTranslation)(C);e:{let e,n=I?.[0];if(!S||!n||!I){let e;p[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e3.of)({loading:!1}),p[2]=e):e=p[2],t=e;break e}if(p[3]!==h||p[4]!==S||p[5]!==I||p[6]!==n||p[7]!==g){let t,i=(0,c.getPublishedId)(S),l=(0,td.fromString)(n),r=l.findIndex(lC);p[9]!==I?(t=e=>{let{draft:t,published:n,version:i}=e;return{loading:!1,result:{availability:{draft:t.availability,published:n.availability,...i?.availability?{version:i.availability}:{}},refValue:(0,td.get)(i?.snapshot||t.snapshot||n.snapshot,I)?._ref}}},p[9]=I,p[10]=t):t=p[10],e=(0,e5.concat)((0,e3.of)({loading:!0}),h.unstable_observePathsDocumentPair(i,-1===r?l:l.slice(0,r),{version:g}).pipe((0,eG.debounceTime)(750),(0,eH.map)(t))),p[3]=h,p[4]=S,p[5]=I,p[6]=n,p[7]=g,p[8]=e}else e=p[8];t=e}let R=t;p[11]===Symbol.for("react.memo_cache_sentinel")?(n={loading:!0},p[11]=n):n=p[11];let P=(0,eP.useObservable)(R,n);p[12]!==f||p[13]!==P.loading||p[14]!==P.result||p[15]!==y?(i=()=>{P.loading||P.result?.refValue&&y({id:P.result.refValue,params:f})},p[12]=f,p[13]=P.loading,p[14]=P.result,p[15]=y,p[16]=i):i=p[16];let E=i;return S&&I&&!_&&!P.loading&&(P.result?.availability.draft.available||P.result?.availability.published.available)&&P.result?.refValue!==j?(p[17]!==v||p[18]!==E||p[19]!==P.result?.refValue||p[20]!==T?(l=P.result?.refValue?{onClick:E,icon:m.SyncIcon,text:T("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:v,icon:m.CloseIcon,text:T("banners.reference-changed-banner.reason-removed.close-button.text")},p[17]=v,p[18]=E,p[19]=P.result?.refValue,p[20]=T,p[21]=l):l=p[21],p[22]!==P.result?.refValue||p[23]!==T?(r=T(P.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text"),p[22]=P.result?.refValue,p[23]=T,p[24]=r):r=p[24],p[25]!==r?(a=(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:r}),p[25]=r,p[26]=a):a=p[26],p[27]!==l||p[28]!==a?(u=(0,o.jsx)(ll,{action:l,"data-testid":"reference-changed-banner",content:a,icon:m.WarningOutlineIcon,tone:"caution"}),p[27]=l,p[28]=a,p[29]=u):u=p[29],u):null});function lC(e){return"object"==typeof e&&"_key"in e}function l_(e){let t,n=(0,s.c)(2),{releaseId:i,draftDocument:l}=e,{t:r}=(0,d.useTranslation)(C),{firstDocument:a}=(0,d.useScheduledDraftDocument)(i),u=l?._id?(0,c.getPublishedId)(l._id):null,p=a?._id?(0,c.getPublishedId)(a._id):null,h=l?._rev,g=a?._system?.base?.rev;return u!==p||h&&g&&h===g?null:(n[0]!==r?(t=(0,o.jsx)(ll,{tone:"caution",icon:m.WarningOutlineIcon,content:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:r,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),n[0]=r,n[1]=t):t=n[1],t)}function lI(){return(0,a.useContext)(u.PaneRouterContext)}function lT(){let e,t,n,i,l,r,a,c,u,p,m=(0,s.c)(28),{t:h}=(0,d.useTranslation)(C),{t:g}=(0,d.useTranslation)(),{data:f}=(0,d.useArchivedReleases)(),{params:x,setParams:b}=lI();m[0]!==x||m[1]!==b?(e=()=>{b({...x,rev:x?.historyEvent||void 0,since:void 0,historyVersion:void 0})},m[0]=x,m[1]=b,m[2]=e):e=m[2];let y=e;if(m[3]!==f||m[4]!==x?.historyVersion){let e;m[6]!==x?.historyVersion?(e=e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===x?.historyVersion,m[6]=x?.historyVersion,m[7]=e):e=m[7],t=f.find(e),m[3]=f,m[4]=x?.historyVersion,m[5]=t}else t=m[5];let v=t;e:{if(v?.state==="published"){n="banners.published-release.description";break e}if(v&&(0,d.isCardinalityOneRelease)(v)){n="banners.archived-scheduled-draft.description";break e}n="banners.archived-release.description"}let j=n;m[8]!==v?.metadata.title||m[9]!==g?(i=v?.metadata.title||g("release.placeholder-untitled-release"),m[8]=v?.metadata.title,m[9]=g,m[10]=i):i=m[10];let w=i;return m[11]!==w?(l={title:w},m[11]=w,m[12]=l):l=m[12],m[13]!==v?(r=(0,d.getVersionInlineBadge)(v),m[13]=v,m[14]=r):r=m[14],m[15]!==r?(a={VersionBadge:r},m[15]=r,m[16]=a):a=m[16],m[17]!==j||m[18]!==h||m[19]!==l||m[20]!==a?(c=(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:h,i18nKey:j,values:l,components:a})}),m[17]=j,m[18]=h,m[19]=l,m[20]=a,m[21]=c):c=m[21],m[22]!==y||m[23]!==x?.archivedRelease?(u=x?.archivedRelease?void 0:{text:"Go back to published version",onClick:y},m[22]=y,m[23]=x?.archivedRelease,m[24]=u):u=m[24],m[25]!==c||m[26]!==u?(p=(0,o.jsx)(ll,{tone:"caution",content:c,action:u}),m[25]=c,m[26]=u,m[27]=p):p=m[27],p}lS.displayName="Memo(ReferenceChangedBanner)";let lR=e_.styled.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,lP=e=>{let t,n,i,l,r,c,u,p,h,g,f,x,b=(0,s.c)(24),{onClose:y,isLockedByCanvas:v}=e,{t:j}=(0,d.useTranslation)(C),w=(0,a.useRef)(null);b[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[w.current],b[0]=t):t=b[0],(0,ej.useClickOutsideEvent)(y,t),b[1]!==v||b[2]!==j?(n=j(v?"canvas.banner.popover-heading":"canvas.banner.editable.popover-heading"),b[1]=v,b[2]=j,b[3]=n):n=b[3];let S=n;b[4]!==v||b[5]!==j?(i=j(v?"canvas.banner.popover-description":"canvas.banner.editable.popover-description"),b[4]=v,b[5]=j,b[6]=i):i=b[6];let _=i;return b[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(lR,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),b[7]=l):l=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(ej.Text,{size:1,weight:"semibold",children:"Canvas"}),b[8]=r):r=b[8],b[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsxs)(ej.Flex,{paddingY:1,gap:2,children:[r,(0,o.jsx)(ej.Text,{size:1,muted:!0,children:(0,o.jsx)(m.ComposeSparklesIcon,{})})]}),b[9]=c):c=b[9],b[10]!==S?(u=(0,o.jsx)(ej.Box,{paddingTop:3,children:(0,o.jsx)(ej.Heading,{size:1,children:S})}),b[10]=S,b[11]=u):u=b[11],b[12]!==_?(p=(0,o.jsx)(ej.Box,{paddingTop:4,children:(0,o.jsx)(ej.Text,{size:1,children:_})}),b[12]=_,b[13]=p):p=b[13],b[14]!==u||b[15]!==p?(h=(0,o.jsxs)(ej.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[c,u,p]}),b[14]=u,b[15]=p,b[16]=h):h=b[16],b[17]!==j?(g=j("canvas.banner.popover-button-text"),b[17]=j,b[18]=g):g=b[18],b[19]!==g?(f=(0,o.jsx)(ej.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,o.jsx)(ev.Button,{mode:"bleed",text:g,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:m.LaunchIcon})}),b[19]=g,b[20]=f):f=b[20],b[21]!==f||b[22]!==h?(x=(0,o.jsx)(ej.Card,{radius:3,overflow:"hidden",width:0,ref:w,children:(0,o.jsxs)(ej.Container,{width:0,children:[l,h,f]})}),b[21]=f,b[22]=h,b[23]=x):x=b[23],x},lE=e=>{let t,n,i,l,r,c,u,p,h=(0,s.c)(21),{documentId:g}=e,{t:f}=(0,d.useTranslation)(C),[x,b]=(0,a.useState)(!1),y=(0,d.getDocumentVariantType)(g),{isLockedByCanvas:v}=(0,d.useCanvasCompanionDoc)(g);e:{let e;if(!v){let e;h[0]!==f?(e=f("canvas.banner.editable.linked-text"),h[0]=f,h[1]=e):e=h[1],t=e;break e}if("published"===y){let e;h[2]!==f?(e=f("canvas.banner.linked-text.published"),h[2]=f,h[3]=e):e=h[3],t=e;break e}if("draft"===y){let e;h[4]!==f?(e=f("canvas.banner.linked-text.draft"),h[4]=f,h[5]=e):e=h[5],t=e;break e}h[6]!==f?(e=f("canvas.banner.linked-text.version"),h[6]=f,h[7]=e):e=h[7],t=e}let j=t;h[8]===Symbol.for("react.memo_cache_sentinel")?(n=()=>b(lD),h[8]=n):n=h[8];let w=n;h[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>b(!1),h[9]=i):i=h[9];let S=i;return h[10]!==j?(l=(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:j}),h[10]=j,h[11]=l):l=h[11],h[12]!==v?(r=(0,o.jsx)(lP,{onClose:S,isLockedByCanvas:v}),h[12]=v,h[13]=r):r=h[13],h[14]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(ev.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:m.InfoOutlineIcon,onClick:w}),h[14]=c):c=h[14],h[15]!==x||h[16]!==r?(u=(0,o.jsx)(ev.Popover,{open:x,size:0,tone:"default",portal:!0,placement:"bottom-start",content:r,children:c}),h[15]=x,h[16]=r,h[17]=u):u=h[17],h[18]!==l||h[19]!==u?(p=(0,o.jsxs)(ej.Flex,{align:"center",gap:2,children:[l,u]}),h[18]=l,h[19]=u,h[20]=p):p=h[20],p};function lk(){let e,t,n,i,l=(0,s.c)(10),{documentId:r,displayed:a}=iV(),{t:c}=(0,d.useTranslation)(C),u=a?._id||r,{companionDoc:p}=(0,d.useCanvasCompanionDoc)(u),m=(0,d.useNavigateToCanvasDoc)(p?.canvasDocumentId,"banner");return p?(l[0]!==u?(e=(0,o.jsx)(lE,{documentId:u}),l[0]=u,l[1]=e):e=l[1],l[2]!==c?(t=c("canvas.banner.edit-in-canvas-action"),l[2]=c,l[3]=t):t=l[3],l[4]!==m||l[5]!==t?(n={mode:"ghost",text:t,onClick:m},l[4]=m,l[5]=t,l[6]=n):n=l[6],l[7]!==e||l[8]!==n?(i=(0,o.jsx)(ll,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:n}),l[7]=e,l[8]=n,l[9]=i):i=l[9],i):null}function lD(e){return!e}let lF=e=>{let t,n,i,l,r,a,c,u,p,h=(0,s.c)(27),{schemaType:g,selectedPerspective:f,reason:x}=e,{t:b}=(0,d.useTranslation)(C),{document:y}=(0,d.useWorkspace)(),{drafts:v}=y,{enabled:j}=v;h[0]!==j||h[1]!==g?(t=e=>{let{perspective:t}=e;return{disabled:!(0,d.isPerspectiveWriteable)({selectedPerspective:t,isDraftModelEnabled:j,schemaType:g}).result}},h[0]=j,h[1]=g,h[2]=t):t=h[2];let w=t;return h[3]!==x||h[4]!==b?(n="PUBLISHED_NOT_WRITEABLE"===x&&b("banners.choose-new-document-destination.cannot-create-published-document"),h[3]=x,h[4]=b,h[5]=n):n=h[5],h[6]!==x||h[7]!==b?(i="DRAFTS_NOT_WRITEABLE"===x&&b("banners.choose-new-document-destination.cannot-create-draft-document"),h[6]=x,h[7]=b,h[8]=i):i=h[8],h[9]!==x||h[10]!==f||h[11]!==b?(l="RELEASE_NOT_ACTIVE"===x&&(0,d.isReleaseDocument)(f)&&(0,o.jsx)(d.Translate,{t:b,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:f.metadata.title},components:{VersionBadge:(0,d.getVersionInlineBadge)(f)}}),h[9]=x,h[10]=f,h[11]=b,h[12]=l):l=h[12],h[13]!==b?(r=b("banners.choose-new-document-destination.choose-destination"),h[13]=b,h[14]=r):r=h[14],h[15]!==r?(a=(0,o.jsxs)(o.Fragment,{children:[" ",r]}),h[15]=r,h[16]=a):a=h[16],h[17]!==n||h[18]!==i||h[19]!==l||h[20]!==a?(c=(0,o.jsxs)(ej.Text,{size:1,children:[n,i,l,a]}),h[17]=n,h[18]=i,h[19]=l,h[20]=a,h[21]=c):c=h[21],h[22]!==w?(u=(0,o.jsx)(d.ReleasesNav,{menuItemProps:w}),h[22]=w,h[23]=u):u=h[23],h[24]!==u||h[25]!==c?(p=(0,o.jsx)(ll,{tone:"caution",icon:m.WarningOutlineIcon,content:(0,o.jsxs)(ej.Flex,{align:"center",gap:2,children:[c,u]})}),h[24]=u,h[25]=c,h[26]=p):p=h[26],p};function lA(){let e,t,n=(0,s.c)(5),{value:i}=iV(),{documentLinkedBannerContent:l}=(0,d.useSanityCreateConfig)().components??{};n[0]!==i?(e=(0,d.getSanityCreateLinkMetadata)(i),n[0]=i,n[1]=e):e=n[1];let r=e;return l&&r?(n[2]!==l||n[3]!==r?(t=(0,o.jsx)(ll,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,o.jsx)(l,{metadata:r})}),n[2]=l,n[3]=r,n[4]=t):t=n[4],t):null}function lV(e){let t,n,i,l,r,c,u,p,m,h,g,f,x=(0,s.c)(41),{documentId:b,currentRelease:y,isScheduledRelease:v}=e,j=y??d.LATEST;x[0]!==j?(t=(0,d.getReleaseTone)(j),x[0]=j,x[1]=t):t=x[1];let w=t,{t:S}=(0,d.useTranslation)(C),{t:_}=(0,d.useTranslation)(),{createVersion:I}=(0,d.useVersionOperations)(),T="string"==typeof y,[R,P]=(0,a.useState)(),E=(0,ew.useToast)();x[2]!==I||x[3]!==y||x[4]!==b||x[5]!==T||x[6]!==S||x[7]!==E?(n=async()=>{if(T||y._id){P({status:"creating",lastUpdate:new Date});let e=T?y:(0,d.getReleaseIdFromReleaseDocumentId)(y._id);try{await I(e,b),P({status:"created",lastUpdate:new Date})}catch(e){E.push({status:"error",closable:!0,title:S("banners.release.error.title"),description:S("banners.release.error.description",{message:e.message})}),P(void 0)}}},x[2]=I,x[3]=y,x[4]=b,x[5]=T,x[6]=S,x[7]=E,x[8]=n):n=x[8];let k=n,D=function(e){let t,n,i,l=(0,s.c)(4);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,l[0]=t):t=l[0];let[r,o]=(0,a.useState)(t);return 200!==l[1]?(n=()=>{let e=setInterval(()=>{o(new Date)},200);return()=>clearInterval(e)},i=[200],l[1]=200,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,a.useEffect)(n,i),r}(200),F=R?.status==="created"&&D.getTime()-R.lastUpdate.getTime()>1e3;return x[9]!==S?(i=S("banners.release.waiting.title"),x[9]=S,x[10]=i):i=x[10],x[11]!==S?(l=S("banners.release.waiting.description"),x[11]=S,x[12]=l):l=x[12],x[13]!==F||x[14]!==i||x[15]!==l?(r={status:"info",id:"add-document-to-release",enabled:F,closable:!0,title:i,description:l},x[13]=F,x[14]=i,x[15]=l,x[16]=r):r=x[16],(0,d.useConditionalToast)(r),x[17]!==y||x[18]!==T||x[19]!==_?(c=T?y:y?.metadata?.title||_("release.placeholder-untitled-release"),x[17]=y,x[18]=T,x[19]=_,x[20]=c):c=x[20],x[21]!==c?(u={title:c},x[21]=c,x[22]=u):u=x[22],x[23]!==y?(p=(0,d.getVersionInlineBadge)(y),x[23]=y,x[24]=p):p=x[24],x[25]!==p?(m={VersionBadge:p},x[25]=p,x[26]=m):m=x[26],x[27]!==S||x[28]!==m||x[29]!==u?(h=(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{i18nKey:"banners.release.not-in-release",t:S,values:u,components:m})}),x[27]=S,x[28]=m,x[29]=u,x[30]=h):h=x[30],x[31]!==k||x[32]!==v||x[33]!==S||x[34]!==w||x[35]!==R?(g=v?void 0:{text:S("banners.release.action.add-to-release"),tone:w,disabled:!!R,onClick:k,mode:"default"},x[31]=k,x[32]=v,x[33]=S,x[34]=w,x[35]=R,x[36]=g):g=x[36],x[37]!==h||x[38]!==g||x[39]!==w?(f=(0,o.jsx)(ll,{tone:w,content:h,action:g}),x[37]=h,x[38]=g,x[39]=w,x[40]=f):f=x[40],f}let lM=(0,tp.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),lL=e=>{let t,n,i,l,r,u,p,h,g,f,x,b,y,v,j,w=(0,s.c)(47),{displayed:S,documentId:_,schemaType:I,i18nKey:T,isEditBlocking:R}=e,{t:P}=(0,d.useTranslation)(C),[E,k]=(0,a.useState)(!1),[D,F]=(0,a.useState)(!1),A=(0,tu.useTelemetry)(),{publish:V,discardChanges:M}=(0,d.useDocumentOperation)(_,S?._type||"");w[0]!==V||w[1]!==A?(t=()=>{V.execute(),k(!0),A.log(lM,{liveEditResolveType:"publish"})},w[0]=V,w[1]=A,w[2]=t):t=w[2];let L=t;w[3]!==M||w[4]!==A?(n=()=>{M.execute(),F(!0),A.log(lM,{liveEditResolveType:"discard"})},w[3]=M,w[4]=A,w[5]=n):n=w[5];let z=n;w[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{k(!1),F(!1)},w[6]=i):i=w[6],(0,a.useEffect)(i);let O=nE();w[7]!==O||w[8]!==S?._id||w[9]!==I.name?(l=()=>{typeof S?._id>"u"||O.navigateDiffView({mode:"version",previousDocument:{type:I.name,id:(0,c.getPublishedId)(S?._id)},nextDocument:{type:I.name,id:(0,c.getDraftId)(S?._id)}})},w[7]=O,w[8]=S?._id,w[9]=I.name,w[10]=l):l=w[10];let B=l;return w[11]!==I.title?(r={schemaType:I.title},w[11]=I.title,w[12]=r):r=w[12],w[13]!==T||w[14]!==P||w[15]!==r?(u=(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:(0,o.jsx)(d.Translate,{t:P,i18nKey:T,values:r})}),w[13]=T,w[14]=P,w[15]=r,w[16]=u):u=w[16],w[17]!==P?(p=P("banners.obsolete-draft.actions.compare-draft.text"),w[17]=P,w[18]=p):p=w[18],w[19]!==B||w[20]!==p?(h=(0,o.jsx)(ev.Button,{text:p,mode:"ghost",onClick:B}),w[19]=B,w[20]=p,w[21]=h):h=w[21],w[22]!==P?(g=P("banners.obsolete-draft.actions.publish-draft.text"),w[22]=P,w[23]=g):g=w[23],w[24]!==R||w[25]!==P?(f=R?{content:P("banners.live-edit-draft-banner.publish.tooltip")}:{},w[24]=R,w[25]=P,w[26]=f):f=w[26],w[27]!==L||w[28]!==E||w[29]!==f||w[30]!==g?(x=(0,o.jsx)(ev.Button,{onClick:L,text:g,tooltipProps:f,loading:E,tone:"positive"}),w[27]=L,w[28]=E,w[29]=f,w[30]=g,w[31]=x):x=w[31],w[32]!==P?(b=P("banners.obsolete-draft.actions.discard-draft.text"),w[32]=P,w[33]=b):b=w[33],w[34]!==R||w[35]!==P?(y=R?{content:P("banners.live-edit-draft-banner.discard.tooltip")}:{},w[34]=R,w[35]=P,w[36]=y):y=w[36],w[37]!==z||w[38]!==D||w[39]!==b||w[40]!==y?(v=(0,o.jsx)(ev.Button,{onClick:z,text:b,tooltipProps:y,loading:D,tone:"caution"}),w[37]=z,w[38]=D,w[39]=b,w[40]=y,w[41]=v):v=w[41],w[42]!==x||w[43]!==v||w[44]!==u||w[45]!==h?(j=(0,o.jsx)(ll,{content:(0,o.jsxs)(ej.Flex,{align:"center",justify:"space-between",gap:2,children:[u,h,x,v]}),"data-testid":"live-edit-type-banner",icon:m.ErrorOutlineIcon}),w[42]=x,w[43]=v,w[44]=u,w[45]=h,w[46]=j):j=w[46],j};function lz(e){let t,n,i=(0,s.c)(4),{documentId:l,isPinnedDraftOrPublished:r}=e;i[0]!==l?(t={documentId:l},i[0]=l,i[1]=t):t=i[1];let a=(0,d.useOnlyHasVersions)(t);return(0,c.isVersionId)(l)&&a&&r?(i[2]!==l?(n=(0,o.jsx)(lO,{documentId:l}),i[2]=l,i[3]=n):n=i[3],n):null}function lO(e){let t,n,i,l,r,a,u,p,m,h=(0,s.c)(35),{documentId:g}=e,{data:f}=(0,d.useActiveReleases)(),x=(0,d.useSetPerspective)();h[0]!==g?(t=(0,c.getVersionFromId)(g)??"",h[0]=g,h[1]=t):t=h[1];let b=t;if(h[2]!==f||h[3]!==b){let e;h[5]!==b?(e=e=>e._id.includes(b),h[5]=b,h[6]=e):e=h[6],n=f.find(e),h[2]=f,h[3]=b,h[4]=n}else n=h[4];let y=n,{t:v}=(0,d.useTranslation)();h[7]!==g?(i={documentId:g},h[7]=g,h[8]=i):i=h[8];let{data:j}=(0,d.useDocumentVersions)(i);if(h[9]!==f||h[10]!==j||h[11]!==v){let e,t;h[13]!==j?(e=e=>j.find(t=>{let n=(0,c.getVersionFromId)(t)??"";return(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===n})&&!(0,d.isCardinalityOneRelease)(e),h[13]=j,h[14]=e):e=h[14],h[15]!==v?(t=e=>e.metadata.title||v("release.placeholder-untitled-release"),h[15]=v,h[16]=t):t=h[16],l=f.filter(e).map(t),h[9]=f,h[10]=j,h[11]=v,h[12]=l}else l=h[12];let w=l;h[17]!==y?(r=y&&(0,d.getReleaseTone)(y),h[17]=y,h[18]=r):r=h[18];let S=r,{t:_}=(0,d.useTranslation)(C);h[19]!==b||h[20]!==x?(a=async()=>{x(b)},h[19]=b,h[20]=x,h[21]=a):a=h[21];let I=a;return 0===w.length?null:(h[22]!==w[0]||h[23]!==w.length||h[24]!==_?(u=(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(ej.Flex,{direction:"row",gap:1,wrap:"wrap",children:w.length>1?(0,o.jsx)(d.Translate,{t:_,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,o.jsxs)(d.VersionInlineBadge,{children:[" ",w[0]]})},values:{count:w.length-1}}):(0,o.jsx)(d.Translate,{t:_,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,o.jsxs)(d.VersionInlineBadge,{children:[" ",w[0]]})}})})}),h[22]=w[0],h[23]=w.length,h[24]=_,h[25]=u):u=h[25],h[26]!==w.length||h[27]!==I||h[28]!==_||h[29]!==S?(p=w.length>0?{text:_("banners.release.action.open-to-edit"),tone:S,onClick:I,mode:"default"}:void 0,h[26]=w.length,h[27]=I,h[28]=_,h[29]=S,h[30]=p):p=h[30],h[31]!==u||h[32]!==p||h[33]!==S?(m=(0,o.jsx)(ll,{tone:S,"data-testid":"open-release-to-edit-banner",content:u,action:p}),h[31]=u,h[32]=p,h[33]=S,h[34]=m):m=h[34],m)}function lB(){let e,t,n=(0,s.c)(4),{revisionNotFound:i}=iV(),{t:l}=(0,d.useTranslation)(C);return i?(n[0]!==l?(e=l("banners.revision-not-found.description"),n[0]=l,n[1]=e):e=n[1],n[2]!==e?(t=(0,o.jsx)(ll,{tone:"caution","data-test-id":"revision-not-found-banner",icon:m.WarningOutlineIcon,content:(0,o.jsx)(ej.Text,{size:1,children:e})}),n[2]=e,n[3]=t):t=n[3],t):null}function lH(e){let t,n,i,l,r,a=(0,s.c)(12),{currentRelease:c}=e,u=c??d.LATEST;a[0]!==u?(t=(0,d.getReleaseTone)(u),a[0]=u,a[1]=t):t=a[1];let p=t,{t:h}=(0,d.useTranslation)();return a[2]!==c?(n=(0,d.formatRelativeLocalePublishDate)(c),a[2]=c,a[3]=n):n=a[3],a[4]!==n?(i={date:n},a[4]=n,a[5]=i):i=a[5],a[6]!==i||a[7]!==h?(l=(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:h,i18nKey:"release.banner.scheduled-for-publishing-on",values:i})}),a[6]=i,a[7]=h,a[8]=l):l=a[8],a[9]!==l||a[10]!==p?(r=(0,o.jsx)(ll,{tone:p,icon:m.LockIcon,content:l}),a[9]=l,a[10]=p,a[11]=r):r=a[11],r}function l$(){let e=(0,s.c)(18),{value:t,editState:n}=iV(),{selectedPerspective:i}=(0,d.usePerspective)(),l=(0,d.isGoingToUnpublish)(t)||n?.version&&(0,d.isGoingToUnpublish)(n?.version),{t:r}=(0,d.useTranslation)(C),{t:a}=(0,d.useTranslation)();if((0,d.isReleaseDocument)(i)&&l){let t,n,l,s,c,u,p;e[0]!==i.metadata?.title||e[1]!==a?(t=i.metadata?.title||a("release.placeholder-untitled-release"),e[0]=i.metadata?.title,e[1]=a,e[2]=t):t=e[2];let h=t;return e[3]!==h?(n={title:h},e[3]=h,e[4]=n):n=e[4],e[5]!==i?(l=(0,d.getVersionInlineBadge)(i),e[5]=i,e[6]=l):l=e[6],e[7]!==l?(s={VersionBadge:l},e[7]=l,e[8]=s):s=e[8],e[9]!==r||e[10]!==n||e[11]!==s?(c=(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:r,i18nKey:"banners.unpublished-release-banner.text",values:n,components:s})}),e[9]=r,e[10]=n,e[11]=s,e[12]=c):c=e[12],e[13]!==r?(u=(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:r,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),e[13]=r,e[14]=u):u=e[14],e[15]!==c||e[16]!==u?(p=(0,o.jsx)(ll,{tone:"critical",content:(0,o.jsxs)(ej.Stack,{space:2,children:[c,u]}),icon:m.UnpublishIcon}),e[15]=c,e[16]=u,e[17]=p):p=e[17],p}return null}let lN=(0,e_.styled)(ej.Stack)`
  ${({theme:e})=>e_.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,lG=e=>{let t,n,i,l,r=(0,s.c)(14),{documentId:a,schemaType:c,title:u}=e,p=a===c.name,h=c.description,{t:g}=(0,d.useTranslation)(C);if(!1===c.__experimental_formPreviewTitle)return null;r[0]!==h||r[1]!==p||r[2]!==c.name||r[3]!==c.title?(t=!p&&(0,o.jsxs)(ej.Inline,{space:1,children:[(0,o.jsx)(ej.Text,{muted:!0,size:1,children:c.title??c.name}),h&&(0,o.jsx)(ev.Tooltip,{content:h,placement:"right",children:(0,o.jsx)(m.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),r[0]=h,r[1]=p,r[2]=c.name,r[3]=c.title,r[4]=t):t=r[4];let f=!u;return r[5]!==g||r[6]!==u?(n=u??g("document-view.form-view.form-title-fallback"),r[5]=g,r[6]=u,r[7]=n):n=r[7],r[8]!==f||r[9]!==n?(i=(0,o.jsx)(ej.Heading,{as:"h2","data-heading":!0,muted:f,"data-testid":"document-panel-document-title",children:n}),r[8]=f,r[9]=n,r[10]=i):i=r[10],r[11]!==t||r[12]!==i?(l=(0,o.jsxs)(lN,{marginBottom:6,space:4,children:[t,i]}),r[11]=t,r[12]=i,r[13]=l):l=r[13],l},lU=e=>e.preventDefault(),lq=(0,a.forwardRef)(function(e,t){let n,i,l,r,c,u,p,m,h,g,f,x,b,y,v,j=(0,s.c)(77),{hidden:w,margins:S}=e,{collapsedFieldSets:_,collapsedPaths:I,displayed:T,editState:R,documentId:P,documentType:E,fieldActions:k,onChange:D,validation:F,ready:A,formState:V,onFocus:M,connectionState:L,onBlur:z,onSetCollapsedPath:O,onPathOpen:B,onSetCollapsedFieldSet:H,onSetActiveFieldGroup:$,openPath:N,compareValue:G,hasUpstreamVersion:U}=iV(),{selectedReleaseId:q,selectedPerspective:W}=(0,d.usePerspective)(),K=(0,d.useDocumentStore)(),Y=(0,d.useDocumentPresence)(P),{title:X}=iX(),[J]=(0,a.useState)(lW),Q=R?.transactionSyncLock?.enabled,{t:Z}=(0,d.useTranslation)(C);j[0]!==Z?(n=Z("document-view.form-view.sync-lock-toast.title"),j[0]=Z,j[1]=n):n=j[1],j[2]!==Z?(i=Z("document-view.form-view.sync-lock-toast.description"),j[2]=Z,j[3]=i):i=j[3],j[4]!==Q||j[5]!==n||j[6]!==i?(l={id:"sync-lock",status:"warning",enabled:Q,title:n,description:i,closable:!0},j[4]=Q,j[5]=n,j[6]=i,j[7]=l):l=j[7],(0,d.useConditionalToast)(l),j[8]!==P||j[9]!==K.pair||j[10]!==E||j[11]!==J||j[12]!==q?(r=()=>{let e=K.pair.documentEvents(P,E,q).pipe((0,eU.tap)(e=>{var t,n;let i,l,r;"mutation"===e.type&&J.publish((i=(t=e).mutations.map(e=>e.patch).filter(Boolean),{type:"mutation",snapshot:t.document,patches:(0,d.fromMutationPatches)(t.origin,i)})),"rebase"===e.type&&J.publish((l=(n=e).remoteMutations.map(e=>e.patch).filter(Boolean),r=n.localMutations.map(e=>e.patch).filter(Boolean),{type:"rebase",snapshot:n.document,patches:(0,d.fromMutationPatches)("remote",l).concat((0,d.fromMutationPatches)("local",r))}))})).subscribe();return()=>{e.unsubscribe()}},j[8]=P,j[9]=K.pair,j[10]=E,j[11]=J,j[12]=q,j[13]=r):r=j[13],j[14]!==P||j[15]!==K||j[16]!==E||j[17]!==J||j[18]!==q?(c=[P,K,E,J,q],j[14]=P,j[15]=K,j[16]=E,j[17]=J,j[18]=q,j[19]=c):c=j[19],(0,a.useEffect)(r,c);let ee=!!T?._rev;j[20]!==J||j[21]!==T?(u=()=>{J.publish({type:"mutation",patches:[],snapshot:T})},j[20]=J,j[21]=T,j[22]=u):u=j[22];let et=(0,a.useEffectEvent)(u);j[23]!==et||j[24]!==ee?(p=()=>{ee&&et()},j[23]=et,j[24]=ee,j[25]=p):p=j[25],j[26]!==ee?(m=[ee],j[26]=ee,j[27]=m):m=j[27],(0,a.useEffect)(p,m);let[en,ei]=(0,a.useState)(null),[el,er]=(0,a.useState)(!1);j[28]!==el||j[29]!==en||j[30]!==V?.focusPath.length||j[31]!==A?(h=()=>{!el&&A&&!V?.focusPath.length&&en&&(er(!0),(0,ew.focusFirstDescendant)(en))},j[28]=el,j[29]=en,j[30]=V?.focusPath.length,j[31]=A,j[32]=h):h=j[32];let eo=V?.focusPath.length;j[33]!==el||j[34]!==en||j[35]!==A||j[36]!==eo?(g=[el,en,eo,A],j[33]=el,j[34]=en,j[35]=A,j[36]=eo,j[37]=g):g=j[37],(0,a.useEffect)(h,g),j[38]!==t?(f=e=>{ei(e),"function"==typeof t?t(e):t&&(t.current=e)},j[38]=t,j[39]=f):f=j[39];let es=f,ea="reconnecting"===L||V?.readOnly||!R?.ready,ed=ea?"true":void 0;return j[40]!==_||j[41]!==I||j[42]!==G||j[43]!==L||j[44]!==P||j[45]!==R?.draft||j[46]!==R?.published||j[47]!==k||j[48]!==V||j[49]!==U||j[50]!==w||j[51]!==ea||j[52]!==z||j[53]!==D||j[54]!==M||j[55]!==B||j[56]!==$||j[57]!==H||j[58]!==O||j[59]!==N||j[60]!==J||j[61]!==Y||j[62]!==W||j[63]!==Z||j[64]!==X||j[65]!==F?(x="connecting"!==L||R?.draft||R?.published?null===V||w?(0,o.jsx)(ej.Box,{padding:2,children:(0,o.jsx)(ej.Text,{children:Z("document-view.form-view.form-hidden")})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(lG,{documentId:P,schemaType:V.schemaType,title:X}),(0,o.jsx)(d.FormBuilder,{__internal_fieldActions:k,__internal_patchChannel:J,changed:V.changed,collapsedFieldSets:_,collapsedPaths:I,compareValue:G??void 0,focused:V.focused,focusPath:V.focusPath,groups:V.groups,id:"root",members:V.members,onChange:D,onFieldGroupSelect:$,onPathBlur:z,onPathFocus:M,onPathOpen:B,onSetFieldSetCollapsed:H,onSetPathCollapsed:O,openPath:N,perspective:W,hasUpstreamVersion:U,presence:Y,readOnly:ea,schemaType:V.schemaType,validation:F,value:V.value})]}):(0,o.jsx)(ik,{ms:300,children:(0,o.jsxs)(ej.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,o.jsx)(ej.Spinner,{muted:!0}),(0,o.jsx)(ej.Box,{marginTop:3,children:(0,o.jsx)(ej.Text,{align:"center",muted:!0,size:1,children:Z("document-view.form-view.loading")})})]})}),j[40]=_,j[41]=I,j[42]=G,j[43]=L,j[44]=P,j[45]=R?.draft,j[46]=R?.published,j[47]=k,j[48]=V,j[49]=U,j[50]=w,j[51]=ea,j[52]=z,j[53]=D,j[54]=M,j[55]=B,j[56]=$,j[57]=H,j[58]=O,j[59]=N,j[60]=J,j[61]=Y,j[62]=W,j[63]=Z,j[64]=X,j[65]=F,j[66]=x):x=j[66],j[67]!==es||j[68]!==ed||j[69]!==x?(b=(0,o.jsx)(ej.Box,{as:"form",onSubmit:lU,ref:es,"data-testid":"form-view","data-read-only":ed,children:x}),j[67]=es,j[68]=ed,j[69]=x,j[70]=b):b=j[70],j[71]!==S||j[72]!==b?(y=(0,o.jsx)(d.PresenceOverlay,{margins:S,children:b}),j[71]=S,j[72]=b,j[73]=y):y=j[73],j[74]!==w||j[75]!==y?(v=(0,o.jsx)(ej.Container,{hidden:w,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:y}),j[74]=w,j[75]=y,j[76]=v):v=j[76],v});function lW(){return(0,d.createPatchChannel)()}function lK(){let e,t,n=(0,s.c)(11),{activeViewId:i,paneKey:l,views:r}=iV(),a=`${l}tabpanel`;if(n[0]!==i||n[1]!==l||n[2]!==a||n[3]!==r){let t;n[5]!==i||n[6]!==l||n[7]!==a?(t=(e,t)=>(0,o.jsx)(lY,{icon:e.icon,id:`${l}tab-${e.id}`,isActive:i===e.id,label:e.title,tabPanelId:a,viewId:0===t?null:e.id??null},e.id),n[5]=i,n[6]=l,n[7]=a,n[8]=t):t=n[8],e=r.map(t),n[0]=i,n[1]=l,n[2]=a,n[3]=r,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,o.jsx)(ej.TabList,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function lY(e){let t,n,i,l,r,a,d,c,u,p=(0,s.c)(20);p[0]!==e?({icon:t,id:n,isActive:i,label:l,tabPanelId:a,viewId:d,...r}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=i,p[4]=l,p[5]=r,p[6]=a,p[7]=d):(t=p[1],n=p[2],i=p[3],l=p[4],r=p[5],a=p[6],d=p[7]);let{ready:m,editState:h}=iV(),{setView:g}=lI();p[8]!==g||p[9]!==d?(c=()=>g(d),p[8]=g,p[9]=d,p[10]=c):c=p[10];let f=c,x=!m&&!h?.draft&&!h?.published;return p[11]!==f||p[12]!==t||p[13]!==n||p[14]!==i||p[15]!==l||p[16]!==r||p[17]!==x||p[18]!==a?(u=(0,o.jsx)(ev.Tab,{...r,"aria-controls":a,disabled:x,icon:t,id:n,label:l,onClick:f,selected:i}),p[11]=f,p[12]=t,p[13]=n,p[14]=i,p[15]=l,p[16]=r,p[17]=x,p[18]=a,p[19]=u):u=p[19],u}let lX={paneDataItems:[],routerPanes:[],resolvedPanes:[],maximizedPane:null,setMaximizedPane:()=>{}};function lJ(){return(0,a.useContext)(u.ResolvedPanesContext)??lX}let lQ=Object.freeze({}),lZ=Symbol("LOADING_PANE"),l0="documentPanelPortalElement",l1=(0,tp.defineEvent)({name:"Maximized Document Pane Clicked",version:1,description:"User pressed to maximize a document by click the focus pane button"}),l2=(0,tp.defineEvent)({name:"Maximized Document Pane Collapsed",version:1,description:"User disabled the maximization on a document pane by clicking the focus pane button"}),l3=(0,tp.defineEvent)({name:"Maximized Document Pane Navigated Via Breadcrumbs",version:1,description:"User navigated to a different document pane via the breadcrumbs in the document header"});function l4(e){let t,n,i,l,r,a,c,u,p=(0,s.c)(27),{paneData:m,index:h}=e,{pane:g}=m,f=(0,eE.useRouter)(),{t:x}=(0,d.useTranslation)(C),b=(0,eE.useRouterState)(),y=(0,tu.useTelemetry)();p[0]!==b?.panes?(t=b?.panes||[],p[0]=b?.panes,p[1]=t):t=p[1];let v=t,{perspectiveStack:j}=(0,d.usePerspective)(),w=g!==lZ&&"title"in g?g.title:null,S=g!==lZ&&"document"===g.type?g.options.id:null,_=g!==lZ&&"document"===g.type?g.options.type:null,I=S??"",T=_??"";p[2]!==j||p[3]!==I||p[4]!==T?(n={documentId:I,documentType:T,perspectiveStack:j},p[2]=j,p[3]=I,p[4]=T,p[5]=n):n=p[5];let{value:R,isLoading:P}=(0,d.useDocumentPreviewValues)(n);e:{if(S&&!P){let e;p[6]!==R?.title||p[7]!==x?(e=R?.title||x("panes.document-header-title.untitled.text"),p[6]=R?.title,p[7]=x,p[8]=e):e=p[8],i=e;break e}i=w}let E=i;p[9]!==m.groupIndex||p[10]!==f||p[11]!==v||p[12]!==y?(l=()=>{y.log(l3),f.navigate({panes:v.slice(0,m.groupIndex)})},p[9]=m.groupIndex,p[10]=f,p[11]=v,p[12]=y,p[13]=l):l=p[13];let k=l;if(!E&&!P)return null;p[14]!==E||p[15]!==x?(r=E||x("panes.document-header-title.untitled.text"),p[14]=E,p[15]=x,p[16]=r):r=p[16],p[17]!==E||p[18]!==x?(a=E||x("panes.document-header-title.untitled.text"),p[17]=E,p[18]=x,p[19]=a):a=p[19],p[20]!==a?(c={content:a},p[20]=a,p[21]=c):c=p[21];let D=+(0!==h);return p[22]!==k||p[23]!==D||p[24]!==r||p[25]!==c?(u=(0,o.jsx)(ev.Button,{mode:"bleed",text:r,tooltipProps:c,onClick:k,paddingLeft:D}),p[22]=k,p[23]=D,p[24]=r,p[25]=c,p[26]=u):u=p[26],u}function l5(e){let t,n,i=(0,s.c)(7),{paneDataItems:l,currentPaneIndex:r}=e;if(i[0]!==r||i[1]!==l){let e;i[3]!==r?(e=(e,t)=>{if(t>r)return null;let n=e.pane!==lZ&&"document"===e.pane.type;return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(l4,{paneData:e,index:t}),t<r&&(n?(0,o.jsx)(ej.Box,{padding:1,children:(0,o.jsx)(m.ArrowRightIcon,{})}):(0,o.jsx)(ej.Text,{children:"/"}))]},`breadcrumb-item-${e.key}-${t}`)},i[3]=r,i[4]=e):e=i[4],t=l.map(e),i[0]=r,i[1]=l,i[2]=t}else t=i[2];return i[5]!==t?(n=(0,o.jsx)(ej.Flex,{direction:"row",align:"center","data-testid":"document-header-breadcrumb",children:t}),i[5]=t,i[6]=n):n=i[6],n}function l6(){let e,t,n,i=(0,s.c)(23),{connectionState:l,schemaType:r,title:a,value:c,index:u}=iV(),{paneDataItems:p}=lJ(),{title:m,error:h}=iX(),{t:g}=(0,d.useTranslation)(C);i[0]!==p?(e=p.some(l8),i[0]=p,i[1]=e):e=i[1];let f=e;if("connecting"===l&&!c){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),i[2]=e):e=i[2],e}if(a){let e;return i[3]!==a?(e=(0,o.jsx)(o.Fragment,{children:a}),i[3]=a,i[4]=e):e=i[4],e}if(!c){let e,t,n=r?.title||r?.name;return i[5]!==g||i[6]!==n?(e=g("panes.document-header-title.new.text",{schemaType:n}),i[5]=g,i[6]=n,i[7]=e):e=i[7],i[8]!==e?(t=(0,o.jsx)(o.Fragment,{children:e}),i[8]=e,i[9]=t):t=i[9],t}if(h){let e,t;return i[10]!==h||i[11]!==g?(e=g("panes.document-header-title.error.text",{error:h}),i[10]=h,i[11]=g,i[12]=e):e=i[12],i[13]!==e?(t=(0,o.jsx)(o.Fragment,{children:e}),i[13]=e,i[14]=t):t=i[14],t}return i[15]!==m||i[16]!==f||i[17]!==u||i[18]!==p||i[19]!==g?(t=f?(0,o.jsx)(l5,{paneDataItems:p,currentPaneIndex:u}):m||(0,o.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:g("panes.document-header-title.untitled.text")}),i[15]=m,i[16]=f,i[17]=u,i[18]=p,i[19]=g,i[20]=t):t=i[20],i[21]!==t?(n=(0,o.jsx)(o.Fragment,{children:t}),i[21]=t,i[22]=n):n=i[22],n}function l8(e){return e.maximized}let l7=e=>{let t,n,i,l,r,a,c=(0,s.c)(16);c[0]!==e?({documentExists:t,...n}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]);let{isFavorited:u,isReady:p,favorite:h,unfavorite:g}=(0,d.useManageFavorite)(n),{t:f}=(0,d.useTranslation)(C),x=u?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";c[3]!==f||c[4]!==x?(i=f(x),c[3]=f,c[4]=x,c[5]=i):i=c[5];let b=i,y=u?g:h,v=!p||!t;return c[6]!==b?(l={content:(0,o.jsx)(ej.Text,{size:1,children:b}),placement:"right"},c[6]=b,c[7]=l):l=c[7],c[8]!==u?(r=(0,o.jsx)(ej.Text,{size:1,children:u?(0,o.jsx)(m.StarFilledIcon,{}):(0,o.jsx)(m.StarIcon,{})}),c[8]=u,c[9]=r):r=c[9],c[10]!==b||c[11]!==y||c[12]!==v||c[13]!==l||c[14]!==r?(a=(0,o.jsx)(ev.Button,{mode:"bleed",onClick:y,disabled:v,"aria-label":b,"aria-live":"assertive",tooltipProps:l,children:r}),c[10]=b,c[11]=y,c[12]=v,c[13]=l,c[14]=r,c[15]=a):a=c[15],a},l9=(0,a.memo)(function(){let e,t,n,i,l,r,a=(0,s.c)(24),{editState:c,connectionState:u,views:p,documentId:h,displayed:g}=iV(),{features:f}=i$(),{index:x,BackLink:b}=lI(),{activeWorkspace:y}=(0,d.useActiveWorkspace)(),v=p.length>1,{collapsed:j,isLast:w}=n9(),S=w&&!j?-1:0,_=f.backButton&&x>0,{t:I}=(0,d.useTranslation)(C);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(l6,{}),a[0]=e):e=a[0];let T=e;a[1]!==v?(t=v&&(0,o.jsx)(lK,{}),a[1]=v,a[2]=t):t=a[2];let R=t;a[3]!==b||a[4]!==_||a[5]!==I?(n=_&&(0,o.jsx)(ev.Button,{as:b,"data-as":"a",icon:m.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:I("pane-header.back-button.text")}}),a[3]=b,a[4]=_,a[5]=I,a[6]=n):n=a[6];let P=n,E=g?._id??h,k=g?._type??"";a[7]!==y.dataset||a[8]!==y.projectId?(i=[y.projectId,y.dataset],a[7]=y.dataset,a[8]=y.projectId,a[9]=i):i=a[9];let D=i.join("."),F=(c?.ready&&(c.version??c.draft??c.published)!==null)??!1;a[10]!==y.dataset||a[11]!==y.name||a[12]!==y.projectId||a[13]!==E||a[14]!==k||a[15]!==D||a[16]!==F?(l=(0,o.jsx)(d.CapabilityGate,{capability:"comlink",condition:"available",children:(0,o.jsx)(l7,{resourceType:"studio",documentId:E,documentType:k,resourceId:D,schemaName:y.name,projectId:y.projectId,dataset:y.dataset,documentExists:F})}),a[10]=y.dataset,a[11]=y.name,a[12]=y.projectId,a[13]=E,a[14]=k,a[15]=D,a[16]=F,a[17]=l):l=a[17];let A=l,V="connecting"===u&&!c?.draft&&!c?.published;return a[18]!==P||a[19]!==A||a[20]!==V||a[21]!==S||a[22]!==R?(r=(0,o.jsx)(iv,{loading:V,title:T,tabs:R,tabIndex:S,backButton:P,appendTitle:A}),a[18]=P,a[19]=A,a[20]=V,a[21]=S,a[22]=R,a[23]=r):r=a[23],r}),re=(0,e_.styled)(ej.Box)({position:"relative"}),rt=(0,e_.styled)(d.ScrollContainer)(({$disabled:e})=>e?{height:"100%"}:e_.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),rn=function(e){let t,n,i,l,r,u,p,m,h,g,f,x,b,y,v,j,w=(0,s.c)(113),{footerHeight:S,headerHeight:C,isInspectOpen:_,rootElement:I,setDocumentPanelPortalElement:T,footer:R}=e,{activeViewId:P,displayed:E,documentId:k,editState:D,inspector:F,value:A,views:V,ready:M,schemaType:L,permissions:z,isPermissionsLoading:O}=iV();if(w[0]!==A){let e=(0,d.getSanityCreateLinkMetadata)(A);t=(0,d.isSanityCreateLinked)(e),w[0]=A,w[1]=t}else t=w[1];let B=t,{params:H}=lI(),{collapsed:$}=n3(),{collapsed:N}=n9(),G=(0,ej.usePortal)(),{features:U}=i$(),[q,W]=(0,a.useState)(null),[K,Y]=(0,a.useState)(null),X=(0,a.useRef)(null),J=(0,d.useWorkspace)(),Q=A._createdAt?"update":"create";w[2]!==P||w[3]!==V?(n=V.find(e=>e.id===P)||V[0]||{type:"form"},w[2]=P,w[3]=V,w[4]=n):n=w[4];let Z=n,ee=U.splitPanes&&q||G.element;e:{let e;if($){let e,t=C||0,n=S?S+2:2;w[5]!==t||w[6]!==n?(e=[t,0,n,0],w[5]=t,w[6]=n,w[7]=e):e=w[7],i=e;break e}w[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],w[8]=e):e=w[8],i=e}let et=i,en="form"!==Z.type;w[9]!==Z.component||w[10]!==Z.options||w[11]!==Z.type||w[12]!==E||w[13]!==k||w[14]!==D?.draft||w[15]!==D?.published||w[16]!==L||w[17]!==A?(l=()=>{if("component"===Z.type&&Z.component){let e=Z.component;return(0,o.jsx)(e,{document:{draft:D?.draft||null,displayed:E||A,historical:E,published:D?.published||null},documentId:k,options:Z.options,schemaType:L})}return!1},w[9]=Z.component,w[10]=Z.options,w[11]=Z.type,w[12]=E,w[13]=k,w[14]=D?.draft,w[15]=D?.published,w[16]=L,w[17]=A,w[18]=l):l=w[18],w[19]!==l?(r=l(),w[19]=l,w[20]=r):r=w[20];let ei=r;w[21]!==K?(u=()=>{K?.scrollTo&&K.scrollTo(0,0)},w[21]=K,w[22]=u):u=w[22],w[23]!==k||w[24]!==K?(p=[k,K],w[23]=k,w[24]=K,w[25]=p):p=w[25],(0,a.useEffect)(u,p),w[26]!==ee||w[27]!==T?(m=()=>{ee&&T(ee)},h=[ee,T],w[26]=ee,w[27]=T,w[28]=m,w[29]=h):(m=w[28],h=w[29]),(0,a.useEffect)(m,h),w[30]!==E||w[31]!==_||w[32]!==A?(g=_?(0,o.jsx)(li,{value:E||A}):null,w[30]=E,w[31]=_,w[32]=A,w[33]=g):g=w[33];let el=g,er=!!(!N&&F),{selectedPerspective:eo,selectedReleaseId:es,selectedPerspectiveName:ea}=(0,d.usePerspective)(),ed=H?.historyVersion;w[34]!==E||w[35]!==k||w[36]!==ed?(f={historyVersion:ed,displayed:E,documentId:k},w[34]=E,w[35]=k,w[36]=ed,w[37]=f):f=w[37];let ec=(0,d.useFilteredReleases)(f);t:{let e,t,n,i,l,r,s,a,u,p,m,h,g,f,b;if(H?.historyVersion){let e;w[38]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(lT,{}),w[38]=e):e=w[38],x=e;break t}w[39]!==eo?(e=(0,d.isReleaseDocument)(eo)&&(0,d.isReleaseScheduledOrScheduling)(eo),w[39]=eo,w[40]=e):e=w[40];let y=e,v=!!(y&&E?._id&&(0,c.getVersionFromId)(E?._id)===es);if(w[41]!==D||w[42]!==L||w[43]!==eo||w[44]!==J.document.drafts.enabled?(n=function({isSelectedPerspectiveWriteable:e,editState:t}){return(0,d.isNewDocument)(t)&&!e.result}({isSelectedPerspectiveWriteable:t=(0,d.isPerspectiveWriteable)({selectedPerspective:eo,isDraftModelEnabled:J.document.drafts.enabled,schemaType:L}),editState:D}),w[41]=D,w[42]=L,w[43]=eo,w[44]=J.document.drafts.enabled,w[45]=t,w[46]=n):(t=w[45],n=w[46]),n){let e;w[47]!==t.reason||w[48]!==t.result||w[49]!==L||w[50]!==eo?(e=!t.result&&(0,o.jsx)(lF,{schemaType:L,selectedPerspective:eo,reason:t.reason}),w[47]=t.reason,w[48]=t.result,w[49]=L,w[50]=eo,w[51]=e):e=w[51],x=e;break t}if(v){let e;w[52]!==eo?(e=(0,o.jsx)(lH,{currentRelease:eo}),w[52]=eo,w[53]=e):e=w[53],x=e;break t}w[54]!==ec.currentReleases?(i=ec.currentReleases.find(ri),w[54]=ec.currentReleases,w[55]=i):i=w[55];let j=i,S=E?._id&&(0,c.isDraftId)(E._id);if("drafts"===eo&&j&&S){let e;w[56]!==E||w[57]!==j._id?(e=(0,o.jsx)(l_,{releaseId:j._id,draftDocument:E}),w[56]=E,w[57]=j._id,w[58]=e):e=w[58],x=e;break t}w[59]!==eo?(l=(0,d.isSystemBundle)(eo),w[59]=eo,w[60]=l):l=w[60];let C=l,_=D?.version&&(0,d.isGoingToUnpublish)(D?.version);if(!(0,d.isSystemBundle)(eo)&&E?._id&&(0,c.getVersionFromId)(E._id)!==ea&&M&&!C&&!1===(0,d.isNewDocument)(D)&&!_){let e;w[61]!==y||w[62]!==eo||w[63]!==A._id?(e=(0,o.jsx)(lV,{documentId:A._id,currentRelease:eo,isScheduledRelease:y}),w[61]=y,w[62]=eo,w[63]=A._id,w[64]=e):e=w[64],x=e;break t}let I=function({editState:e,workspace:t,schemaType:n}){if(!e?.ready)return{result:void 0};let i=null!==e.draft,{document:{drafts:{enabled:l}}}=t;return i?l?!0===n.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}:{result:!1}}({editState:D,workspace:J,schemaType:L});if("form"===Z.type&&!es&&I.result){if("DRAFT_MODEL_INACTIVE"===I.reason){let e;w[65]!==E||w[66]!==k||w[67]!==L?(e=(0,o.jsx)(lL,{displayed:E,documentId:k,schemaType:L,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),w[65]=E,w[66]=k,w[67]=L,w[68]=e):e=w[68],x=e;break t}if("LIVE_EDIT_ACTIVE"===I.reason){let e;w[69]!==E||w[70]!==k||w[71]!==L?(e=(0,o.jsx)(lL,{displayed:E,documentId:k,schemaType:L,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),w[69]=E,w[70]=k,w[71]=L,w[72]=e):e=w[72],x=e;break t}}if("form"!==Z.type||O){x=null;break t}w[73]!==B?(r=B&&(0,o.jsx)(lA,{}),w[73]=B,w[74]=r):r=w[74],w[75]!==z?.granted||w[76]!==Q?(s=!z?.granted&&(0,o.jsx)(lv,{requiredPermission:Q}),w[75]=z?.granted,w[76]=Q,w[77]=s):s=w[77],w[78]===Symbol.for("react.memo_cache_sentinel")?(a=(0,o.jsx)(lB,{}),u=(0,o.jsx)(lS,{}),p=(0,o.jsx)(la,{}),m=(0,o.jsx)(lk,{}),h=(0,o.jsx)(lr,{}),g=(0,o.jsx)(l$,{}),w[78]=a,w[79]=u,w[80]=p,w[81]=m,w[82]=h,w[83]=g):(a=w[78],u=w[79],p=w[80],m=w[81],h=w[82],g=w[83]);let T=E?._id??k;w[84]!==C||w[85]!==T?(f=(0,o.jsx)(lz,{documentId:T,isPinnedDraftOrPublished:C}),w[84]=C,w[85]=T,w[86]=f):f=w[86],w[87]!==r||w[88]!==s||w[89]!==f?(b=(0,o.jsxs)(o.Fragment,{children:[r,s,a,u,p,m,h,g,f]}),w[87]=r,w[88]=s,w[89]=f,w[90]=b):b=w[90],x=b}let eu=x;w[91]!==K?(b={documentScrollElement:K},w[91]=K,w[92]=b):b=w[92];let ep=b,em=U.resizablePanes||!er;return w[93]!==ei||w[94]!==eu||w[95]!==K||w[96]!==R||w[97]!==en||w[98]!==el||w[99]!==$||w[100]!==et||w[101]!==ee||w[102]!==ep||w[103]!==em?(y=em&&(0,o.jsxs)(ej.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,o.jsxs)(d.LegacyLayerProvider,{zOffset:"paneHeader",children:[eu,(0,o.jsx)(l9,{})]}),(0,o.jsx)(re,{flex:2,children:(0,o.jsx)(ej.PortalProvider,{element:ee,__unstable_elements:ep,children:(0,o.jsx)(ej.BoundaryElementProvider,{element:K,children:(0,o.jsxs)(d.VirtualizerScrollInstanceProvider,{scrollElement:K,containerElement:X,children:[(0,o.jsxs)(rt,{$disabled:$||!1,"data-testid":"document-panel-scroller",ref:Y,children:[(0,o.jsx)(lq,{hidden:en,margins:et,ref:X}),ei]}),el,(0,o.jsx)("div",{"data-testid":"document-panel-portal",ref:W})]})})})}),R]}),w[93]=ei,w[94]=eu,w[95]=K,w[96]=R,w[97]=en,w[98]=el,w[99]=$,w[100]=et,w[101]=ee,w[102]=ep,w[103]=em,w[104]=y):y=w[104],w[105]!==k||w[106]!==I||w[107]!==L||w[108]!==er?(v=er&&(0,o.jsx)(ej.BoundaryElementProvider,{element:I,children:(0,o.jsx)(i1,{documentId:k,documentType:L.name,flex:1})}),w[105]=k,w[106]=I,w[107]=L,w[108]=er,w[109]=v):v=w[109],w[110]!==y||w[111]!==v?(j=(0,o.jsx)(ie,{children:(0,o.jsxs)(ej.Flex,{height:"fill",children:[y,v]})}),w[110]=y,w[111]=v,w[112]=j):j=w[112],j};function ri(e){return(0,d.isCardinalityOneRelease)(e)&&(0,d.isReleaseScheduledOrScheduling)(e)}rn.displayName="DocumentPanel";let rl=e=>{let t,n,i,l,r,o,c,u=(0,s.c)(26),{id:p,type:h,revision:g,release:f}=e,{restore:x}=(0,d.useDocumentOperation)(p,h,f),{revisionNotFound:b}=iV(),y=(0,d.useDocumentOperationEvent)(p,h),{navigateIntent:v}=(0,eE.useRouter)(),j=(0,a.useRef)(y),[w,S]=(0,a.useState)(!1),{t:_}=(0,d.useTranslation)(C);u[0]!==x||u[1]!==g?(t=()=>{x.execute(g),S(!1)},u[0]=x,u[1]=g,u[2]=t):t=u[2];let I=t;u[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{S(!1)},u[3]=n):n=u[3];let T=n;u[4]!==y||u[5]!==p||u[6]!==v||u[7]!==h?(i=()=>{y&&y!==j.current&&("success"===y.type&&"restore"===y.op&&v("edit",{id:p,type:h}),j.current=y)},l=[y,p,v,h],u[4]=y,u[5]=p,u[6]=v,u[7]=h,u[8]=i,u[9]=l):(i=u[8],l=u[9]),(0,a.useEffect)(i,l),u[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{S(!0)},u[10]=r):r=u[10];let R=r;e:{if(w){let e,t;u[11]!==_?(e=_("action.restore.confirm.message"),u[11]=_,u[12]=e):e=u[12],u[13]!==I||u[14]!==e?(t={type:"confirm",tone:"critical",onCancel:T,onConfirm:I,message:e},u[13]=I,u[14]=e,u[15]=t):t=u[15],o=t;break e}o=null}let P=o,E="@initial"===g,k=void 0===g;t:{let e,t,n;if(k||b){c=null;break t}u[16]!==_?(e=_("action.restore.label"),u[16]=_,u[17]=e):e=u[17];let i=E?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";u[18]!==_||u[19]!==i?(t=_(i),u[18]=_,u[19]=i,u[20]=t):t=u[20],u[21]!==P||u[22]!==E||u[23]!==t||u[24]!==e?(n={label:e,tone:"caution",onHandle:R,title:t,icon:m.RevertIcon,dialog:P,disabled:E},u[21]=P,u[22]=E,u[23]=t,u[24]=e,u[25]=n):n=u[25],c=n}return c};function rr(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}rl.action="restore",rl.displayName="HistoryRestoreAction";let ro=(0,eA.default)(rr);function rs(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],r=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}r+=l.length;let o=[];for(let e of i)o.find(t=>t.key===e.id)||o.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){let i=n[t],l=i.group&&o.find(e=>e.key===i.group),a="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:a,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},o.push(l)),l?l.children.push({type:"item",key:`${r+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:`${r+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...o,...l]}let ra=["left","bottom"],rd={small:0,medium:1,large:2,full:"auto"};function rc(e){let t,n,i,l=(0,s.c)(16),{dialog:r,referenceElement:a}=e,{t:c}=(0,d.useTranslation)(C),{cancelButtonIcon:u,cancelButtonText:p,confirmButtonIcon:m,confirmButtonText:h,message:g,onCancel:f,onConfirm:x,tone:b}=r;return l[0]!==p||l[1]!==c?(t=p||c("confirm-dialog.cancel-button.fallback-text"),l[0]=p,l[1]=c,l[2]=t):t=l[2],l[3]!==h||l[4]!==c?(n=h||c("confirm-dialog.confirm-button.fallback-text"),l[3]=h,l[4]=c,l[5]=n):n=l[5],l[6]!==u||l[7]!==m||l[8]!==g||l[9]!==f||l[10]!==x||l[11]!==a||l[12]!==t||l[13]!==n||l[14]!==b?(i=(0,o.jsx)(tc.ConfirmPopover,{cancelButtonIcon:u,cancelButtonText:t,confirmButtonIcon:m,confirmButtonText:n,message:g,onCancel:f,onConfirm:x,open:!0,referenceElement:a,tone:b,placement:"top",fallbackPlacements:ra}),l[6]=u,l[7]=m,l[8]=g,l[9]=f,l[10]=x,l[11]=a,l[12]=t,l[13]=n,l[14]=b,l[15]=i):i=l[15],i}function ru(e){let t,n,i,l=(0,s.c)(12),{dialog:r}=e,c=(0,a.useId)();l[0]!==r.footer?(t=r.footer&&(0,o.jsx)(ej.Box,{paddingX:4,paddingY:3,children:r.footer}),l[0]=r.footer,l[1]=t):t=l[1];let u=t,p=!1===r.showCloseButton,m=void 0===r.width?1:rd[r.width];return l[2]!==r.content?(n=(0,o.jsx)(ej.Box,{padding:4,children:r.content}),l[2]=r.content,l[3]=n):n=l[3],l[4]!==r.header||l[5]!==r.onClose||l[6]!==c||l[7]!==u||l[8]!==p||l[9]!==m||l[10]!==n?(i=(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,o.jsx)(ew.Dialog,{animate:!0,__unstable_hideCloseButton:p,footer:u,header:r.header,id:c,onClose:r.onClose,onClickOutside:r.onClose,width:m,children:n})}),l[4]=r.header,l[5]=r.onClose,l[6]=c,l[7]=u,l[8]=p,l[9]=m,l[10]=n,l[11]=i):i=l[11],i}function rp(e){let t,n,i=(0,s.c)(5),{dialog:l,referenceElement:r}=e;return i[0]!==l?(t=(0,o.jsx)(rm,{dialog:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==r||i[3]!==t?(n=(0,o.jsx)(ej.Popover,{content:t,fallbackPlacements:ra,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:r}),i[2]=r,i[3]=t,i[4]=n):n=i[4],n}function rm(e){let t,n,i,l=(0,s.c)(6),{dialog:r}=e,{content:d,onClose:c}=r,{isTopLayer:u}=(0,ej.useLayer)(),p=(0,a.useRef)(null);return l[0]!==u||l[1]!==c?(t=e=>{"Escape"===e.key&&u&&c()},l[0]=u,l[1]=c,l[2]=t):t=l[2],(0,ej.useGlobalKeyDown)(t),l[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[p.current],l[3]=n):n=l[3],(0,ej.useClickOutsideEvent)(u&&c,n),l[4]!==d?(i=(0,o.jsx)("div",{ref:p,children:d}),l[4]=d,l[5]=i):i=l[5],i}function rh(e){let t,n=(0,s.c)(3),{children:i}=e,{element:l,elements:r}=(0,ej.usePortal)(),a=r?.[l0]||l;return n[0]!==i||n[1]!==a?(t=(0,o.jsx)(ej.PortalProvider,{element:a,children:i}),n[0]=i,n[1]=a,n[2]=t):t=n[2],t}function rg(e){let t,n,i=(0,s.c)(17),{dialog:l,referenceElement:r}=e,d=void 0===r?null:r,c=(0,a.useId)();if("confirm"===l.type){let e;return i[0]!==l||i[1]!==d?(e=(0,o.jsx)(rc,{dialog:l,referenceElement:d}),i[0]=l,i[1]=d,i[2]=e):e=i[2],e}if("popover"===l.type){let e;return i[3]!==l||i[4]!==d?(e=(0,o.jsx)(rp,{dialog:l,referenceElement:d}),i[3]=l,i[4]=d,i[5]=e):e=i[5],e}if("dialog"===l.type||!l.type){let e;return i[6]!==l?(e=(0,o.jsx)(rh,{children:(0,o.jsx)(ru,{dialog:l})}),i[6]=l,i[7]=e):e=i[7],e}if("custom"===l.type){let e,t=l?.component;return i[8]!==t?(e=(0,o.jsx)(rh,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn(`Unsupported modal type ${l.type}`),i[10]!==l.content||i[11]!==l.type?(t=l.content||(0,o.jsxs)(ej.Text,{size:1,children:["Unexpected modal type (",(0,o.jsx)("code",{children:l.type}),")"]}),i[10]=l.content,i[11]=l.type,i[12]=t):t=i[12],i[13]!==c||i[14]!==t||i[15]!==l.onClose?(n=(0,o.jsx)(ev.Dialog,{id:c,onClose:l.onClose,onClickOutside:l.onClose,width:1,children:t}),i[13]=c,i[14]=t,i[15]=l.onClose,i[16]=n):n=i[16],n}let rf=(0,a.memo)(function(e){let t,n,i,l,r=(0,s.c)(9),{actionStates:c,children:u,referenceElement:p}=e,[m,h]=(0,a.useState)(-1),g=c[m];r[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{h(e)},r[0]=t):t=r[0];let f=t;r[1]!==u?(n=u({handleAction:f}),r[1]=u,r[2]=n):n=r[2];let x=n;return r[3]!==g||r[4]!==p?(i=g&&g.dialog&&(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,o.jsx)(rg,{dialog:g.dialog,referenceElement:p})}),r[3]=g,r[4]=p,r[5]=i):i=r[5],r[6]!==x||r[7]!==i?(l=(0,o.jsxs)(o.Fragment,{children:[i,x]}),r[6]=x,r[7]=i,r[8]=l):l=r[8],l});function rx(e){let t,n,i,l=(0,s.c)(10),{actionStates:r,disabled:c}=e,u=(0,a.useId)(),[p,m]=(0,a.useState)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={placement:"top-end",portal:!0,preventOverflow:!0},l[0]=t):t=l[0];let h=t,{t:g}=(0,d.useTranslation)(C);l[1]!==r||l[2]!==c||l[3]!==u||l[4]!==g?(n=e=>{let{handleAction:t}=e;return(0,o.jsx)(ev.MenuButton,{id:`${u}-action-menu`,button:(0,o.jsx)(d.ContextMenuButton,{"aria-label":g("buttons.action-menu-button.aria-label"),disabled:c,"data-testid":"action-menu-button",tooltipProps:{content:g("buttons.action-menu-button.tooltip")}}),menu:(0,o.jsx)(ej.Menu,{padding:1,children:r.map((e,n)=>(0,o.jsx)(rb,{actionState:e,disabled:c,index:n,onAction:t},n))}),popover:h,ref:m})},l[1]=r,l[2]=c,l[3]=u,l[4]=g,l[5]=n):n=l[5];let f=n;return l[6]!==r||l[7]!==p||l[8]!==f?(i=(0,o.jsx)(rf,{actionStates:r,referenceElement:p,children:f}),l[6]=r,l[7]=p,l[8]=f,l[9]=i):i=l[9],i}function rb(e){let t,n,i,l,r,a=(0,s.c)(20),{actionState:d,disabled:c,index:u,onAction:p}=e,{onHandle:m}=d;a[0]!==u||a[1]!==p||a[2]!==m?(t=()=>{p(u),m&&m()},a[0]=u,a[1]=p,a[2]=m,a[3]=t):t=a[3];let h=t;a[4]!==d.shortcut?(n=d.shortcut?String(d.shortcut).split("+").map(ry):void 0,a[4]=d.shortcut,a[5]=n):n=a[5];let g=n;a[6]!==d.label?(i=d.label.replace(" ",""),a[6]=d.label,a[7]=i):i=a[7];let f=`action-${i}`,x=c||!!d.disabled;return a[8]!==d.disabled||a[9]!==d.title?(l=d.disabled&&{tooltipProps:{content:d.title}},a[8]=d.disabled,a[9]=d.title,a[10]=l):l=a[10],a[11]!==d.icon||a[12]!==d.label||a[13]!==d.tone||a[14]!==h||a[15]!==g||a[16]!==f||a[17]!==x||a[18]!==l?(r=(0,o.jsx)(ev.MenuItem,{"data-testid":f,disabled:x,hotkeys:g,icon:d.icon,onClick:h,text:d.label,tone:d.tone,...l}),a[11]=d.icon,a[12]=d.label,a[13]=d.tone,a[14]=h,a[15]=g,a[16]=f,a[17]=x,a[18]=l,a[19]=r):r=a[19],r}function ry(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function rv(e){var t,n;let i,l,r,u,p,h,g,f,x,b,y,v,j=(0,s.c)(43),{nonReleaseVersions:w,selectedPerspective:S,onSelectBundle:C,onCopyToDraftsNavigate:_,documentType:I,releasesLoading:T,releases:R}=e,{t:P}=(0,d.useTranslation)(),[E,k]=(0,a.useState)(!1),[D,F]=(0,a.useState)(null);j[0]!==S?(l=e=>(0,c.getVersionFromId)(e)===S,j[0]=S,j[1]=l):l=j[1],j[2]!==w||j[3]!==l?(t=w,n=l,r=[-1===(i=t.findIndex(n))?void 0:t[i],-1===i?t:t.slice(0,i).concat(t.slice(i+1))],j[2]=w,j[3]=l,j[4]=r):r=j[4];let[A,V]=r,M=(0,a.useRef)(null);if(j[5]===Symbol.for("react.memo_cache_sentinel")?(u=e=>{e.target&&"matches"in e.target&&"function"==typeof e.target.matches&&e.target.matches("[data-portal] *")||k(!1)},p=()=>[M.current],j[5]=u,j[6]=p):(u=j[5],p=j[6]),(0,ej.useClickOutsideEvent)(u,p),0===w.length)return null;if(j[7]!==I||j[8]!==_||j[9]!==C||j[10]!==R||j[11]!==T||j[12]!==A?(h=A&&(v=(0,c.getVersionFromId)(A),(0,o.jsx)(d.VersionChip,{selected:!0,text:v,tone:"default",onClick:()=>C(v),onCopyToDraftsNavigate:_,contextValues:{documentId:(0,c.getPublishedId)(A),releases:R,releasesLoading:T,documentType:I,bundleId:v,isVersion:!0}},A)),j[7]=I,j[8]=_,j[9]=C,j[10]=R,j[11]=T,j[12]=A,j[13]=h):h=j[13],j[14]!==E||j[15]!==V.length||j[16]!==P?(g=V.length>0?(0,o.jsx)(ev.Tooltip,{content:P("release.chip.tooltip.other-versions",{count:V.length}),fallbackPlacements:[],portal:!0,placement:E?"top":"bottom",children:(0,o.jsx)(d.Chip,{mode:"bleed",fontSize:1,muted:!0,selected:E,iconRight:E?m.ChevronUpIcon:m.ChevronDownIcon,ref:F,onClick:()=>k(rj),text:P("release.chip.button.other-versions",{count:V.length})})}):null,j[14]=E,j[15]=V.length,j[16]=P,j[17]=g):g=j[17],j[18]!==I||j[19]!==_||j[20]!==C||j[21]!==V||j[22]!==R||j[23]!==T||j[24]!==S){let e;j[26]!==I||j[27]!==_||j[28]!==C||j[29]!==R||j[30]!==T||j[31]!==S?(e=e=>{let t=(0,c.getVersionFromId)(e);return(0,o.jsx)(d.VersionChip,{selected:S===t,text:t,disabled:!1,contextMenuPortal:!1,tone:"default",onClick:()=>C(t),onCopyToDraftsNavigate:_,contextValues:{documentId:(0,c.getPublishedId)(e),releases:R,releasesLoading:T,documentType:I,bundleId:t,isVersion:!0}},e)},j[26]=I,j[27]=_,j[28]=C,j[29]=R,j[30]=T,j[31]=S,j[32]=e):e=j[32],f=V.map(e),j[18]=I,j[19]=_,j[20]=C,j[21]=V,j[22]=R,j[23]=T,j[24]=S,j[25]=f}else f=j[25];return j[33]!==f?(x=(0,o.jsx)(ej.Container,{width:1,children:(0,o.jsx)(ej.Flex,{width:1,padding:3,gap:2,wrap:"wrap",children:f})}),j[33]=f,j[34]=x):x=j[34],j[35]!==E||j[36]!==D||j[37]!==x?(b=(0,o.jsx)(ev.Popover,{animate:!1,open:E,portal:!0,arrow:!0,ref:M,placement:"bottom",referenceElement:D,zOffset:10,content:x}),j[35]=E,j[36]=D,j[37]=x,j[38]=b):b=j[38],j[39]!==h||j[40]!==g||j[41]!==b?(y=(0,o.jsxs)(o.Fragment,{children:[h,g,b]}),j[39]=h,j[40]=g,j[41]=b,j[42]=y):y=j[42],y}function rj(e){return!e}let rw=e=>{let t=(0,s.c)(16),{release:n}=e,{t:i}=(0,d.useTranslation)();if("archived"===n.state){let e,n;return t[0]!==i?(e=i("release.chip.tooltip.archived"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,o.jsx)(ej.Text,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("asap"===n.metadata.releaseType){let e,n;return t[4]!==i?(e=i("release.type.asap"),t[4]=i,t[5]=e):e=t[5],t[6]!==e?(n=(0,o.jsx)(ej.Text,{size:1,children:e}),t[6]=e,t[7]=n):n=t[7],n}if("scheduled"===n.metadata.releaseType){let e,l="active"===n.state;return t[8]!==l||t[9]!==n||t[10]!==i?(e=n.metadata.intendedPublishAt&&(0,o.jsx)(ej.Text,{size:1,children:l?(0,o.jsx)(d.Translate,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,d.formatRelativeLocalePublishDate)(n)}}):(0,o.jsx)(d.Translate,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,d.formatRelativeLocalePublishDate)(n)}})}),t[8]=l,t[9]=n,t[10]=i,t[11]=e):e=t[11],e}if("undecided"===n.metadata.releaseType){let e,n;return t[12]!==i?(e=i("release.type.undecided"),t[12]=i,t[13]=e):e=t[13],t[14]!==e?(n=(0,o.jsx)(ej.Text,{size:1,children:e}),t[14]=e,t[15]=n):n=t[15],n}return null},rS={dateStyle:"medium",timeStyle:"short"},rC=(0,a.memo)(function(){let e,t,n,i,l,r,a,u,p,m,h,g,f,x,b,y,v,j,w,S,C,_,I=(0,s.c)(112),{selectedReleaseId:T,selectedPerspectiveName:R}=(0,d.usePerspective)(),{t:P}=(0,d.useTranslation)(),E=(0,d.useSetPerspective)(),{params:k,setParams:D}=lI(),F=(0,d.useDateTimeFormat)(rS),{loading:A}=(0,d.useActiveReleases)(),V=(0,d.useSchema)(),{editState:M,displayed:L,documentType:z,documentId:O}=iV(),B=L&&!L._createdAt,H=(0,d.useGetDefaultPerspective)(),$=k?.historyVersion;I[0]!==L||I[1]!==O||I[2]!==$?(e={historyVersion:$,displayed:L,documentId:O},I[0]=L,I[1]=O,I[2]=$,I[3]=e):e=I[3];let N=(0,d.useFilteredReleases)(e);I[4]!==O?(t={documentId:O},I[4]=O,I[5]=t):t=I[5];let{data:G}=(0,d.useDocumentVersions)(t);I[6]!==G?(n=G&&G.length>0&&!G.some(r_),I[6]=G,I[7]=n):n=I[7];let U=n,q=(0,d.useWorkspace)(),{onSetScheduledDraftPerspective:W}=(0,d.useSingleDocRelease)();I[8]!==W||I[9]!==k?.scheduledDraft||I[10]!==E?(i=()=>{k?.scheduledDraft?W(""):E("drafts")},I[8]=W,I[9]=k?.scheduledDraft,I[10]=E,I[11]=i):i=I[11];let K=i;I[12]!==H||I[13]!==W||I[14]!==k||I[15]!==D||I[16]!==E?(l=e=>{if((0,d.isReleaseDocument)(e)&&(0,d.isCardinalityOneRelease)(e))return void W((0,d.getReleaseIdFromReleaseDocumentId)(e._id));"published"===e&&k?.historyVersion&&D({...k,rev:k?.historyEvent||void 0,since:void 0,historyVersion:void 0});let t=(0,d.isReleaseDocument)(e)?(0,d.getReleaseIdFromReleaseDocumentId)(e._id):e===H?"":e;k?.scheduledDraft?D({...k,scheduledDraft:void 0},{perspective:t}):E(t)},I[12]=H,I[13]=W,I[14]=k,I[15]=D,I[16]=E,I[17]=l):l=I[17];let Y=l;if(I[18]!==z||I[19]!==V){let e=V.get(z);r=!!e&&!0===e.liveEdit,I[18]=z,I[19]=V,I[20]=r}else r=I[20];let X=r;e:{if(X&&!T){a=!1;break e}a=!M?.published}let J=a;I[21]!==L?._id||I[22]!==M?.version||I[23]!==k?(u=e=>{if(!k?.historyVersion){let t=M?.version&&(0,d.isGoingToUnpublish)(M?.version)&&(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(M?.version?._id);return{selected:!!((0,d.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(L?._id||"")||t)}}let t=(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===k.historyVersion;return{selected:t,disabled:t}},I[21]=L?._id,I[22]=M?.version,I[23]=k,I[24]=u):u=I[24];let Q=u;I[25]!==L?._id||I[26]!==M?.draft?._id||I[27]!==X||I[28]!==R||I[29]!==T?(p=()=>!!(X&&!M?.draft?._id&&!T||(0,c.isPublishedId)(L?._id||"")&&(0,d.isPublishedPerspective)(R||"")),I[25]=L?._id,I[26]=M?.draft?._id,I[27]=X,I[28]=R,I[29]=T,I[30]=p):p=I[30];let Z=p();t:{let e=L?._id||"";if(Z||k?.historyVersion||R||(0,c.isVersionId)(e)){m=!1;break t}if((0,c.isDraftId)(e)){m=!0;break t}if((0,c.isPublishedId)(e)&&M?.published&&(0,d.isPublishedPerspective)(R||"")){m=!1;break t}m=!0}let ee=m;I[31]!==M?.draft||I[32]!==B||I[33]!==X||I[34]!==U||I[35]!==T?(h=()=>!!U||!!B&&!!T||(!!M?.draft||!!X)&&!!(B&&T||X),I[31]=M?.draft,I[32]=B,I[33]=X,I[34]=U,I[35]=T,I[36]=h):h=I[36];let et=h(),en=q.document.drafts?.enabled;if(I[37]!==G||I[38]!==N.currentReleases){let e;I[40]!==N.currentReleases?(e=e=>!((0,c.isPublishedId)(e)||(0,c.isDraftId)(e))&&!N.currentReleases.some(t=>(0,d.getReleaseIdFromReleaseDocumentId)(t._id)===(0,c.getVersionFromId)(e)),I[40]=N.currentReleases,I[41]=e):e=I[41],g=G.filter(e),I[37]=G,I[38]=N.currentReleases,I[39]=g}else g=I[39];let ei=g;I[42]!==F||I[43]!==M?.published||I[44]!==P?(f=(0,o.jsx)(ej.Text,{size:1,children:M?.published&&M?.published?._updatedAt?(0,o.jsx)(d.Translate,{t:P,i18nKey:"release.chip.tooltip.published-date",values:{date:F.format(new Date(M?.published._updatedAt))}}):(0,o.jsx)(o.Fragment,{children:P("release.chip.tooltip.not-published")})}),I[42]=F,I[43]=M?.published,I[44]=P,I[45]=f):f=I[45],I[46]!==Y?(x=()=>Y("published"),I[46]=Y,I[47]=x):x=I[47],I[48]!==P?(b=P("release.chip.published"),I[48]=P,I[49]=b):b=I[49];let el=M?.published?._id||M?.id||"",er=!M?.published;return I[50]!==z||I[51]!==N.notCurrentReleases||I[52]!==A||I[53]!==el||I[54]!==er?(y={documentId:el,releases:N.notCurrentReleases,releasesLoading:A,documentType:z,bundleId:"published",isVersion:!1,disabled:er},I[50]=z,I[51]=N.notCurrentReleases,I[52]=A,I[53]=el,I[54]=er,I[55]=y):y=I[55],I[56]!==K||I[57]!==Z||I[58]!==J||I[59]!==f||I[60]!==x||I[61]!==b||I[62]!==y?(v=(0,o.jsx)(d.VersionChip,{tooltipContent:f,disabled:J,onClick:x,selected:Z,text:b,tone:"positive",onCopyToDraftsNavigate:K,contextValues:y}),I[56]=K,I[57]=Z,I[58]=J,I[59]=f,I[60]=x,I[61]=b,I[62]=y,I[63]=v):v=I[63],I[64]!==F||I[65]!==z||I[66]!==M?.draft||I[67]!==M?.id||I[68]!==M?.published?._id||I[69]!==N.notCurrentReleases||I[70]!==K||I[71]!==Y||I[72]!==et||I[73]!==en||I[74]!==ee||I[75]!==X||I[76]!==A||I[77]!==P?(j=en&&(0,o.jsx)(d.VersionChip,{tooltipContent:(0,o.jsx)(ej.Text,{size:1,children:M?.draft?(0,o.jsx)(o.Fragment,{children:M?.draft._updatedAt?(0,o.jsx)(d.Translate,{t:P,i18nKey:"release.chip.tooltip.edited-date",values:{date:F.format(new Date(M?.draft._updatedAt))}}):(0,o.jsx)(d.Translate,{t:P,i18nKey:"release.chip.tooltip.created-date",values:{date:F.format(new Date(M?.draft._createdAt))}})}):(0,o.jsx)(o.Fragment,{children:P(X?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:ee,disabled:et,text:P("release.chip.draft"),tone:M?.draft?"caution":"neutral",onClick:()=>Y("drafts"),onCopyToDraftsNavigate:K,contextValues:{documentId:M?.draft?._id||M?.published?._id||M?.id||"",documentType:z,releases:N.notCurrentReleases,releasesLoading:A,bundleId:"draft",isVersion:!1}}),I[64]=F,I[65]=z,I[66]=M?.draft,I[67]=M?.id,I[68]=M?.published?._id,I[69]=N.notCurrentReleases,I[70]=K,I[71]=Y,I[72]=et,I[73]=en,I[74]=ee,I[75]=X,I[76]=A,I[77]=P,I[78]=j):j=I[78],I[79]!==L?._id||I[80]!==z||I[81]!==N.inCreation||I[82]!==N.notCurrentReleases||I[83]!==K||I[84]!==A||I[85]!==P?(w=N.inCreation&&(0,o.jsx)(d.VersionChip,{tooltipContent:(0,o.jsx)(rw,{release:N.inCreation}),selected:!0,onClick:rI,locked:!1,tone:(0,d.getReleaseTone)(N.inCreation),text:N.inCreation.metadata.title||P("release.placeholder-untitled-release"),onCopyToDraftsNavigate:K,contextValues:{documentId:L?._id||"",documentType:z,disabled:!0,releases:N.notCurrentReleases,releasesLoading:A,bundleId:(0,d.getReleaseIdFromReleaseDocumentId)(N.inCreation._id),isVersion:!0,release:N.inCreation}}),I[79]=L?._id,I[80]=z,I[81]=N.inCreation,I[82]=N.notCurrentReleases,I[83]=K,I[84]=A,I[85]=P,I[86]=w):w=I[86],I[87]!==L||I[88]!==z||I[89]!==M?.version||I[90]!==N.currentReleases||I[91]!==N.notCurrentReleases||I[92]!==Q||I[93]!==K||I[94]!==Y||I[95]!==A||I[96]!==P?(S=L&&N.currentReleases?.map(e=>(0,o.jsx)(d.VersionChip,{tooltipContent:(0,o.jsx)(rw,{release:e}),...Q(e),onClick:()=>Y(e),text:e.metadata.title||P("release.placeholder-untitled-release"),tone:(0,d.getReleaseTone)(e),locked:(0,d.isReleaseScheduledOrScheduling)(e),onCopyToDraftsNavigate:K,contextValues:{documentId:L?._id||"",documentType:z,releases:N.notCurrentReleases,releasesLoading:A,bundleId:(0,d.getReleaseIdFromReleaseDocumentId)(e._id),isVersion:!0,release:e,isGoingToUnpublish:!!M?.version&&(0,d.isGoingToUnpublish)(M?.version)}},e._id)),I[87]=L,I[88]=z,I[89]=M?.version,I[90]=N.currentReleases,I[91]=N.notCurrentReleases,I[92]=Q,I[93]=K,I[94]=Y,I[95]=A,I[96]=P,I[97]=S):S=I[97],I[98]!==z||I[99]!==N.notCurrentReleases||I[100]!==K||I[101]!==Y||I[102]!==A||I[103]!==ei||I[104]!==R?(C=(0,o.jsx)(rv,{nonReleaseVersions:ei,selectedPerspective:R,onSelectBundle:Y,onCopyToDraftsNavigate:K,releases:N.notCurrentReleases,releasesLoading:A,documentType:z}),I[98]=z,I[99]=N.notCurrentReleases,I[100]=K,I[101]=Y,I[102]=A,I[103]=ei,I[104]=R,I[105]=C):C=I[105],I[106]!==v||I[107]!==j||I[108]!==w||I[109]!==S||I[110]!==C?(_=(0,o.jsxs)(o.Fragment,{children:[v,j,w,S,C]}),I[106]=v,I[107]=j,I[108]=w,I[109]=S,I[110]=C,I[111]=_):_=I[111],_});function r_(e){return!(0,c.isVersionId)(e)}function rI(){}let rT=(0,e_.styled)(ej.Card)(e=>{let t=(0,tU.getTheme_v2)(e.theme);return e_.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${e.$showGradient&&e_.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,tU.rgba)(t.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),rR=(0,a.memo)((0,a.forwardRef)(function(e,t){let n,i,l,r,c,u,p,h=(0,s.c)(41),{menuItems:g}=e,{editState:f,onMenuAction:x,onPaneClose:b,onPaneSplit:y,onSetMaximizedPane:v,menuItemGroups:j,schemaType:w,connectionState:S,views:_,unstable_languageFilter:I,documentId:T}=iV(),{features:R}=i$(),{index:P,BackLink:E,hasGroupSiblings:k}=lI(),{maximizedPane:D}=lJ(),{actions:F}=(0,d.useFieldActions)(),[A,V]=(0,a.useState)(null),M=(0,a.useRef)(null),L=function(e){let t,n,i=(0,s.c)(3),[l,r]=(0,a.useState)(!1);return i[0]!==e?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i))return void r(!1);let{scrollLeft:l}=t;r(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&r(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let o=new MutationObserver(()=>{l(),t()});return o.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:o}}();return()=>{n?.disconnect(),i?.disconnect()}},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,a.useEffect)(t,n),l}(M),z=(0,tu.useTelemetry)();h[0]!==F||h[1]!==j||h[2]!==g||h[3]!==x?(n=rs({actionHandler:x,fieldActions:F,menuItems:g,menuItemGroups:j}),h[0]=F,h[1]=j,h[2]=g,h[3]=x,h[4]=n):n=h[4];let O=n;h[5]!==O?(i=O.filter(rr),h[5]=O,h[6]=i):i=h[6];let B=i;h[7]!==O?(l=O.filter(ro),h[7]=O,h[8]=l):l=h[8];let H=l,{collapsed:$,isLast:N}=n9(),G=N&&!$?-1:0,U=R.splitViews&&y&&_.length>1,q=U&&k,W=R.backButton&&P>0,K=!q&&!W&&!!E,{t:Y}=(0,d.useTranslation)(C),X=D?.pane&&"object"==typeof D.pane&&"document"===D.pane.type&&D.pane.options.id===T;h[9]!==X||h[10]!==v||h[11]!==z?(r=()=>{v?.(),X?z.log(l2):z.log(l1)},h[9]=X,h[10]=v,h[11]=z,h[12]=r):r=h[12];let J=r;h[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(l6,{}),h[13]=c):c=h[13];let Q=c;h[14]!==E||h[15]!==W||h[16]!==Y?(u=W&&(0,o.jsx)(ev.Button,{as:E,"data-as":"a",icon:m.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:Y("pane-header.back-button.text")}}),h[14]=E,h[15]=W,h[16]=Y,h[17]=u):u=h[17];let Z=u;return h[18]!==E||h[19]!==Z||h[20]!==$||h[21]!==S||h[22]!==H||h[23]!==f||h[24]!==J||h[25]!==X||h[26]!==B||h[27]!==b||h[28]!==y||h[29]!==v||h[30]!==t||h[31]!==A||h[32]!==w||h[33]!==L||h[34]!==K||h[35]!==U||h[36]!==q||h[37]!==Y||h[38]!==G||h[39]!==I?(p=(0,o.jsx)(ev.TooltipDelayGroupProvider,{children:$?(0,o.jsx)(iv,{border:!0,ref:t,loading:"connecting"===S&&!f?.draft&&!f?.published,title:Q,tabIndex:G,backButton:Z}):(0,o.jsx)(ej.Card,{hidden:$,style:{lineHeight:0},borderBottom:!0,children:(0,o.jsxs)(ej.Flex,{gap:3,paddingY:3,children:[(0,o.jsx)(rT,{$showGradient:L,children:(0,o.jsx)(ej.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:M,children:(0,o.jsx)(rC,{})})}),(0,o.jsx)(ej.Box,{flex:"none",paddingRight:3,children:(0,o.jsxs)(ej.Flex,{align:"center",gap:1,children:[I.length>0&&(0,o.jsx)(o.Fragment,{children:I.map((e,t)=>(0,o.jsx)(e,{schemaType:w},`language-filter-${t}`))}),B.map(rk),f&&(0,o.jsx)(av,{group:"paneActions",children:e=>{let{states:t}=e;return(0,o.jsx)(rP,{contextMenuNodes:H,setReferenceElement:V,referenceElement:A,states:t})}}),U&&(0,o.jsx)(ev.Button,{"aria-label":Y("buttons.split-pane-button.aria-label"),icon:m.SplitVerticalIcon,mode:"bleed",onClick:y,tooltipProps:{content:Y("buttons.split-pane-button.tooltip")}},"split-pane-button"),q&&(0,o.jsx)(ev.Button,{icon:m.CloseIcon,mode:"bleed",onClick:b,tooltipProps:{content:Y("buttons.split-pane-close-button.title")}},"close-view-button"),v&&(0,o.jsx)(ev.Button,{"aria-label":Y(X?"buttons.focus-pane-button.aria-label.collapse":"buttons.focus-pane-button.aria-label.focus"),icon:X?m.CollapseIcon:m.ExpandIcon,mode:"bleed",onClick:J,tooltipProps:{content:Y(X?"buttons.focus-pane-button.tooltip.collapse":"buttons.focus-pane-button.tooltip.focus")},"data-testid":X?"focus-pane-button-collapse":"focus-pane-button-focus"},"focus-pane-button"),K&&(0,o.jsx)(ev.Button,{icon:m.CloseIcon,mode:"bleed",tooltipProps:{content:Y("buttons.split-pane-close-group-button.title")},as:E},"close-view-button")]})})]})})}),h[18]=E,h[19]=Z,h[20]=$,h[21]=S,h[22]=H,h[23]=f,h[24]=J,h[25]=X,h[26]=B,h[27]=b,h[28]=y,h[29]=v,h[30]=t,h[31]=A,h[32]=w,h[33]=L,h[34]=K,h[35]=U,h[36]=q,h[37]=Y,h[38]=G,h[39]=I,h[40]=p):p=h[40],p})),rP=(0,a.memo)(function(e){let t,n,i=(0,s.c)(7),{setReferenceElement:l,referenceElement:r,contextMenuNodes:d}=e,c=(0,a.useDeferredValue)(e.states);return i[0]!==c?(t=c.filter(rD),i[0]=c,i[1]=t):t=i[1],i[2]!==d||i[3]!==r||i[4]!==l||i[5]!==t?(n=(0,o.jsx)(rE,{setReferenceElement:l,referenceElement:r,contextMenuNodes:d,states:t}),i[2]=d,i[3]=r,i[4]=l,i[5]=t,i[6]=n):n=i[6],n}),rE=(0,a.memo)(function(e){let t,n,i=(0,s.c)(8),{states:l,setReferenceElement:r,contextMenuNodes:a,referenceElement:d}=e;i[0]!==a||i[1]!==r||i[2]!==l?(t=e=>{let{handleAction:t}=e;return(0,o.jsx)("div",{ref:r,children:(0,o.jsx)(ic,{nodes:a,actionsNodes:l.length>0?l.map((e,n)=>(0,o.jsx)(rb,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=a,i[1]=r,i[2]=l,i[3]=t):t=i[3];let c=t;return i[4]!==d||i[5]!==c||i[6]!==l?(n=(0,o.jsx)(rf,{actionStates:l,referenceElement:d,children:c}),i[4]=d,i[5]=c,i[6]=l,i[7]=n):n=i[7],n});function rk(e){return(0,o.jsx)(iw,{node:e},e.key)}function rD(e){return!e.action||e.action!==rl.action}function rF(e){let t,n,i=(0,s.c)(3),{size:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==l?(n=(0,o.jsx)(ev.Button,{"aria-hidden":!0,disabled:!0,size:l,style:t,text:"-"}),i[1]=l,i[2]=n):n=i[2],n}let rA={primary:"primary",success:"positive",warning:"caution",danger:"critical"},rV=(0,a.memo)(function(e){let t,n,i=(0,s.c)(4),{states:l}=e;return 0===l.length?null:(i[0]!==l?(t=l.map(rO),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(ej.Inline,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),rM=(0,a.memo)(function(e){let t,n=(0,s.c)(2),i=(0,a.useDeferredValue)(e.states);return n[0]!==i?(t=(0,o.jsx)(rV,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function rL(){let e,t=(0,s.c)(3),{badges:n,editState:i}=iV();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,o.jsx)(aj,{badges:n,badgeProps:i,children:rz}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function rz(e){let{states:t}=e;return(0,o.jsx)(rM,{states:t})}function rO(e,t){return(0,o.jsx)(ev.Tooltip,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,o.jsx)(ej.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?rA[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let rB={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},rH=e=>{let t,n,i,l,r,u,p,h,g=(0,s.c)(41),{id:f,type:x,draft:b,version:y}=e;g[0]!==y?(t=y?._id&&(0,c.getVersionFromId)(y._id),g[0]=y,g[1]=t):t=g[1];let v=t,{delete:j}=(0,d.useDocumentOperation)(f,x,v),[w,S]=(0,a.useState)(!1),[_,I]=(0,a.useState)(!1),{t:T}=(0,d.useTranslation)(C);g[2]!==f?(n={documentId:f},g[2]=f,g[3]=n):n=g[3];let{sortedDocumentList:R}=(0,d.useDocumentVersionTypeSortedList)(n);g[4]!==R?(i=R.some(d.isReleaseScheduledOrScheduling),g[4]=R,g[5]=i):i=g[5];let P=i;g[6]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{I(!1)},g[6]=l):l=g[6];let E=l;g[7]!==j?(r=e=>{I(!1),S(!0),j.execute(e),S(!1)},g[7]=j,g[8]=r):r=g[8];let k=r;g[9]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{I(!0)},g[9]=u):u=g[9];let D=u;g[10]!==v||g[11]!==f||g[12]!==x?(p={id:f,type:x,version:v,permission:"delete"},g[10]=v,g[11]=f,g[12]=x,g[13]=p):p=g[13];let[F,A]=(0,d.useDocumentPairPermissions)(p),V=(0,d.useCurrentUser)();e:{let e,t,n,i,l;if(!A&&!F?.granted){let e,t,n;g[14]!==T?(e=T("action.delete.label"),g[14]=T,g[15]=e):e=g[15],g[16]!==V?(t=(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"delete-document",currentUser:V}),g[16]=V,g[17]=t):t=g[17],g[18]!==t||g[19]!==e?(n={tone:"critical",icon:m.TrashIcon,disabled:!0,label:e,title:t},g[18]=t,g[19]=e,g[20]=n):n=g[20],h=n;break e}g[21]!==j.disabled||g[22]!==P||g[23]!==T?(e=()=>P?T("action.delete.disabled.scheduled-release"):j.disabled?T(rB[j.disabled]):"",g[21]=j.disabled,g[22]=P,g[23]=T,g[24]=e):e=g[24];let r=e,s=w||P||!!j.disabled||A;g[25]!==r?(t=r(),g[25]=r,g[26]=t):t=g[26],g[27]!==w||g[28]!==T?(n=T(w?"action.delete.running.label":"action.delete.label"),g[27]=w,g[28]=T,g[29]=n):n=g[29],g[30]!==b?._id||g[31]!==k||g[32]!==f||g[33]!==_||g[34]!==x?(i=_&&{type:"custom",component:(0,o.jsx)(at,{action:"delete",id:b?._id||f,type:x,onCancel:E,onConfirm:k})},g[30]=b?._id,g[31]=k,g[32]=f,g[33]=_,g[34]=x,g[35]=i):i=g[35],g[36]!==s||g[37]!==t||g[38]!==n||g[39]!==i?(l={tone:"critical",icon:m.TrashIcon,disabled:s,title:t,label:n,shortcut:"Ctrl+Alt+D",onHandle:D,dialog:i},g[36]=s,g[37]=t,g[38]=n,g[39]=i,g[40]=l):l=g[40],h=l}return h};function r$(e){let t,n,i,l,r,c,u=(0,s.c)(18),{publishedExists:p,onCancel:m,onConfirm:h}=e,{t:g}=(0,d.useTranslation)(C),f=`deletion-confirmation-${(0,a.useId)()}`;return u[0]!==g?(t=g("action.discard-changes.confirm-dialog.header.text"),u[0]=g,u[1]=t):t=u[1],u[2]!==g?(n=g("action.discard-changes.label"),u[2]=g,u[3]=n):n=u[3],u[4]!==h||u[5]!==n?(i={confirmButton:{text:n,onClick:h}},u[4]=h,u[5]=n,u[6]=i):i=u[6],u[7]!==p||u[8]!==g?(l=g(p?"action.discard-changes.confirm-dialog.confirm-discard-changes":"action.discard-changes.confirm-dialog.confirm-discard-changes-draft"),u[7]=p,u[8]=g,u[9]=l):l=u[9],u[10]!==l?(r=(0,o.jsx)(ej.Text,{size:1,children:l}),u[10]=l,u[11]=r):r=u[11],u[12]!==f||u[13]!==m||u[14]!==t||u[15]!==i||u[16]!==r?(c=(0,o.jsx)(ev.Dialog,{width:1,id:f,header:t,footer:i,onClose:m,onClickOutside:m,children:r}),u[12]=f,u[13]=m,u[14]=t,u[15]=i,u[16]=r,u[17]=c):c=u[17],c}rH.action="delete",rH.displayName="DeleteAction";let rN={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},rG=e=>{let t,n,i,l,r,u,p=(0,s.c)(31),{id:h,type:g,published:f,version:x,draft:b}=e;p[0]!==x?(t=x?._id&&(0,c.getVersionFromId)(x._id),p[0]=x,p[1]=t):t=p[1];let y=t,{discardChanges:v}=(0,d.useDocumentOperation)(h,g,y),[j,w]=(0,a.useState)(!1);p[2]!==y||p[3]!==h||p[4]!==g?(n={id:h,type:g,version:y,permission:"discardDraft"},p[2]=y,p[3]=h,p[4]=g,p[5]=n):n=p[5];let[S,_]=(0,d.useDocumentPairPermissions)(n),I=(0,d.useCurrentUser)(),{displayed:T}=iV(),{t:R}=(0,d.useTranslation)(C),P=T?._id&&(0,c.isPublishedId)(T?._id);p[6]!==v?(i=()=>{v.execute(),w(!1)},p[6]=v,p[7]=i):i=p[7];let E=i;p[8]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{w(!1)},p[8]=l):l=p[8];let k=l;p[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{w(!0)},p[9]=r):r=p[9];let D=r;e:{let e,t,n,i;if(!x&&!b||P){u=null;break e}if(!_&&!S?.granted){let e,t,n;p[10]!==R?(e=R("action.discard-changes.label"),p[10]=R,p[11]=e):e=p[11],p[12]!==I?(t=(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:I}),p[12]=I,p[13]=t):t=p[13],p[14]!==e||p[15]!==t?(n={tone:"critical",icon:m.ResetIcon,disabled:!0,label:e,title:t},p[14]=e,p[15]=t,p[16]=n):n=p[16],u=n;break e}let l=!!v.disabled||_,r=v.disabled&&rN[v.disabled]||"";p[17]!==R||p[18]!==r?(e=R(r),p[17]=R,p[18]=r,p[19]=e):e=p[19],p[20]!==R?(t=R("action.discard-changes.label"),p[20]=R,p[21]=t):t=p[21],p[22]!==E||p[23]!==j||p[24]!==f?(n=j&&{type:"custom",component:(0,o.jsx)(r$,{onCancel:k,onConfirm:E,publishedExists:!!f})},p[22]=E,p[23]=j,p[24]=f,p[25]=n):n=p[25],p[26]!==t||p[27]!==n||p[28]!==l||p[29]!==e?(i={tone:"critical",icon:m.ResetIcon,disabled:l,title:e,label:t,onHandle:D,dialog:n},p[26]=t,p[27]=n,p[28]=l,p[29]=e,p[30]=i):i=p[30],u=i}return u};rG.action="discardChanges",rG.displayName="DiscardChangesAction";let rU={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},rq=e=>{let t,n,i,l,r=(0,s.c)(31),{id:u,type:p,release:h,mapDocument:g,version:f}=e,x=(0,d.useDocumentStore)();r[0]!==f?(t=f?._id&&(0,c.getVersionFromId)(f._id),r[0]=f,r[1]=t):t=r[1];let b=t,{duplicate:y}=(0,d.useDocumentOperation)(u,p,b),{navigateIntent:v}=(0,eE.useRouter)(),[j,w]=(0,a.useState)(!1);r[2]!==u||r[3]!==h||r[4]!==p?(n={id:u,type:p,version:h,permission:"duplicate"},r[2]=u,r[3]=h,r[4]=p,r[5]=n):n=r[5];let[S,_]=(0,d.useDocumentPairPermissions)(n),{t:I}=(0,d.useTranslation)(C),T=(0,d.useCurrentUser)();r[6]!==x.pair||r[7]!==y||r[8]!==u||r[9]!==g||r[10]!==v||r[11]!==p?(i=async()=>{let e=(0,eC.uuid)();w(!0);let t=(0,e6.firstValueFrom)(x.pair.operationEvents(u,p).pipe((0,eJ.filter)(rW)));y.execute(e,{mapDocument:g}),await t,v("edit",{id:e,type:p}),w(!1)},r[6]=x.pair,r[7]=y,r[8]=u,r[9]=g,r[10]=v,r[11]=p,r[12]=i):i=r[12];let R=i;e:{let e,t,n;if(!_&&!S?.granted){let e,t,n;r[13]!==I?(e=I("action.duplicate.label"),r[13]=I,r[14]=e):e=r[14],r[15]!==T?(t=(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:T}),r[15]=T,r[16]=t):t=r[16],r[17]!==e||r[18]!==t?(n={icon:m.CopyIcon,disabled:!0,label:e,title:t},r[17]=e,r[18]=t,r[19]=n):n=r[19],l=n;break e}let i=j||!!y.disabled||_;r[20]!==j||r[21]!==I?(e=I(j?"action.duplicate.running.label":"action.duplicate.label"),r[20]=j,r[21]=I,r[22]=e):e=r[22],r[23]!==y.disabled||r[24]!==I?(t=y.disabled?I(rU[y.disabled]):"",r[23]=y.disabled,r[24]=I,r[25]=t):t=r[25],r[26]!==R||r[27]!==i||r[28]!==e||r[29]!==t?(n={icon:m.CopyIcon,disabled:i,label:e,title:t,onHandle:R},r[26]=R,r[27]=i,r[28]=e,r[29]=t,r[30]=n):n=r[30],l=n}return l};function rW(e){return"duplicate"===e.op&&"success"===e.type}rq.action="duplicate",rq.displayName="DuplicateAction";let rK=(0,tp.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),rY={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},rX={status:"published"};function rJ(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,o.jsx)(rQ,{publishedAt:t}):n(rY[e])}function rQ(e){let t,n,i,l=(0,s.c)(6),{publishedAt:r}=e,{t:a}=(0,d.useTranslation)(C);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},l[0]=t):t=l[0];let c=(0,d.useRelativeTime)(r,t);return l[1]!==a||l[2]!==c?(n=a("action.publish.already-published.tooltip",{timeSincePublished:c}),l[1]=a,l[2]=c,l[3]=n):n=l[3],l[4]!==n?(i=(0,o.jsx)(ej.Text,{children:n}),l[4]=n,l[5]=i):i=l[5],i}let rZ=e=>{let t,n,i,l,r,u,p,h,g,f,x,b,y=(0,s.c)(81),{id:v,type:j,liveEdit:w,draft:S,published:_,release:I,version:T}=e,[R,P]=(0,a.useState)(null);y[0]!==T?(t=T?._id&&(0,c.getVersionFromId)(T._id),y[0]=T,y[1]=t):t=y[1];let E=t,{publish:k}=(0,d.useDocumentOperation)(v,j,E),{changesOpen:D,documentId:F,documentType:A,value:V}=iV(),M=(0,d.useValidationStatus)(V._id,j,!I),L=(0,d.useSyncState)(v,j),z=(0,d.useEditState)(F,A),{t:O}=(0,d.useTranslation)(C);y[2]!==z?.draft||y[3]!==z?.published?(n=z?.draft||z?.published||{},y[2]=z?.draft,y[3]=z?.published,y[4]=n):n=y[4];let B=n._rev;y[5]!==M.validation?(i=M.validation.some(eS.isValidationErrorMarker),y[5]=M.validation,y[6]=i):i=y[6];let H=i,[$,N]=(0,a.useState)(!1),G=L.isSyncing,U=M.isValidating;y[7]!==v||y[8]!==j?(l={id:v,type:j,permission:"publish"},y[7]=v,y[8]=j,y[9]=l):l=y[9];let[q,W]=(0,d.useDocumentPairPermissions)(l),K=(0,d.useCurrentUser)();y[10]!==H||y[11]!==k.disabled||y[12]!==_||y[13]!==O?(r=k.disabled?rJ(k.disabled,(_||{})._updatedAt,O)||"":H?O("action.publish.validation-issues.tooltip"):"",y[10]=H,y[11]=k.disabled,y[12]=_,y[13]=O,y[14]=r):r=y[14];let Y=r,X=_?._rev;y[15]!==X||y[16]!==k?(u=()=>{k.execute(),P({status:"publishing",publishRevision:X})},y[15]=X,y[16]=k,y[17]=u):u=y[17];let J=u;y[18]!==J||y[19]!==H||y[20]!==G||y[21]!==$||y[22]!==B||y[23]!==M.isValidating||y[24]!==M.revision?(p=()=>{let e=!M.isValidating&&M.revision!==B;$&&!G&&e&&(H||J(),N(!1))},y[18]=J,y[19]=H,y[20]=G,y[21]=$,y[22]=B,y[23]=M.isValidating,y[24]=M.revision,y[25]=p):p=y[25],y[26]!==J||y[27]!==H||y[28]!==G||y[29]!==U||y[30]!==$||y[31]!==B||y[32]!==M.isValidating||y[33]!==M.revision?(h=[G,J,H,$,M.revision,B,U,M.isValidating],y[26]=J,y[27]=H,y[28]=G,y[29]=U,y[30]=$,y[31]=B,y[32]=M.isValidating,y[33]=M.revision,y[34]=h):h=y[34],(0,a.useEffect)(p,h),y[35]!==X||y[36]!==R?(g=()=>{let e=R?.status==="publishing"&&X!==R.publishRevision,t=e?rX:null,n=setTimeout(()=>{P(t)},e?200:4e3);return()=>clearTimeout(n)},y[35]=X,y[36]=R,y[37]=g):g=y[37],y[38]!==D||y[39]!==X||y[40]!==R?(f=[D,R,X],y[38]=D,y[39]=X,y[40]=R,y[41]=f):f=y[41],(0,a.useEffect)(g,f);let Q=(0,tu.useTelemetry)();y[42]!==J||y[43]!==S?._createdAt||y[44]!==_||y[45]!==B||y[46]!==L.isSyncing||y[47]!==Q||y[48]!==M.isValidating||y[49]!==M.revision?(x=()=>{Q.log(rK,{publishedImmediately:!S?._createdAt,previouslyPublished:!!_}),L.isSyncing||M.isValidating||M.revision!==B?N(!0):J()},y[42]=J,y[43]=S?._createdAt,y[44]=_,y[45]=B,y[46]=L.isSyncing,y[47]=Q,y[48]=M.isValidating,y[49]=M.revision,y[50]=x):x=y[50];let Z=x;e:{let e,t,n;if(I&&T||w&&!T){b=null;break e}if(_&&!S&&!T){let e,t,n;y[51]!==O?(e=O("action.publish.label"),y[51]=O,y[52]=e):e=y[52];let i=_?._updatedAt;y[53]!==O||y[54]!==i?(t=rJ("ALREADY_PUBLISHED",i,O),y[53]=O,y[54]=i,y[55]=t):t=y[55],y[56]!==e||y[57]!==t?(n={tone:"default",icon:m.PublishIcon,label:e,title:t,disabled:!0},y[56]=e,y[57]=t,y[58]=n):n=y[58],b=n;break e}if(!W&&!q?.granted){let e,t,n;y[59]!==O?(e=O("action.publish.label"),y[59]=O,y[60]=e):e=y[60],y[61]!==K?(t=(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"publish-document",currentUser:K}),y[61]=K,y[62]=t):t=y[62],y[63]!==e||y[64]!==t?(n={tone:"default",icon:m.PublishIcon,label:e,title:t,disabled:!0},y[63]=e,y[64]=t,y[65]=n):n=y[65],b=n;break e}let i=!!($||z?.transactionSyncLock?.enabled||R?.status==="publishing"||R?.status==="published"||H||k.disabled),l=i||W;y[66]!==$||y[67]!==R?.status||y[68]!==O?(e=O(R?.status==="published"?"action.publish.published.label":$||R?.status==="publishing"?"action.publish.running.label":"action.publish.draft.label"),y[66]=$,y[67]=R?.status,y[68]=O,y[69]=e):e=y[69],y[70]!==$||y[71]!==R?.status||y[72]!==O||y[73]!==Y?(t=$?O("action.publish.waiting"):R?.status==="published"||R?.status==="publishing"?null:Y,y[70]=$,y[71]=R?.status,y[72]=O,y[73]=Y,y[74]=t):t=y[74];let r=i||$?null:"Ctrl+Alt+P";y[75]!==Z||y[76]!==l||y[77]!==e||y[78]!==t||y[79]!==r?(n={disabled:l,tone:"default",label:e,icon:m.PublishIcon,title:t,shortcut:r,onHandle:Z},y[75]=Z,y[76]=l,y[77]=e,y[78]=t,y[79]=r,y[80]=n):n=y[80],b=n}return b};rZ.action="publish",rZ.displayName="PublishAction";let r0={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},r1=e=>{let t,n,i,l,r,c,u=(0,s.c)(22),{id:p,type:h,draft:g,liveEdit:f,release:x}=e,{unpublish:b}=(0,d.useDocumentOperation)(p,h),[y,v]=(0,a.useState)(!1);u[0]!==p||u[1]!==h?(t={id:p,type:h,permission:"unpublish"},u[0]=p,u[1]=h,u[2]=t):t=u[2];let[j,w]=(0,d.useDocumentPairPermissions)(t),S=(0,d.useCurrentUser)(),{t:_}=(0,d.useTranslation)(C),{selectedPerspective:I}=(0,d.usePerspective)(),T="drafts"===I;u[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{v(!1)},u[3]=n):n=u[3];let R=n;u[4]!==b?(i=()=>{v(!1),b.execute()},u[4]=b,u[5]=i):i=u[5];let P=i;e:{if(y){let e,t=g?._id||p;u[6]!==P||u[7]!==t||u[8]!==h?(e={type:"dialog",onClose:R,content:(0,o.jsx)(at,{id:t,type:h,action:"unpublish",onCancel:R,onConfirm:P})},u[6]=P,u[7]=t,u[8]=h,u[9]=e):e=u[9],l=e;break e}l=null}let E=l;return u[10]!==S||u[11]!==E||u[12]!==T||u[13]!==w||u[14]!==f||u[15]!==j?.granted||u[16]!==x||u[17]!==_||u[18]!==b.disabled?(r=()=>x||T||f?null:w||j?.granted?{tone:"critical",icon:m.UnpublishIcon,disabled:!!b.disabled||w,label:_("action.unpublish.label"),title:b.disabled?_(r0[b.disabled]):"",onHandle:()=>v(!0),dialog:E}:{tone:"critical",icon:m.UnpublishIcon,label:"Unpublish",title:(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:S}),disabled:!0},u[10]=S,u[11]=E,u[12]=T,u[13]=w,u[14]=f,u[15]=j?.granted,u[16]=x,u[17]=_,u[18]=b.disabled,u[19]=r):r=u[19],u[20]!==r?(c=r(),u[20]=r,u[21]=c):c=u[21],c};r1.action="unpublish",r1.displayName="UnpublishAction";let r2=(0,a.memo)(function(e){let t,n,i,l,r,c,u,p,m,h=(0,s.c)(38),{disabled:g,states:f}=e,{__internal_tasks:x}=(0,d.useSource)(),{editState:b}=iV(),{params:y}=lI(),v=!!y?.rev,{selectedReleaseId:j}=(0,d.usePerspective)();h[0]!==f?([t,...n]=f,h[0]=f,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let[w,S]=(0,a.useState)(null);e:{let e,n,l,r;if(!t||!t.title&&!t.shortcut){i=null;break e}h[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},h[3]=e):e=h[3],h[4]!==t.title?(n=t.title&&(0,o.jsx)(ej.Text,{size:1,children:t.title}),h[4]=t.title,h[5]=n):n=h[5],h[6]!==t.shortcut?(l=t.shortcut&&(0,o.jsx)(ev.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(r9)}),h[6]=t.shortcut,h[7]=l):l=h[7],h[8]!==n||h[9]!==l?(r=(0,o.jsxs)(ej.Flex,{style:e,align:"center",gap:3,children:[n,l]}),h[8]=n,h[9]=l,h[10]=r):r=h[10],i=r}let C=i;h[11]!==b?.liveEdit||h[12]!==b?.version||h[13]!==t||h[14]!==j||h[15]!==v?(l=v?!!t:j?t&&j&&!(0,d.isSanityDefinedAction)(t):t&&(!b?.liveEdit||b?.version),h[11]=b?.liveEdit,h[12]=b?.version,h[13]=t,h[14]=j,h[15]=v,h[16]=l):l=h[16];let _=l;h[17]!==t||h[18]!==n||h[19]!==_?(r=_?n:[t,...n].filter(Boolean),h[17]=t,h[18]=n,h[19]=_,h[20]=r):r=h[20];let I=r,T=x&&x.footerAction;return h[21]!==g||h[22]!==t||h[23]!==_||h[24]!==C?(c=_&&(0,o.jsx)(ej.LayerProvider,{zOffset:200,children:(0,o.jsx)(ev.Tooltip,{disabled:!C,content:C,placement:"top",children:(0,o.jsx)(ej.Stack,{children:(0,o.jsx)(ev.Button,{"data-testid":`action-${it(t.label)}`,disabled:g||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:S,text:t.label,tone:t.tone||"primary"})})})}),h[21]=g,h[22]=t,h[23]=_,h[24]=C,h[25]=c):c=h[25],h[26]!==g||h[27]!==I?(u=I.length>0&&(0,o.jsx)(rx,{actionStates:I,disabled:g}),h[26]=g,h[27]=I,h[28]=u):u=h[28],h[29]!==w||h[30]!==t||h[31]!==_?(p=_&&t&&t.dialog&&(0,o.jsx)(rg,{dialog:t.dialog,referenceElement:w}),h[29]=w,h[30]=t,h[31]=_,h[32]=p):p=h[32],h[33]!==T||h[34]!==c||h[35]!==u||h[36]!==p?(m=(0,o.jsxs)(ej.Flex,{align:"center",gap:1,children:[T,c,u,p]}),h[33]=T,h[34]=c,h[35]=u,h[36]=p,h[37]=m):m=h[37],m}),r3=(0,a.memo)(function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(av,{group:"default",children:oe}),t[0]=e):e=t[0],e});function r4(e){let t,n,i=(0,s.c)(6),{connectionState:l,documentId:r}=iV();i[0]!==e.states?(t=e.states.filter(r5),i[0]=e.states,i[1]=t):t=i[1];let a=t;if(0===a.length)return null;let d="connected"!==l;return i[2]!==r||i[3]!==a||i[4]!==d?(n=(0,o.jsx)(r2,{disabled:d,states:a},r),i[2]=r,i[3]=a,i[4]=d,i[5]=n):n=i[5],n}function r5(e){return!e.action||e.action!==rl.action}let r6=(0,a.memo)(function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(av,{group:"default",children:ot}),t[0]=e):e=t[0],e});function r8(e){let t,n,i,l=(0,s.c)(8),{states:r}=e,{connectionState:a,editState:d,revisionId:c}=iV();l[0]!==d?.draft||l[1]!==d?.published?(t=d?.draft||d?.published||{},l[0]=d?.draft,l[1]=d?.published,l[2]=t):t=l[2];let u=t._rev===c,p="connected"!==a||!!u;return l[3]!==r?(n=r.filter(r7).slice(-1),l[3]=r,l[4]=n):n=l[4],l[5]!==p||l[6]!==n?(i=(0,o.jsx)(r2,{disabled:p,states:n}),l[5]=p,l[6]=n,l[7]=i):i=l[7],i}function r7(e){return!!e.action&&e.action===rl.action}function r9(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function oe(e){let{states:t}=e;return(0,o.jsx)(r4,{states:t})}function ot(e){let{states:t}=e;return(0,o.jsx)(r8,{states:t})}let on={create:m.AddIcon,delete:m.TrashIcon,discardDraft:m.CloseIcon,initial:m.AddIcon,editDraft:m.EditIcon,editLive:m.EditIcon,publish:m.PublishIcon,unpublish:m.UnpublishIcon},oi=(0,e_.styled)(m.ChevronLeftIcon)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function ol(e){let t,n,i,l,r,a=(0,s.c)(14),{isExpanded:c,onExpand:u}=e,{t:p}=(0,d.useTranslation)(C);a[0]!==c||a[1]!==u?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(ov);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(c),u()},a[0]=c,a[1]=u,a[2]=t):t=a[2];let m=t;return a[3]!==c?(n=(0,o.jsx)(oi,{"data-expanded":c}),a[3]=c,a[4]=n):n=a[4],a[5]!==c||a[6]!==p?(i=p(c?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),a[5]=c,a[6]=p,a[7]=i):i=a[7],a[8]!==i?(l={content:i},a[8]=i,a[9]=l):l=a[9],a[10]!==m||a[11]!==n||a[12]!==l?(r=(0,o.jsx)(ev.Button,{mode:"bleed",icon:n,tooltipProps:l,onClick:m}),a[10]=m,a[11]=n,a[12]=l,a[13]=r):r=a[13],r}let or=(0,e_.styled)(ej.Stack)`
  max-width: 200px;
`,oo=(0,e_.styled)(ej.Flex)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,os=(0,e_.styled)(ej.Box)(({$visible:e})=>e_.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&e_.css`
      opacity: 1;
      pointer-events: auto;
    `}
  `),oa={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function od(e){let t,n,i=(0,s.c)(9),{maxLength:l,userIds:r,size:a,withTooltip:c}=e,u=void 0===c||c;if(i[0]!==r||i[1]!==u){let e;i[3]!==u?(e=e=>(0,o.jsx)(d.UserAvatar,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=r.map(e),i[0]=r,i[1]=u,i[2]=t}else t=i[2];return i[5]!==l||i[6]!==a||i[7]!==t?(n=(0,o.jsx)(ej.AvatarStack,{maxLength:l,size:a,children:t}),i[5]=l,i[6]=a,i[7]=t,i[8]=n):n=i[8],n}let oc=(0,e_.styled)(ej.Flex)(e=>{let t=(0,tU.getTheme_v2)(e.theme),n=e.$color;return e_.css`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),ou={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},op={minimal:!0,useTemporalPhrase:!0},om=(0,e_.styled)(ew.Skeleton)(e=>{let t=(0,tU.getTheme_v2)(e.theme);return e_.css`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),oh=e=>{let t,n,i,l=(0,s.c)(10),{userId:r}=e,[a,c]=(0,d.useUser)(r);return l[0]!==c||l[1]!==a?(t=(0,o.jsx)(ej.Box,{children:c||!a?(0,o.jsx)(d.AvatarSkeleton,{animated:!0}):(0,o.jsx)(d.UserAvatar,{user:a})}),l[0]=c,l[1]=a,l[2]=t):t=l[2],l[3]!==c||l[4]!==a?(n=(0,o.jsx)(ej.Box,{children:c||!a?.displayName?(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(om,{animated:!0})}):(0,o.jsx)(ej.Text,{muted:!0,size:1,children:a.displayName})}),l[3]=c,l[4]=a,l[5]=n):n=l[5],l[6]!==t||l[7]!==n||l[8]!==r?(i=(0,o.jsxs)(ej.Flex,{align:"center",gap:2,padding:1,children:[t,n]},r),l[6]=t,l[7]=n,l[8]=r,l[9]=i):i=l[9],i},og=e=>{let t,n,i,l,r=(0,s.c)(9),{collaborators:a}=e,{t:c}=(0,d.useTranslation)("studio");return r[0]!==c?(t=c("timeline.changes.title"),r[0]=c,r[1]=t):t=r[1],r[2]!==t?(n=(0,o.jsx)(ej.Box,{padding:1,paddingBottom:2,children:(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:t})}),r[2]=t,r[3]=n):n=r[3],r[4]!==a?(i=a.map(ox),r[4]=a,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(l=(0,o.jsxs)(ej.Stack,{paddingBottom:1,children:[n,i]}),r[6]=n,r[7]=i,r[8]=l):l=r[8],l};function of(e){let t,n,i,l,r,a,c,u,p,m,h,g,f,x,b,y,v,j,w,S,C,_=(0,s.c)(55),{chunk:I,isSelected:T,onSelect:R,collaborators:P,optionsMenu:E}=e,{t:k}=(0,d.useTranslation)("studio"),{type:D,endTimestamp:F}=I;_[0]!==D?(t=on[D],_[0]=D,_[1]=t):t=_[1];let A=t;_[2]!==I.authors?(n=Array.from(I.authors),_[2]=I.authors,_[3]=n):n=_[3];let V=n;_[4]!==P?(i=P?Array.from(P):[],_[4]=P,_[5]=i):i=_[5];let M=i,L="delete"!==D;_[6]===Symbol.for("react.memo_cache_sentinel")?(l={dateStyle:"medium",timeStyle:"short"},_[6]=l):l=_[6];let z=(0,d.useDateTimeFormat)(l);_[7]!==F?(r=new Date(F),_[7]=F,_[8]=r):r=_[8];let O=(0,d.useRelativeTime)(r||"",op);if(_[9]!==z||_[10]!==F){let e=new Date(F);a=z.format(e),_[9]=z,_[10]=F,_[11]=a}else a=_[11];let B=a;_[12]!==I||_[13]!==L||_[14]!==R?(c=e=>{e.preventDefault(),e.stopPropagation(),L&&R(I)},_[12]=I,_[13]=L,_[14]=R,_[15]=c):c=_[15];let H=c;_[16]===Symbol.for("react.memo_cache_sentinel")?(u={position:"relative"},_[16]=u):u=_[16],_[17]!==V?(p=(0,o.jsx)(od,{maxLength:3,userIds:V,size:2}),_[17]=V,_[18]=p):p=_[18];let $=ou[D];return _[19]!==A?(m=A&&(0,o.jsx)(A,{}),_[19]=A,_[20]=m):m=_[20],_[21]!==m?(h=(0,o.jsx)(ej.Text,{size:0,children:m}),_[21]=m,_[22]=h):h=_[22],_[23]!==$||_[24]!==h?(g=(0,o.jsx)(oc,{align:"center",justify:"center",$color:$,children:h}),_[23]=$,_[24]=h,_[25]=g):g=_[25],_[26]!==g||_[27]!==p?(f=(0,o.jsxs)("div",{style:u,children:[p,g]}),_[26]=g,_[27]=p,_[28]=f):f=_[28],_[29]!==k||_[30]!==D?(x=k(oa[D])||(0,o.jsx)("code",{children:D}),_[29]=k,_[30]=D,_[31]=x):x=_[31],_[32]!==x?(b=(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:x}),_[32]=x,_[33]=b):b=_[33],_[34]!==B||_[35]!==F||_[36]!==O?(y=(0,o.jsx)(ej.Text,{as:"time",size:1,muted:!0,dateTime:F,title:B,children:O}),_[34]=B,_[35]=F,_[36]=O,_[37]=y):y=_[37],_[38]!==b||_[39]!==y?(v=(0,o.jsxs)(ej.Stack,{space:2,children:[b,y]}),_[38]=b,_[39]=y,_[40]=v):v=_[40],_[41]!==M?(j=M.length>0&&(0,o.jsx)(ej.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,o.jsx)(ev.Tooltip,{placement:"top",content:(0,o.jsx)(og,{collaborators:M}),portal:!0,children:(0,o.jsx)(ej.Box,{paddingLeft:2,paddingY:2,children:(0,o.jsx)(od,{maxLength:3,userIds:M,size:0,withTooltip:!1})})})}),_[41]=M,_[42]=j):j=_[42],_[43]!==f||_[44]!==v||_[45]!==j?(w=(0,o.jsxs)(ej.Flex,{align:"center",gap:3,children:[f,v,j]}),_[43]=f,_[44]=v,_[45]=j,_[46]=w):w=_[46],_[47]!==I.id||_[48]!==H||_[49]!==T||_[50]!==w?(S=(0,o.jsx)(ej.Card,{as:"button",onClick:H,padding:2,pressed:T,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":I.id,children:w}),_[47]=I.id,_[48]=H,_[49]=T,_[50]=w,_[51]=S):S=_[51],_[52]!==E||_[53]!==S?(C=(0,o.jsxs)(ej.Flex,{align:"center",gap:1,children:[S,E]}),_[52]=E,_[53]=S,_[54]=C):C=_[54],C}function ox(e){return(0,o.jsx)(oh,{userId:e},e)}let ob=e=>"publish"!==e.type,oy=e=>"publish"===e.type,ov="timeline-list-wrapper",oj=e=>{let t,n,i,l,r,c,u,p,m,h,g,f,x,b,y,v,j=(0,s.c)(51),{chunks:w,hasMoreChunks:S,lastChunk:C,onLoadMore:_,onSelect:I,listMaxHeight:T}=e,R=void 0===T?"calc(100vh - 280px)":T,[P,E]=(0,a.useState)(!1),{t:k}=(0,d.useTranslation)("studio"),D=C?.id;j[0]!==w?(t=function(e){let t=[];for(let n of e){if(oy(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(ob(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(oy(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}ob(n)&&t.push(n)}return t}(w),j[0]=w,j[1]=t):t=j[1];let F=t;j[2]!==F||j[3]!==D?(n=()=>{if(D){let e=F.find(e=>e.id===D);if(e&&ob(e)&&e.parentId)return new Set([e.parentId])}return new Set},j[2]=F,j[3]=D,j[4]=n):n=j[4];let[A,V]=(0,a.useState)(n);if(j[5]!==F||j[6]!==D?(i=()=>{if(D){let e=F.find(e=>e.id===D);if(e&&ob(e)&&e.parentId){let t=e.parentId;V(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},l=[F,D],j[5]=F,j[6]=D,j[7]=i,j[8]=l):(i=j[7],l=j[8]),(0,a.useEffect)(i,l),j[9]!==F||j[10]!==A){let e;j[12]!==A?(e=e=>!!oy(e)||!e.parentId||A.has(e.parentId),j[12]=A,j[13]=e):e=j[13],r=F.filter(e),j[9]=F,j[10]=A,j[11]=r}else r=j[11];let M=r;j[14]!==M.length||j[15]!==S||j[16]!==_?(c=()=>{M.length<16&&S&&_()},j[14]=M.length,j[15]=S,j[16]=_,j[17]=c):c=j[17],j[18]!==M||j[19]!==S||j[20]!==_?(u=[M,S,_],j[18]=M,j[19]=S,j[20]=_,j[21]=u):u=j[21],(0,a.useEffect)(c,u),j[22]===Symbol.for("react.memo_cache_sentinel")?(p=e=>()=>V(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),j[22]=p):p=j[22];let L=p;j[23]!==M||j[24]!==D?(m=D?M.findIndex(e=>e.id===D):-1,j[23]=M,j[24]=D,j[25]=m):m=j[25];let z=m;j[26]!==w||j[27]!==I?(h=e=>{let t=w.find(t=>t.id===e.id);t?I(t):(console.error("TimelineItem: chunk not found"),I(e))},j[26]=w,j[27]=I,j[28]=h):h=j[28];let O=h;j[29]!==A||j[30]!==M.length||j[31]!==O||j[32]!==S||j[33]!==D?(g=(e,t)=>{let{activeIndex:n}=t;return(0,o.jsxs)(ej.Box,{paddingBottom:1,paddingTop:+(0===n),paddingRight:1,paddingLeft:ob(e)&&e.parentId?4:1,children:[(0,o.jsx)(of,{chunk:e,isSelected:D===e.id,onSelect:O,collaborators:oy(e)?e.collaborators:void 0,optionsMenu:oy(e)&&e.children.length>0?(0,o.jsx)(ol,{isExpanded:A.has(e.id),onExpand:L(e.id)}):null}),n===M.length-1&&S&&(0,o.jsx)(d.LoadingBlock,{})]})},j[29]=A,j[30]=M.length,j[31]=O,j[32]=S,j[33]=D,j[34]=g):g=j[34];let B=g;j[35]===Symbol.for("react.memo_cache_sentinel")?(f=()=>E(!0),x=[],j[35]=f,j[36]=x):(f=j[35],x=j[36]),(0,a.useEffect)(f,x);let H=!z||P;return j[37]!==M.length||j[38]!==k?(b=0===M.length&&(0,o.jsxs)(or,{padding:3,space:3,children:[(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:k("timeline.error.no-document-history-title")}),(0,o.jsx)(ej.Text,{muted:!0,size:1,children:k("timeline.error.no-document-history-description")})]}),j[37]=M.length,j[38]=k,j[39]=b):b=j[39],j[40]!==M||j[41]!==R||j[42]!==_||j[43]!==B||j[44]!==z||j[45]!==k?(y=M.length>0&&(0,o.jsx)(oo,{direction:"column",$maxHeight:R,id:ov,children:(0,o.jsx)(d.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:k("timeline.list.aria-label"),autoFocus:"list",initialIndex:z,initialScrollAlign:"center",itemHeight:57,items:M,onEndReached:_,onEndReachedIndexOffset:20,overscan:5,renderItem:B,wrapAround:!1})}),j[40]=M,j[41]=R,j[42]=_,j[43]=B,j[44]=z,j[45]=k,j[46]=y):y=j[46],j[47]!==H||j[48]!==b||j[49]!==y?(v=(0,o.jsxs)(os,{$visible:H,"data-ui":"timeline",children:[b,y]}),j[47]=H,j[48]=b,j[49]=y,j[50]=v):v=j[50],v};function ow(e){let t,n,i,l,r,a,c=(0,s.c)(14),{versionError:u}=e,{t:p}=(0,d.useTranslation)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(d.TextWithTone,{tone:"critical",children:(0,o.jsx)(m.ErrorOutlineIcon,{})}),c[0]=t):t=c[0],c[1]!==p||c[2]!==u?(n=p(u?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=p,c[2]=u,c[3]=n):n=c[3],c[4]!==n?(i=(0,o.jsx)(d.TextWithTone,{size:1,tone:"critical",weight:"medium",children:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==p||c[7]!==u?(l=p(u?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=p,c[7]=u,c[8]=l):l=c[8],c[9]!==l?(r=(0,o.jsx)(d.TextWithTone,{size:1,tone:"critical",children:l}),c[9]=l,c[10]=r):r=c[10],c[11]!==i||c[12]!==r?(a=(0,o.jsxs)(ej.Flex,{align:"flex-start",gap:3,padding:4,children:[t,(0,o.jsxs)(ej.Stack,{space:4,children:[i,r]})]}),c[11]=i,c[12]=r,c[13]=a):a=c[13],a}let oS=(0,e_.styled)(ev.Popover)`
  overflow: hidden;
  overflow: clip;
`,oC="timeline-menu";function o_(e){let t,n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w=(0,s.c)(62),{chunk:S,mode:C,placement:_}=e,{setTimelineRange:I,timelineError:T,ready:R,timelineStore:P}=iV(),[E,k]=(0,a.useState)(!1),[D,F]=(0,a.useState)(null),[A,V]=(0,a.useState)(null),M=(0,ew.useToast)(),L=(0,d.useTimelineSelector)(P,oE),z=(0,d.useTimelineSelector)(P,oP),O=(0,d.useTimelineSelector)(P,oR),B=(0,d.useTimelineSelector)(P,oT),H=(0,d.useTimelineSelector)(P,oI),{t:$}=(0,d.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{k(!0)},w[0]=t):t=w[0];let N=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{k(!1)},w[1]=n):n=w[1];let G=n;w[2]!==D||w[3]!==E?(i=e=>{E&&("Escape"===e.key||"Tab"===e.key)&&(G(),D?.focus())},w[2]=D,w[3]=E,w[4]=i):i=w[4],(0,ej.useGlobalKeyDown)(i),w[5]!==D||w[6]!==A?(l=()=>[D,A],w[5]=D,w[6]=A,w[7]=l):l=w[7],(0,ej.useClickOutsideEvent)(E&&G,l),w[8]!==I||w[9]!==$||w[10]!==P||w[11]!==M?(r=e=>{try{(()=>{let[t,n]=P?.findRangeForRev(e)||[null,null];I(t,n)})()}catch(e){M.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[8]=I,w[9]=$,w[10]=P,w[11]=M,w[12]=r):r=w[12];let U=r;w[13]!==I||w[14]!==$||w[15]!==P||w[16]!==M?(c=e=>{try{(()=>{let[t,n]=P?.findRangeForSince(e)||[null,null];I(t,n)})()}catch(e){M.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[13]=I,w[14]=$,w[15]=P,w[16]=M,w[17]=c):c=w[17];let q=c;w[18]!==z||w[19]!==P?(u=()=>{z||P?.loadMore()},w[18]=z,w[19]=P,w[20]=u):u=w[20];let W=u;e:{let e,t;if(T){let e;w[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ow,{}),w[21]=e):e=w[21],p=e;break e}if("rev"===C){let e;w[22]!==L||w[23]!==W||w[24]!==O||w[25]!==B||w[26]!==U?(e=(0,o.jsx)(oj,{chunks:L,hasMoreChunks:O,lastChunk:B,onLoadMore:W,onSelect:U}),w[22]=L,w[23]=W,w[24]=O,w[25]=B,w[26]=U,w[27]=e):e=w[27],p=e;break e}w[28]!==L||w[29]!==B?(e=B?L.filter(e=>e.index<B.index):L,w[28]=L,w[29]=B,w[30]=e):e=w[30];let n=e;w[31]!==n||w[32]!==W||w[33]!==O||w[34]!==q||w[35]!==H?(t=(0,o.jsx)(oj,{chunks:n,hasMoreChunks:O,lastChunk:H,onLoadMore:W,onSelect:q}),w[31]=n,w[32]=W,w[33]=O,w[34]=q,w[35]=H,w[36]=t):t=w[36],p=t}let K=p;if(w[37]!==S||w[38]!==$){let e={timestamp:{dateStyle:"medium",timeStyle:"short"}};h=S?$(oa[S.type],{context:"timestamp",timestamp:new Date(S?.endTimestamp),formatParams:e}):$("timeline.latest-revision"),g=S?$("timeline.since",{timestamp:new Date(S?.endTimestamp),formatParams:e}):$("timeline.since-version-missing"),w[37]=S,w[38]=$,w[39]=h,w[40]=g}else h=w[39],g=w[40];let Y="rev"===C?h:g;w[41]!==A?(f={[oC]:A},w[41]=A,w[42]=f):f=w[42];let X=f,J=E&&K,Q=E?"timeline-menu-close-button":"timeline-menu-open-button",Z=!R,ee=E?G:N;return w[43]===Symbol.for("react.memo_cache_sentinel")?(x={maxWidth:"100%"},w[43]=x):x=w[43],w[44]!==Y||w[45]!==R||w[46]!==$?(b=R?Y:$("timeline.loading-history"),w[44]=Y,w[45]=R,w[46]=$,w[47]=b):b=w[47],w[48]!==E||w[49]!==Q||w[50]!==Z||w[51]!==ee||w[52]!==b?(y=(0,o.jsx)(ej.Flex,{width:"fill",children:(0,o.jsx)(ev.Button,{"data-testid":Q,disabled:Z,mode:"ghost",onClick:ee,ref:F,selected:E,width:"fill",tooltipProps:null,justify:"space-between",style:x,iconRight:m.ChevronDownIcon,text:b})}),w[48]=E,w[49]=Q,w[50]=Z,w[51]=ee,w[52]=b,w[53]=y):y=w[53],w[54]!==E||w[55]!==_||w[56]!==J||w[57]!==y?(v=(0,o.jsx)(oS,{"data-testid":"timeline-menu",constrainSize:!0,content:J,"data-ui":"versionMenu",open:E,placement:_,matchReferenceWidth:!0,portal:!0,ref:V,children:y}),w[54]=E,w[55]=_,w[56]=J,w[57]=y,w[58]=v):v=w[58],w[59]!==X||w[60]!==v?(j=(0,o.jsx)(ej.PortalProvider,{__unstable_elements:X,children:v}),w[59]=X,w[60]=v,w[61]=j):j=w[61],j}function oI(e){return e.sinceTime}function oT(e){return e.realRevChunk}function oR(e){return e.hasMoreChunks}function oP(e){return e.isLoading}function oE(e){return e.chunks}let ok=(0,e_.styled)(eT.motion.path)`
  transform-origin: center;
`,oD=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,o.jsx)(eT.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n[0]=e,n[1]=t):t=n[1],t},oF=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,o.jsx)(ok,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n[0]=e,n[1]=t):t=n[1],t},oA=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,o.jsx)(eT.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n[0]=e,n[1]=t):t=n[1],t},oV=e_.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,oM=e_.styled.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${oV} 1s ease-in-out infinite;
  }
`,oL={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},oz={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},oO={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},oB={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function oH(e){let t,n,i,l,r,a=(0,s.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return a[0]!==d?(t=(0,o.jsx)(oF,{variants:oO,initial:d,animate:d}),n=(0,o.jsx)(oD,{variants:oz,initial:d,animate:d}),a[0]=d,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==c||a[4]!==t||a[5]!==n?(i=(0,o.jsxs)(oM,{"data-rotate":c,children:[t,n]}),a[3]=c,a[4]=t,a[5]=n,a[6]=i):i=a[6],a[7]!==d?(l=(0,o.jsx)(oA,{variants:oB,initial:d,animate:d}),a[7]=d,a[8]=l):l=a[8],a[9]!==d||a[10]!==i||a[11]!==l?(r=(0,o.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,o.jsxs)(eT.motion.g,{variants:oL,initial:d,animate:d,children:[i,l]})}),a[9]=d,a[10]=i,a[11]=l,a[12]=r):r=a[12],r}let o$={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},oN=e=>{let t,n,i,l,r,a=(0,s.c)(13),{status:c}=e,{t:u}=(0,d.useTranslation)(C);if("saved"!==c&&"syncing"!==c)return null;let p=o$[c];return a[0]!==c?(t=(0,o.jsx)(oH,{status:c}),a[0]=c,a[1]=t):t=a[1],a[2]!==p.tone||a[3]!==t?(n=(0,o.jsx)(d.TextWithTone,{size:1,tone:p.tone,children:t}),a[2]=p.tone,a[3]=t,a[4]=n):n=a[4],a[5]!==p.i18nKey||a[6]!==u?(i=u(p.i18nKey),a[5]=p.i18nKey,a[6]=u,a[7]=i):i=a[7],a[8]!==i?(l=(0,o.jsx)(ej.Text,{muted:!0,size:1,children:i}),a[8]=i,a[9]=l):l=a[9],a[10]!==n||a[11]!==l?(r=(0,o.jsxs)(ej.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,l]}),a[10]=n,a[11]=l,a[12]=r):r=a[12],r},oG={minimal:!0,useTemporalPhrase:!0},oU=eT.motion.create(ej.Button),oq=eT.motion.create(ej.Box);function oW(e){return"timeline.operation.published"===e?"document-status.last-published":e}let oK=()=>{let e,t,n=(0,s.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{style:{margin:-5},children:(0,o.jsx)(d.AvatarSkeleton,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsxs)(ej.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,o.jsx)(ew.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},oY=e=>{let t,n,i,l,r,a,c,u,p=(0,s.c)(17),{author:m,translationKey:h,timestamp:g}=e,{onHistoryOpen:f,inspector:x,onHistoryClose:b}=iV(),{t:y}=(0,d.useTranslation)(),v=(0,d.useRelativeTime)(void 0===g?"":g,oG);p[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},i={opacity:0},p[0]=t,p[1]=n,p[2]=i):(t=p[0],n=p[1],i=p[2]);let j=x?.name===iq?b:f;return p[3]!==m?(l=m&&(0,o.jsx)("div",{style:{margin:-5},children:(0,o.jsx)(d.UserAvatar,{user:m,size:0})}),p[3]=m,p[4]=l):l=p[4],p[5]!==y||p[6]!==h?(r=y(h),p[5]=y,p[6]=h,p[7]=r):r=p[7],p[8]!==v||p[9]!==r?(a=(0,o.jsxs)(ej.Text,{muted:!0,size:1,children:[r," ",v]}),p[8]=v,p[9]=r,p[10]=a):a=p[10],p[11]!==l||p[12]!==a?(c=(0,o.jsxs)(ej.Flex,{align:"center",flex:"none",gap:3,children:[l,a]}),p[11]=l,p[12]=a,p[13]=c):c=p[13],p[14]!==j||p[15]!==c?(u=(0,o.jsx)(oU,{"data-testid":"pane-footer-document-status",animate:t,initial:n,exit:i,mode:"bleed",onClick:j,padding:2,muted:!0,children:c}),p[14]=j,p[15]=c,p[16]=u):u=p[16],u},oX=()=>{let e,t,n=(0,s.c)(6),{editState:i}=iV(),{selectedPerspective:l}=(0,d.usePerspective)();n[0]!==i||n[1]!==l?(e=(0,d.isPublishedPerspective)(l)&&i?.published?._updatedAt?{translationKey:d.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:i.published._updatedAt}:i?.version?._updatedAt?{translationKey:i.version._updatedAt===i.version._createdAt?d.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:d.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:i.version._updatedAt}:i?.draft?._updatedAt?{translationKey:i.draft._updatedAt===i.draft._createdAt?d.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:d.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:i.draft._updatedAt}:null,n[0]=i,n[1]=l,n[2]=e):e=n[2];let r=e;return r?(n[3]!==r.timestamp||n[4]!==r.translationKey?(t=(0,o.jsx)(oY,{author:"",translationKey:r.translationKey,timestamp:r.timestamp}),n[3]=r.timestamp,n[4]=r.translationKey,n[5]=t):t=n[5],t):null},oJ=()=>{let e,t,n=(0,s.c)(8),{events:i,loading:l}=(0,d.useEvents)(),r=i?.[0];if(!r&&l){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(oK,{}),n[0]=e):e=n[0],e}if(!r){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(oX,{}),n[1]=e):e=n[1],e}let a=r.author,c=d.TIMELINE_ITEM_I18N_KEY_MAPPING[r.documentVariantType][r.type];return n[2]!==c?(e=oW(c),n[2]=c,n[3]=e):e=n[3],n[4]!==r.author||n[5]!==r.timestamp||n[6]!==e?(t=(0,o.jsx)(oY,{author:a,translationKey:e,timestamp:r.timestamp}),n[4]=r.author,n[5]=r.timestamp,n[6]=e,n[7]=t):t=n[7],t},oQ=()=>{let e,t,n,i=(0,s.c)(10),{timelineStore:l}=iV(),r=(0,d.useTimelineSelector)(l,o0),a=(0,d.useTimelineSelector)(l,o1),c=r?.[0];if(!c&&a){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(oK,{}),i[0]=e):e=i[0],e}if(!c){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(oX,{}),i[1]=e):e=i[1],e}i[2]!==c.authors?(e=Array.from(c.authors),i[2]=c.authors,i[3]=e):e=i[3];let u=e[0],p=oa[c.type];return i[4]!==p?(t=oW(p),i[4]=p,i[5]=t):t=i[5],i[6]!==u||i[7]!==c.endTimestamp||i[8]!==t?(n=(0,o.jsx)(oY,{author:u,translationKey:t,timestamp:c.endTimestamp}),i[6]=u,i[7]=c.endTimestamp,i[8]=t,i[9]=n):n=i[9],n};function oZ(){let e,t,n,i,l,r,c,u=(0,s.c)(18),{documentId:p,documentType:m,editState:h,value:g}=iV(),[f,x]=(0,a.useState)(null),b=(0,d.useSource)().beta?.eventsAPI?.documents,y=(0,d.useSyncState)(p,m,h?.release),v=g?._updatedAt;return u[0]!==f||u[1]!==y.isSyncing?(e=()=>{if("syncing"===f&&!y.isSyncing){let e=setTimeout(()=>x("saved"),1e3);return()=>clearTimeout(e)}if("saved"===f){let e=setTimeout(()=>x(null),3e3);return()=>clearTimeout(e)}},u[0]=f,u[1]=y.isSyncing,u[2]=e):e=u[2],u[3]!==v||u[4]!==f||u[5]!==y.isSyncing?(t=[f,v,y.isSyncing],u[3]=v,u[4]=f,u[5]=y.isSyncing,u[6]=t):t=u[6],(0,a.useEffect)(e,t),u[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{x(null)},u[7]=n):n=u[7],u[8]!==p?(i=[p],u[8]=p,u[9]=i):i=u[9],(0,a.useLayoutEffect)(n,i),u[10]!==y.isSyncing?(l=()=>{y.isSyncing&&x("syncing")},u[10]=y.isSyncing,u[11]=l):l=u[11],u[12]!==v||u[13]!==y.isSyncing?(r=[y.isSyncing,v],u[12]=v,u[13]=y.isSyncing,u[14]=r):r=u[14],(0,a.useLayoutEffect)(l,r),u[15]!==b||u[16]!==f?(c=(0,o.jsx)(eR.AnimatePresence,{children:f?(0,o.jsx)(oq,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,o.jsx)(oN,{status:f||void 0})}):(0,o.jsx)(o.Fragment,{children:b?(0,o.jsx)(oJ,{}):(0,o.jsx)(oQ,{})})}),u[15]=b,u[16]=f,u[17]=c):c=u[17],c}function o0(e){return e.chunks}function o1(e){return e.isLoading}let o2=(0,e_.styled)(ej.Text)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function o3(){let e,t,n,i,l=(0,s.c)(9),{displayed:r,revisionNotFound:c}=iV(),p=(0,a.useContext)(u.EventsContext),h=p?.revision,g=p?.events.find(e=>e.id===h?.revisionId),{t:f}=(0,d.useTranslation)(),x=g?.timestamp||r?._updatedAt||r?._createdAt,b=x?(0,o.jsx)(d.Translate,{t:f,i18nKey:"document-status.revision-from",values:{date:(0,tG.format)(new Date(x),"MMM d, yyyy '@' pp")}}):null;l[0]!==b?(e={name:"revision",text:b,tone:"caution"},l[0]=b,l[1]=e):e=l[1];let y=e;return l[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(ej.Box,{flex:"none",children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(m.RestoreIcon,{})})}),l[2]=t):t=l[2],l[3]!==y||l[4]!==c||l[5]!==f?(n=c?(0,o.jsx)(d.Translate,{t:f,i18nKey:"document-status.revision-not-found"}):y.text,l[3]=y,l[4]=c,l[5]=f,l[6]=n):n=l[6],l[7]!==n?(i=(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(ej.Flex,{flex:1,gap:3,padding:2,children:[t,(0,o.jsx)(ej.Box,{flex:1,children:(0,o.jsx)(o2,{size:1,textOverflow:"ellipsis",children:n})})]})}),l[7]=n,l[8]=i):i=l[8],i}let o4=eT.motion.create(ej.Card);function o5(e){let t,n,i,l,r,c,u,p,m=(0,s.c)(22),{actionsBoxRef:h,createLinkMetadata:g}=e,{editState:f,onChange:x,revisionNotFound:b}=iV(),{params:y}=lI(),v=void 0===y?iN:y,{selectedPerspective:j}=(0,d.usePerspective)(),{title:w}=iX(),S=(0,d.useSanityCreateConfig)().components?.documentLinkedActions,C=!!v.rev,[_,I]=(0,a.useState)(null),[T,R]=(0,a.useState)(null);m[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{I(e.contentRect.width<480)},m[0]=t):t=m[0];let P=t;m[1]!==T?(n={element:T,onResize:P},m[1]=T,m[2]=n):n=m[2],function(e){let t,n,i=(0,s.c)(4),{element:l,onResize:r}=e;i[0]!==l||i[1]!==r?(t=()=>(l&&d.resizeObserver.observe(l,r),()=>{l&&d.resizeObserver.unobserve(l)}),n=[l,r],i[0]=l,i[1]=r,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,a.useLayoutEffect)(t,n)}(n);e:{let e=!!(f?.ready&&"boolean"==typeof _);if(j){if((0,d.isPublishedPerspective)(j)){i=e&&!!f?.published;break e}if((0,d.isReleaseDocument)(j)){i=e&&!!f?.version;break e}}i=e}let E=i;if(g&&(0,d.isSanityCreateLinked)(g)&&S){let e;m[3]!==S||m[4]!==g||m[5]!==x||m[6]!==w?(e=(0,o.jsx)(S,{metadata:g,panelPortalElementId:l0,onDocumentChange:x,documentTitle:w}),m[3]=S,m[4]=g,m[5]=x,m[6]=w,m[7]=e):e=m[7],l=e}else if(C){let e;m[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(r6,{}),m[8]=e):e=m[8],l=e}else{let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(r3,{}),m[9]=e):e=m[9],l=e}if(C&&b)return null;let k=C?"revision":"published";m[10]===Symbol.for("react.memo_cache_sentinel")?(r={opacity:.2},m[10]=r):r=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:1,transition:{duration:.3}},m[11]=c):c=m[11];let D=C?"caution":void 0;return m[12]!==l||m[13]!==h||m[14]!==_||m[15]!==E||m[16]!==C?(u=E&&(0,o.jsxs)(ej.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!C,paddingRight:+!C,children:[(0,o.jsxs)(ej.Flex,{align:"center",flex:1,gap:_?2:3,wrap:"wrap",paddingRight:3,children:[(0,o.jsxs)(ej.Flex,{align:"center",children:[C?(0,o.jsx)(o3,{}):(0,o.jsx)(oZ,{}),(0,o.jsx)(rF,{})]}),(0,o.jsx)(rL,{})]}),(0,o.jsxs)(ej.Flex,{align:"flex-start",justify:"flex-end",ref:h,style:{flexShrink:0,marginLeft:"auto"},children:[(0,o.jsx)(rF,{}),l]})]}),m[12]=l,m[13]=h,m[14]=_,m[15]=E,m[16]=C,m[17]=u):u=m[17],m[18]!==k||m[19]!==D||m[20]!==u?(p=(0,o.jsx)(o4,{initial:r,animate:c,tone:D,radius:3,ref:R,sizing:"border",padding:2,children:u},k),m[18]=k,m[19]=D,m[20]=u,m[21]=p):p=m[21],p}let o6=(0,a.memo)(function(e){let t,n,i,l,r,a,c,u,p,m,h,g,f,x=(0,s.c)(26);x[0]!==e?({actionsBoxElement:t,activeIndex:n,as:m,children:i,id:l,onActionStart:r,onKeyDown:a,rootRef:u,states:p,...c}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=l,x[5]=r,x[6]=a,x[7]=c,x[8]=u,x[9]=p,x[10]=m):(t=x[1],n=x[2],i=x[3],l=x[4],r=x[5],a=x[6],c=x[7],u=x[8],p=x[9],m=x[10]);let b=void 0===m?"div":m,y=p[n];x[11]!==r||x[12]!==a||x[13]!==p?(h=e=>{let t=p.filter(t=>t.shortcut&&(0,tv.isHotkey)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),r(p.indexOf(n));return}a&&a(e)},x[11]=r,x[12]=a,x[13]=p,x[14]=h):h=x[14];let v=h;return x[15]!==t||x[16]!==y?(g=y&&y.dialog&&(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,o.jsx)(rg,{dialog:y.dialog,referenceElement:t})}),x[15]=t,x[16]=y,x[17]=g):g=x[17],x[18]!==b||x[19]!==i||x[20]!==v||x[21]!==l||x[22]!==c||x[23]!==u||x[24]!==g?(f=(0,o.jsxs)(b,{id:l,onKeyDown:v,tabIndex:-1,...c,ref:u,children:[i,g]}),x[18]=b,x[19]=i,x[20]=v,x[21]=l,x[22]=c,x[23]=u,x[24]=g,x[25]=f):f=x[25],f}),o8=(0,a.memo)(e=>{let t,n,i,l,r,d,c=(0,s.c)(12);c[0]!==e?({actionsBoxElement:t,as:l,children:n,...i}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=l):(t=c[1],n=c[2],i=c[3],l=c[4]);let u=void 0===l?"div":l,[p,m]=(0,a.useState)(-1);c[5]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{m(e)},c[5]=r):r=c[5];let h=r;return c[6]!==t||c[7]!==p||c[8]!==u||c[9]!==n||c[10]!==i?(d=(0,o.jsx)(av,{children:e=>{let{states:l}=e;return(0,o.jsx)(o6,{...i,activeIndex:p,actionsBoxElement:t,as:u,onActionStart:h,states:l,children:n})}}),c[6]=t,c[7]=p,c[8]=u,c[9]=n,c[10]=i,c[11]=d):d=c[11],d});o8.displayName="Memo(DocumentActionShortcuts)";let o7=()=>{let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(m.CheckmarkIcon,{style:{visibility:"hidden"}}),t[0]=e):e=t[0],e};function o9(e){let t,n,i,l,r,a,c,u=(0,s.c)(23),{documentType:p,value:m,currentMinWidth:h,paneKey:g,minWidth:f}=e,{t:x}=(0,d.useTranslation)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==x||u[3]!==t?(n=(0,o.jsx)(d.Translate,{t:x,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=x,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==x?(i=p&&(0,o.jsx)(ej.Text,{as:"p",children:(0,o.jsx)(d.Translate,{t:x,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=x,u[7]=i):i=u[7],u[8]!==p||u[9]!==x?(l=!p&&(0,o.jsx)(ej.Text,{as:"p",children:x("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=x,u[10]=l):l=u[10],u[11]!==m?(r=d.isDev&&m&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ej.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,o.jsx)(ej.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,o.jsx)(ej.Code,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),u[11]=m,u[12]=r):r=u[12],u[13]!==i||u[14]!==l||u[15]!==r?(a=(0,o.jsxs)(ej.Stack,{space:4,children:[i,l,r]}),u[13]=i,u[14]=l,u[15]=r,u[16]=a):a=u[16],u[17]!==h||u[18]!==f||u[19]!==g||u[20]!==n||u[21]!==a?(c=(0,o.jsx)(iE,{currentMinWidth:h,flex:2.5,minWidth:f,paneKey:g,title:n,tone:"caution",children:a}),u[17]=h,u[18]=f,u[19]=g,u[20]=n,u[21]=a,u[22]=c):c=u[22],c}let se=["fixed","fixed","absolute"];function st(e){let t,n,i,l,r,a,c=(0,s.c)(16),{documentPanelPortalElement:u,setFooterElement:p,setActionsBoxElement:m}=e,h=(0,d.useZIndex)(),{value:g}=iV();c[0]!==u?(t={[l0]:u},c[0]=u,c[1]=t):t=c[1];let f=t;c[2]!==g?(n=(0,d.getSanityCreateLinkMetadata)(g),c[2]=g,c[3]=n):n=c[3];let x=n;return c[4]!==x||c[5]!==m?(i=(0,o.jsx)(ev.TooltipDelayGroupProvider,{children:(0,o.jsx)(o5,{actionsBoxRef:m,createLinkMetadata:x})}),c[4]=x,c[5]=m,c[6]=i):i=c[6],c[7]!==p||c[8]!==i?(l=(0,o.jsx)(im,{ref:p,padding:1,children:i}),c[7]=p,c[8]=i,c[9]=l):l=c[9],c[10]!==l||c[11]!==h.portal?(r=(0,o.jsx)(ew.DialogProvider,{position:se,zOffset:h.portal,children:l}),c[10]=l,c[11]=h.portal,c[12]=r):r=c[12],c[13]!==f||c[14]!==r?(a=(0,o.jsx)(ej.PortalProvider,{__unstable_elements:f,children:r}),c[13]=f,c[14]=r,c[15]=a):a=c[15],a}let sn=[],si=["fixed","fixed","absolute"],sl=(0,e_.styled)(d.ChangeConnectorRoot)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function sr(){var e;let t,n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w,S,_,I,T,R,P=(0,s.c)(82),{changesOpen:E,displayed:k,documentId:D,documentType:F,editState:A,fieldActions:V,focusPath:M,inspectOpen:L,inspector:z,inspectors:O,onFocus:B,onHistoryOpen:H,onMenuAction:$,onPathOpen:N,paneKey:G,schemaType:U,value:q,previewUrl:W}=iV(),{stickyParams:K}=(0,eE.useRouter)(),{params:Y}=lI(),{features:X}=i$(),{t:J}=(0,d.useTranslation)(C),{collapsed:Q}=n3(),Z=(0,d.useZIndex)(),[ee,et]=(0,a.useState)(null),[en,ei]=(0,a.useState)(null),[el,er]=(0,a.useState)(null),[eo,es]=(0,a.useState)(null),[ea,ed]=(0,a.useState)(null);P[0]!==M||P[1]!==ee||P[2]!==q?(t={element:ee,focusPath:M,value:q},P[0]=M,P[1]=ee,P[2]=q,P[3]=t):t=P[3],(0,d.useGlobalCopyPasteElementHandler)(t),P[4]===Symbol.for("react.memo_cache_sentinel")?(n=[],P[4]=n):n=P[4];let[ec,eu]=(0,a.useState)(n);P[5]===Symbol.for("react.memo_cache_sentinel")?(i=[],P[5]=i):i=P[5];let[ep,em]=(0,a.useState)(i),eh=(0,ew.useElementRect)(en),eg=(0,ew.useElementRect)(el),ef=eh?.height,ex=eg?.height,eb=600+320*!!z,ey=320+320*!!z;P[6]!==z?.name||P[7]!==O?(l=O?.find(e=>e.name===z?.name),P[6]=z?.name,P[7]=O,P[8]=l):l=P[8];let ev=l;P[9]!==k||P[10]!==D||P[11]!==A?(r={displayed:k,documentId:D,editState:A},P[9]=k,P[10]=D,P[11]=A,P[12]=r):r=P[12];let eS=(0,d.useDocumentIdStack)(r),eC=!!q,e_="true"===K.displayInlineChanges;P[13]!==ev||P[14]!==eS||P[15]!==X||P[16]!==eC||P[17]!==ec||P[18]!==O||P[19]!==W||P[20]!==J||P[21]!==e_?(T=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,l)=>{let r=i[l];return!r||r.hidden?null:{action:`${iG}${n.name}`,group:r.showAsAction?void 0:"inspectors",icon:r.icon,disabled:!t,selected:e?.name===n.name,shortcut:r.hotkeys?.join("+"),showAsAction:r.showAsAction,title:r.title,tone:r.tone}}).filter(Boolean)}(e={currentInspector:ev,features:X,hasValue:eC,inspectorMenuItems:ec,inspectors:O,previewUrl:W,documentIdStack:eS,t:J,displayInlineChanges:e_}),R=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:m.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u"&&{reason:t("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:m.TransferIcon,disabled:n}}(e),function({displayInlineChanges:e,t}){return{action:"toggleInlineChanges",group:"inspectors",title:t("toggle-inline-changes.menu-item.title"),icon:e?m.CheckmarkIcon:o7}}(e)].filter(Boolean),c=[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:m.LinkIcon},...T,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:m.JsonIcon,disabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...R],P[13]=ev,P[14]=eS,P[15]=X,P[16]=eC,P[17]=ec,P[18]=O,P[19]=W,P[20]=J,P[21]=e_,P[22]=c):c=P[22];let eI=c;P[23]!==eI||P[24]!==$?(u=e=>{for(let t of eI)if(t.shortcut&&(0,tv.isHotkey)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),$(t);return}},P[23]=eI,P[24]=$,P[25]=u):u=P[25];let eT=u;P[26]!==B||P[27]!==N?(p=e=>{N(e),B(e)},P[26]=B,P[27]=N,P[28]=p):p=P[28];let eR=p;if(!U){let e;return P[29]!==eb||P[30]!==F||P[31]!==ey||P[32]!==G||P[33]!==q?(e=(0,o.jsx)(o9,{currentMinWidth:eb,documentType:F,minWidth:ey,paneKey:G,value:q}),P[29]=eb,P[30]=F,P[31]=ey,P[32]=G,P[33]=q,P[34]=e):e=P[34],e}P[35]!==D||P[36]!==F||P[37]!==O?(h=O.length>0&&(0,o.jsx)(iW,{documentId:D,documentType:F,inspectors:O,onMenuItems:eu}),P[35]=D,P[36]=F,P[37]=O,P[38]=h):h=P[38],P[39]!==D||P[40]!==F||P[41]!==V||P[42]!==U?(g=V.length>0&&U&&(0,o.jsx)(d.FieldActionsResolver,{actions:V,documentId:D,documentType:F,onActions:em,path:sn,schemaType:U}),P[39]=D,P[40]=F,P[41]=V,P[42]=U,P[43]=g):g=P[43],P[44]!==eI?(f=(0,o.jsx)(rR,{ref:er,menuItems:eI}),P[44]=eI,P[45]=f):f=P[45];let eP=Q?void 0:"fill",ek=E&&Y?.changesInspectorTab==="review",eD=ef||null,eF=ex||null;return P[46]!==ea?(x=(0,o.jsx)(st,{documentPanelPortalElement:ea,setFooterElement:ei,setActionsBoxElement:es}),P[46]=ea,P[47]=x):x=P[47],P[48]!==L||P[49]!==ee||P[50]!==eD||P[51]!==eF||P[52]!==x?(b=(0,o.jsx)(rn,{footerHeight:eD,headerHeight:eF,isInspectOpen:L,rootElement:ee,setDocumentPanelPortalElement:ed,footer:x}),P[48]=L,P[49]=ee,P[50]=eD,P[51]=eF,P[52]=x,P[53]=b):b=P[53],P[54]!==eR||P[55]!==H||P[56]!==ek||P[57]!==b?(y=(0,o.jsx)(sl,{"data-testid":"change-connector-root",isReviewChangesOpen:ek,onOpenReviewChanges:H,onSetFocus:eR,children:b}),P[54]=eR,P[55]=H,P[56]=ek,P[57]=b,P[58]=y):y=P[58],P[59]!==eP||P[60]!==y?(v=(0,o.jsx)(ej.Flex,{direction:"column",flex:1,height:eP,children:y}),P[59]=eP,P[60]=y,P[61]=v):v=P[61],P[62]!==v||P[63]!==Z.paneDialog?(j=(0,o.jsx)(ew.DialogProvider,{position:si,zOffset:Z.paneDialog,children:v}),P[62]=v,P[63]=Z.paneDialog,P[64]=j):j=P[64],P[65]===Symbol.for("react.memo_cache_sentinel")?(w=(0,o.jsx)(iQ,{}),P[65]=w):w=P[65],P[66]!==eo||P[67]!==eb||P[68]!==eT||P[69]!==ey||P[70]!==G||P[71]!==f||P[72]!==j?(S=(0,o.jsxs)(o8,{actionsBoxElement:eo,as:n8,currentMinWidth:eb,"data-testid":"document-pane",flex:2.5,id:G,minWidth:ey,onKeyUp:eT,rootRef:et,children:[f,j,w]}),P[66]=eo,P[67]=eb,P[68]=eT,P[69]=ey,P[70]=G,P[71]=f,P[72]=j,P[73]=S):S=P[73],P[74]!==ep||P[75]!==S?(_=(0,o.jsx)(iz,{children:(0,o.jsx)(d.FieldActionsProvider,{actions:ep,path:sn,children:S})}),P[74]=ep,P[75]=S,P[76]=_):_=P[76],P[77]!==g||P[78]!==_||P[79]!==h||P[80]!==q?(I=(0,o.jsxs)(d.GetFormValueProvider,{value:q,children:[h,g,_]}),P[77]=g,P[78]=_,P[79]=h,P[80]=q,P[81]=I):I=P[81],I}let so=(e,t)=>{let n,i,l,r,o=(0,s.c)(11),c=(0,d.useHistoryStore)(),[u,p]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1);o[0]!==e||o[1]!==t?(n={documentId:e,documentType:t},o[0]=e,o[1]=t,o[2]=n):n=o[2];let g=(0,d.useTimelineStore)(n),f=(0,d.useTimelineSelector)(g,ss);return o[3]!==e||o[4]!==c||o[5]!==f?(i=()=>{f&&e?(h(!0),c.getDocumentAtRevision(e,f).then(e=>{p(e||null),h(!1)}).catch(()=>{p(null),h(!1)})):(p(null),h(!1))},l=[e,f,c],o[3]=e,o[4]=c,o[5]=f,o[6]=i,o[7]=l):(i=o[6],l=o[7]),(0,a.useEffect)(i,l),o[8]!==u||o[9]!==m?(r={lastRevisionDocument:u,loading:m},o[8]=u,o[9]=m,o[10]=r):r=o[10],r};function ss(e){return e.lastNonDeletedRevId}let sa=(0,tp.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),sd=(0,tp.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),sc=(0,tp.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function su(e){return e.name===iq}function sp(e){let t=(0,d.isRecord)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}function sm(e){let t,n,i,l,r,p,m,h,g,f,x,b,y,v,j,w,S,_,I,T,R,P,E,k,D,F,A,V,M,L,z,O,B,H,$,N,G=(0,s.c)(204),{children:U,index:q,pane:W,paneKey:K,onFocusPath:Y,onSetMaximizedPane:X,maximized:J,forcedVersion:Q,historyStore:Z}=e,ee=void 0!==J&&J,{store:et,error:en,ready:ei,revisionDocument:el,onOlderRevision:er,sinceDocument:eo,isPristine:es,revisionId:ea,lastNonDeletedRevId:ed}=Z,ec=(0,d.useSchema)(),{setDocumentMeta:eu}=(0,d.useCopyPaste)(),{document:ep}=(0,d.useSource)(),{actions:em,badges:eh,unstable_fieldActions:eg,unstable_languageFilter:ef,drafts:ex}=ep,{enabled:eb}=ex,ey=(0,tu.useTelemetry)(),ev=(0,eE.useRouter)(),ej=lI(),eS=ej.setParams,{push:eC}=(0,ew.useToast)(),{options:e_,menuItemGroups:eI,title:eT,views:eR}=W,ek=void 0===eI?iU:eI,eD=void 0===eT?null:eT;G[0]!==eR?(t=void 0===eR?[]:eR,G[0]=eR,G[1]=t):t=G[1];let eF=t,eA=(0,d.useUnique)(e_),eV=eA.id;G[2]!==eV?(n=(0,c.getPublishedId)(eV),G[2]=eV,G[3]=n):n=G[3];let eM=n,eL=e_.type,ez=(0,d.useUnique)(ej.params)||iN,{buildStudioUrl:eO}=(0,d.useStudioUrl)(),eB=(0,d.usePerspective)(),{document:eH,beta:eN}=(0,d.useWorkspace)(),{drafts:eU}=eH,{enabled:eK}=eU,eY=eN?.form?.enhancedObjectDialog?.enabled;e:{let e;if(Q){i=Q;break e}G[4]!==eB.selectedPerspectiveName||G[5]!==eB.selectedReleaseId?(e={selectedPerspectiveName:eB.selectedPerspectiveName,selectedReleaseId:eB.selectedReleaseId},G[4]=eB.selectedPerspectiveName,G[5]=eB.selectedReleaseId,G[6]=e):e=G[6],i=e}let{selectedReleaseId:eX,selectedPerspectiveName:eJ}=i,eQ=nE();G[7]!==eM||G[8]!==eL||G[9]!==eA||G[10]!==ez?(l={paneOptions:eA,documentId:eM,documentType:eL,params:ez},G[7]=eM,G[8]=eL,G[9]=eA,G[10]=ez,G[11]=l):l=G[11];let eZ=(e=>{var t;let n,i,l,r,o,a,c,u,p=(0,s.c)(13),{paneOptions:m,documentType:h,documentId:g,params:f}=e,x=(0,d.useTemplates)(),b=lI(),y=(0,d.useUnique)(b.payload);p[0]!==h||p[1]!==m.template||p[2]!==m.templateParameters||p[3]!==y||p[4]!==f.template||p[5]!==x?(l=(t={documentType:h,templateName:m.template,templateParams:m.templateParameters,panePayload:y,urlTemplate:f.template}).panePayload||{},r=t.templateName,t.urlTemplate&&r&&r!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${r}". Using "${r}".`),o=r||t.urlTemplate,a=x.filter(e=>e.schemaType===t.documentType),c={...t.templateParams,..."object"==typeof l&&l||{}},u=o,o||1!==a.length||(u=a[0].id),n={templateName:u,templateParams:c},p[0]=h,p[1]=m.template,p[2]=m.templateParameters,p[3]=y,p[4]=f.template,p[5]=x,p[6]=n):n=p[6];let{templateName:v,templateParams:j}=n;p[7]!==g||p[8]!==h||p[9]!==f.version||p[10]!==v||p[11]!==j?(i={documentId:g,documentType:h,templateName:v,templateParams:j,version:f.version},p[7]=g,p[8]=h,p[9]=f.version,p[10]=v,p[11]=j,p[12]=i):i=p[12];let w=(0,d.useInitialValue)(i);return(0,d.useUnique)(w)})(l),e0=eZ.loading;G[12]!==eM||G[13]!==eL||G[14]!==ez||G[15]!==eS?(r={documentId:eM,documentType:eL,params:ez,setParams:eS},G[12]=eM,G[13]=eL,G[14]=ez,G[15]=eS,G[16]=r):r=G[16];let{changesOpen:e1,currentInspector:e2,inspectors:e4,closeInspector:e5,openInspector:e6,handleHistoryClose:e9,handleHistoryOpen:te,handleInspectorAction:tt,inspectOpen:tn,handleLegacyInspectClose:ti}=function(e){let t,n,i,l,r,o,c,u,p,m,h,g,f,x,b=(0,s.c)(54),{documentId:y,documentType:v,params:j,setParams:w}=e,{features:S}=i$(),C=(0,d.useSource)().document.inspectors;b[0]!==y||b[1]!==v||b[2]!==C?(t=C({documentId:y,documentType:v}),b[0]=y,b[1]=v,b[2]=C,b[3]=t):t=b[3];let _=t;b[4]!==j.inspect?(n=()=>j.inspect||null,b[4]=j.inspect,b[5]=n):n=b[5];let[I,T]=(0,a.useState)(n),R=(0,a.useRef)(j.inspect);b[6]!==j.inspect?(i=()=>{R.current!==j.inspect&&(R.current=j.inspect,T(j.inspect||null))},l=[j.inspect],b[6]=j.inspect,b[7]=i,b[8]=l):(i=b[7],l=b[8]),(0,a.useEffect)(i,l),b[9]!==I||b[10]!==_?(r=_?.find(e=>e.name===I),b[9]=I,b[10]=_,b[11]=r):r=b[11];let P=r;b[12]!==_?(o=_.find(su),b[12]=_,b[13]=o):o=b[13];let E=o,k=P?.name===iq;b[14]!==P||b[15]!==_||b[16]!==j||b[17]!==w?(c=e=>{let t=e&&_.find(t=>t.name===e);if(e&&!t)return void console.warn(`No inspector named "${e}"`);if(P){if(t){let e=t.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0});return}if(P){let e=P.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0})}}},b[14]=P,b[15]=_,b[16]=j,b[17]=w,b[18]=c):c=b[18];let D=c;b[19]!==P||b[20]!==_||b[21]!==j||b[22]!==w?(u=(e,t)=>{let n=_.find(t=>t.name===e);if(!n)return void console.warn(`No inspector named "${e}"`);if(P?.name===n.name)return void w({...j,...t,inspect:n.name});let i=j;P&&(i=(n.onClose?.({params:i})??{params:i}).params);let l=n.onOpen?.({params:i})??{params:i};T(n.name),R.current=n.name,w({...l.params,...t,inspect:n.name})},b[19]=P,b[20]=_,b[21]=j,b[22]=w,b[23]=u):u=b[23];let F=u;b[24]!==D||b[25]!==E?(p=()=>{E&&D(E.name)},b[24]=D,b[25]=E,b[26]=p):p=b[26];let A=p;b[27]!==S.reviewChanges||b[28]!==E||b[29]!==F?(m=()=>{S.reviewChanges&&E&&F(E.name,{changesInspectorTab:"review"})},b[27]=S.reviewChanges,b[28]=E,b[29]=F,b[30]=m):m=b[30];let V=m,M="on"===j.inspect;b[31]!==M||b[32]!==j||b[33]!==w?(h=e=>{w((void 0===e?!M:e)?{...j,inspect:"on"}:{...j,inspect:void 0})},b[31]=M,b[32]=j,b[33]=w,b[34]=h):h=b[34];let L=h;b[35]!==L?(g=()=>L(!1),b[35]=L,b[36]=g):g=b[36];let z=g;b[37]!==D||b[38]!==I||b[39]!==_||b[40]!==F||b[41]!==L?(f=e=>{if("inspect"===e.action)return L(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(iG.length),n=_.find(e=>e.name===t);return!!n&&(n.name===I?D(n.name):F(n.name),!0)},b[37]=D,b[38]=I,b[39]=_,b[40]=F,b[41]=L,b[42]=f):f=b[42];let O=f;return b[43]!==k||b[44]!==D||b[45]!==P||b[46]!==A||b[47]!==V||b[48]!==O||b[49]!==z||b[50]!==M||b[51]!==_||b[52]!==F?(x={changesOpen:k,currentInspector:P,inspectors:_,closeInspector:D,openInspector:F,handleHistoryClose:A,handleHistoryOpen:V,handleInspectorAction:O,handleLegacyInspectClose:z,inspectOpen:M},b[43]=k,b[44]=D,b[45]=P,b[46]=A,b[47]=V,b[48]=O,b[49]=z,b[50]=M,b[51]=_,b[52]=F,b[53]=x):x=b[53],x}(r),[tl,tr]=(0,a.useState)(!1),{lastRevisionDocument:to}=so(eM,eL);G[17]!==es||G[18]!==ei?(p=e=>!!ei&&!e?.draft&&!e?.published&&!e?.version&&!es,G[17]=es,G[18]=ei,G[19]=p):p=G[19];let ts=p;G[20]!==e1||G[21]!==eo?(m=e=>{let t=(0,d.selectUpstreamVersion)(e);return e1?eo||t:t||null},G[20]=e1,G[21]=eo,G[22]=m):m=G[22];let ta=m;G[23]!==eL||G[24]!==ec?(h=ec.get(eL),G[23]=eL,G[24]=ec,G[25]=h):h=G[25];let tc=h;G[26]!==ts||G[27]!==tl||G[28]!==eK||G[29]!==ez.rev||G[30]!==eB.selectedPerspective||G[31]!==tc?(g=e=>{let t=ts(e);return!!ez.rev||tl||t||!(0,d.isPerspectiveWriteable)({selectedPerspective:eB.selectedPerspective,isDraftModelEnabled:eK,schemaType:tc}).result},G[26]=ts,G[27]=tl,G[28]=eK,G[29]=ez.rev,G[30]=eB.selectedPerspective,G[31]=tc,G[32]=g):g=G[32];let tp=g;G[33]!==ed||G[34]!==to||G[35]!==er||G[36]!==el?(f=e=>er?el||{_id:e._id,_type:e._type}:!e._createdAt&&!e._updatedAt&&ed&&to?to:e,G[33]=ed,G[34]=to,G[35]=er,G[36]=el,G[37]=f):f=G[37];let tm=f;G[38]!==ez.path?(x=ez.path?(0,td.fromString)(ez.path):d.EMPTY_ARRAY,G[38]=ez.path,G[39]=x):x=G[39];let th="true"===ev.stickyParams.displayInlineChanges;G[40]!==e1||G[41]!==eM||G[42]!==eL||G[43]!==ta||G[44]!==tm||G[45]!==tp||G[46]!==eZ||G[47]!==Y||G[48]!==eJ||G[49]!==x||G[50]!==th?(b={changesOpen:e1,documentType:eL,documentId:eM,initialValue:eZ,comparisonValue:ta,releaseId:eJ,selectedPerspectiveName:eJ,initialFocusPath:x,readOnly:tp,onFocusPath:Y,getFormDocumentValue:tm,displayInlineChanges:th},G[40]=e1,G[41]=eM,G[42]=eL,G[43]=ta,G[44]=tm,G[45]=tp,G[46]=eZ,G[47]=Y,G[48]=eJ,G[49]=x,G[50]=th,G[51]=b):b=G[51];let{editState:tg,upstreamEditState:tf,hasUpstreamVersion:tx,connectionState:tb,focusPath:ty,onChange:tv,validation:tj,ready:tw,value:tS,formState:tC,permissions:t_,onPathOpen:tI,isPermissionsLoading:tT,formStateRef:tR,onProgrammaticFocus:tP,collapsedFieldSets:tE,collapsedPaths:tk,onBlur:tD,onFocus:tF,onSetActiveFieldGroup:tA,onSetCollapsedPath:tV,onSetCollapsedFieldSet:tM,openPath:tL}=(0,d.useDocumentForm)(b),{data:tz}=(0,d.useActiveReleases)();G[52]!==tz?(y=void 0===tz?[]:tz,G[52]=tz,G[53]=y):y=G[53];let tO=y;G[54]!==eb||G[55]!==ez||G[56]!==tO||G[57]!==eJ||G[58]!==eX||G[59]!==tS?(v=function(e,t,n,i,l,r){let o;switch(!0){case!!e?.rev:o="revision";break;case t&&(0,c.isVersionId)(n._id):{let e=r.find(e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===t);o=e&&(0,d.isCardinalityOneRelease)(e)?"scheduled-draft":"version";break}case"published"===i:o="published";break;case l:o="draft";break;default:o="published"}return o}(ez,eX,tS,eJ,eb,tO),G[54]=eb,G[55]=ez,G[56]=tO,G[57]=eJ,G[58]=eX,G[59]=tS,G[60]=v):v=G[60];let tB=v;G[61]!==tB||G[62]!==eM||G[63]!==eL||G[64]!==eX?(j={schemaType:eL,documentId:eM,versionType:tB,releaseId:eX},G[61]=tB,G[62]=eM,G[63]=eL,G[64]=eX,G[65]=j):j=G[65];let tH=j;G[66]!==em||G[67]!==tH?(w=em(tH),G[66]=em,G[67]=tH,G[68]=w):w=G[68];let t$=w;G[69]!==eY||G[70]!==tI||G[71]!==ez||G[72]!==eS?(S=e=>{if(tI(e),eY){let t=(0,d.pathToString)(e);ez.path!==t&&eS({...ez,path:t})}},G[69]=eY,G[70]=tI,G[71]=ez,G[72]=eS,G[73]=S):S=G[73];let tN=S;G[74]!==eh||G[75]!==eM||G[76]!==eL?(_=eh({schemaType:eL,documentId:eM}),G[74]=eh,G[75]=eM,G[76]=eL,G[77]=_):_=G[77];let tG=_;G[78]!==eM||G[79]!==eL||G[80]!==ef?(I=ef({schemaType:eL,documentId:eM}),G[78]=eM,G[79]=eL,G[80]=ef,G[81]=I):I=G[81];let tU=I,tq=(0,d.useUnique)(eF),tW=ez.view||tq[0]&&tq[0].id||null,tK=function(e){let t,n,i,l,r=(0,s.c)(6),{resolveProductionUrl:o}=(0,d.useSource)().document;r[0]===Symbol.for("react.memo_cache_sentinel")?(t=new e8.BehaviorSubject(void 0),r[0]=t):t=r[0];let c=t;return r[1]!==e?(n=()=>{c.next(e)},i=[c,e],r[1]=e,r[2]=n,r[3]=i):(n=r[2],i=r[3]),(0,a.useEffect)(n,i),r[4]!==o?(l=c.asObservable().pipe((0,eq.distinctUntilChanged)(),(0,eG.debounceTime)(500),(0,eW.switchMap)(e=>(0,d.isRecord)(e)&&"string"==typeof e._id&&"string"==typeof e._type?(0,e7.from)(o({document:e})):(0,e3.of)(void 0)),(0,eq.distinctUntilChanged)(),(0,e$.catchError)(sp)),r[4]=o,r[5]=l):l=r[5],(0,eP.useObservable)(l)}(tS),{t:tY}=(0,d.useTranslation)(C);G[82]!==eM||G[83]!==eL||G[84]!==eg||G[85]!==tc?(T=tc?eg({documentId:eM,documentType:eL,schemaType:tc}):[],G[82]=eM,G[83]=eL,G[84]=eg,G[85]=tc,G[86]=T):T=G[86];let tX=T,tJ=tw&&(!ez.rev||ei||!!en);G[87]!==tm||G[88]!==tS?(R=tm(tS),G[87]=tm,G[88]=tS,G[89]=R):R=G[89];let tQ=R;G[90]!==tQ||G[91]!==eM||G[92]!==tg?(P={strict:!0,displayed:tQ,documentId:eM,editState:tg},G[90]=tQ,G[91]=eM,G[92]=tg,G[93]=P):P=G[93];let{previousId:tZ}=(0,d.useDocumentIdStack)(P);G[94]!==ez||G[95]!==eS?(E=(e,t)=>{eS({...ez,since:e,rev:t||void 0})},G[94]=ez,G[95]=eS,G[96]=E):E=G[96];let t0=E;G[97]!==ej?(k=()=>ej.closeCurrent(),G[97]=ej,G[98]=k):k=G[98];let t1=k;G[99]!==ej?(D=()=>ej.duplicateCurrent(),G[99]=ej,G[100]=D):D=G[100];let t2=D;G[101]!==ev||G[102]!==ey?(F=()=>{let e="true"!==ev.stickyParams.displayInlineChanges;ey.log(e?sd:sc),ev.navigate({stickyParams:{displayInlineChanges:String(e)}})},G[101]=ev,G[102]=ey,G[103]=F):F=G[103];let t3=F;G[104]!==eO||G[105]!==eQ||G[106]!==eM||G[107]!==eL||G[108]!==te||G[109]!==tt||G[110]!==tK||G[111]!==tZ||G[112]!==eC||G[113]!==tY||G[114]!==ey||G[115]!==t3||G[116]!==tS._id?(A=async e=>{if("production-preview"===e.action&&tK)return window.open(tK),!0;if("copy-document-url"===e.action&&navigator){ey.log(sa);let e=eO({coreUi:e=>`${e}/intent/edit/id=${eM};type=${eL}`});return await navigator.clipboard.writeText(e),eC({id:"copy-document-url",status:"info",title:tY("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(te(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(iG))&&tt(e),"compareVersions"===e.action&&"u">typeof tZ?(eQ.navigateDiffView({mode:"version",previousDocument:{type:eL,id:tZ},nextDocument:{type:eL,id:tS._id}}),!0):"toggleInlineChanges"===e.action&&(t3(),!0))},G[104]=eO,G[105]=eQ,G[106]=eM,G[107]=eL,G[108]=te,G[109]=tt,G[110]=tK,G[111]=tZ,G[112]=eC,G[113]=tY,G[114]=ey,G[115]=t3,G[116]=tS._id,G[117]=A):A=G[117];let t4=A;G[118]!==eM||G[119]!==eL||G[120]!==tv||G[121]!==tc||G[122]!==eu?(V=()=>{eu({documentId:eM,documentType:eL,schemaType:tc,onChange:tv})},M=[eM,eL,tc,tv,eu],G[118]=eM,G[119]=eL,G[120]=tv,G[121]=tc,G[122]=eu,G[123]=V,G[124]=M):(V=G[123],M=G[124]),(0,a.useEffect)(V,M),G[125]!==ta||G[126]!==tf?(L=ta(tf),G[125]=ta,G[126]=tf,G[127]=L):L=G[127];let t5=L,t6=ts(tg),t8=er&&!el&&tJ;t:{if(tg.version&&(0,d.isGoingToUnpublish)(tg.version)){z=tg.published;break t}z=tQ}let t7=z,t9=e2||null;G[128]!==ek?(O=ek||[],G[128]=ek,G[129]=O):O=G[129],G[130]!==t$||G[131]!==tW||G[132]!==tG||G[133]!==e1||G[134]!==e5||G[135]!==tE||G[136]!==tk||G[137]!==t5||G[138]!==tb||G[139]!==t7||G[140]!==eM||G[141]!==eV||G[142]!==eL||G[143]!==tg||G[144]!==tX||G[145]!==ty||G[146]!==tC||G[147]!==e9||G[148]!==te||G[149]!==ti||G[150]!==t4||G[151]!==t1||G[152]!==t2||G[153]!==tN||G[154]!==tx||G[155]!==q||G[156]!==tn||G[157]!==e4||G[158]!==t6||G[159]!==tl||G[160]!==e0||G[161]!==tT||G[162]!==tU||G[163]!==ed||G[164]!==to||G[165]!==ee||G[166]!==tD||G[167]!==tv||G[168]!==tF||G[169]!==tA||G[170]!==tM||G[171]!==tV||G[172]!==X||G[173]!==e6||G[174]!==tL||G[175]!==K||G[176]!==t_||G[177]!==tK||G[178]!==tJ||G[179]!==ea||G[180]!==t8||G[181]!==tc||G[182]!==eX||G[183]!==t0||G[184]!==t9||G[185]!==O||G[186]!==en||G[187]!==et||G[188]!==eD||G[189]!==tj||G[190]!==tS||G[191]!==tq?(B={actions:t$,activeViewId:tW,badges:tG,changesOpen:e1,closeInspector:e5,collapsedFieldSets:tE,collapsedPaths:tk,compareValue:t5,connectionState:tb,displayed:t7,documentId:eM,documentIdRaw:eV,documentType:eL,editState:tg,fieldActions:tX,focusPath:ty,inspector:t9,inspectors:e4,onBlur:tD,onChange:tv,onFocus:tF,onPathOpen:tN,onHistoryClose:e9,onHistoryOpen:te,onInspectClose:ti,onMenuAction:t4,onPaneClose:t1,onPaneSplit:t2,onSetActiveFieldGroup:tA,onSetCollapsedPath:tV,onSetCollapsedFieldSet:tM,onSetMaximizedPane:X,maximized:ee,openInspector:e6,openPath:tL,index:q,inspectOpen:tn,validation:tj,menuItemGroups:O,paneKey:K,previewUrl:tK,ready:tJ,schemaType:tc,hasUpstreamVersion:tx,isPermissionsLoading:tT,isInitialValueLoading:e0,permissions:t_,setTimelineRange:t0,setIsDeleting:tr,isDeleting:tl,isDeleted:t6,timelineError:en,timelineStore:et,title:eD,value:tS,selectedReleaseId:eX,views:tq,formState:tC,unstable_languageFilter:tU,revisionId:ea,revisionNotFound:t8,lastNonDeletedRevId:ed,lastRevisionDocument:to},G[130]=t$,G[131]=tW,G[132]=tG,G[133]=e1,G[134]=e5,G[135]=tE,G[136]=tk,G[137]=t5,G[138]=tb,G[139]=t7,G[140]=eM,G[141]=eV,G[142]=eL,G[143]=tg,G[144]=tX,G[145]=ty,G[146]=tC,G[147]=e9,G[148]=te,G[149]=ti,G[150]=t4,G[151]=t1,G[152]=t2,G[153]=tN,G[154]=tx,G[155]=q,G[156]=tn,G[157]=e4,G[158]=t6,G[159]=tl,G[160]=e0,G[161]=tT,G[162]=tU,G[163]=ed,G[164]=to,G[165]=ee,G[166]=tD,G[167]=tv,G[168]=tF,G[169]=tA,G[170]=tM,G[171]=tV,G[172]=X,G[173]=e6,G[174]=tL,G[175]=K,G[176]=t_,G[177]=tK,G[178]=tJ,G[179]=ea,G[180]=t8,G[181]=tc,G[182]=eX,G[183]=t0,G[184]=t9,G[185]=O,G[186]=en,G[187]=et,G[188]=eD,G[189]=tj,G[190]=tS,G[191]=tq,G[192]=B):B=G[192];let ne=B,nt=(0,a.useRef)(void 0);return G[193]!==eY||G[194]!==tR||G[195]!==tP||G[196]!==ej||G[197]!==ez||G[198]!==tJ?(H=()=>{if(tJ&&ez.path){let{path:e,...t}=ez;e!==nt.current&&tP((0,td.resolveKeyedPath)(tR.current?.value,(0,td.fromString)(e))),eY||ej.setParams(t)}nt.current=ez.path},$=[tR,tP,ej,ez,tJ,eY],G[193]=eY,G[194]=tR,G[195]=tP,G[196]=ej,G[197]=ez,G[198]=tJ,G[199]=H,G[200]=$):(H=G[199],$=G[200]),(0,a.useEffect)(H,$),G[201]!==U||G[202]!==ne?(N=(0,o.jsx)(u.DocumentPaneContext.Provider,{value:ne,children:U}),G[201]=U,G[202]=ne,G[203]=N):N=G[203],N}let sh=e=>{let t,n,i,l,r,a,u,p=(0,s.c)(37),{params:m}=lI(),h=void 0===m?iN:m,g=sP(e.pane.options,h),f=(0,d.useSchema)(),x=g.type,b=!!f.get(g.type)?.liveEdit,{selectedPerspectiveName:y,selectedReleaseId:v,selectedPerspective:j}=(0,d.usePerspective)(),{data:w}=(0,d.useArchivedReleases)();p[0]!==g.id?(t=(0,c.getPublishedId)(g.id),p[0]=g.id,p[1]=t):t=p[1];let S=(0,d.useEditState)(t,x,"default",v),C=b&&"drafts"===j&&!S?.draft,{rev:_,since:I}=h,T=h.historyVersion;e:{if(C){let e;p[2]!==g.id?(e=(0,c.getPublishedId)(g.id),p[2]=g.id,p[3]=e):e=p[3],n=e;break e}if(T&&w.some(e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===T)){let e;p[4]!==T||p[5]!==g.id?(e=(0,c.getVersionId)(g.id,T),p[4]=T,p[5]=g.id,p[6]=e):e=p[6],n=e;break e}if(typeof y>"u"){let e;p[7]!==g.id?(e=(0,c.getDraftId)(g.id),p[7]=g.id,p[8]=e):e=p[8],n=e;break e}if("published"===y){let e;p[9]!==g.id?(e=(0,c.getPublishedId)(g.id),p[9]=g.id,p[10]=e):e=p[10],n=e;break e}if(0!==y.length){let e;p[11]!==g.id||p[12]!==y?(e=(0,c.getVersionId)(g.id,y),p[11]=g.id,p[12]=y,p[13]=e):e=p[13],n=e;break e}n=g.id}let R=n;p[14]!==R||p[15]!==g.type||p[16]!==_||p[17]!==I?(i={documentId:R,documentType:g.type,rev:_,since:I},p[14]=R,p[15]=g.type,p[16]=_,p[17]=I,p[18]=i):i=p[18];let P=(0,d.useEventsStore)(i),E=P.error,k=P.revision?.revisionId||null,D=!!(_&&!P.revision?.loading),F=P.revision?.document||null,A=P.sinceRevision?.document||null,V=!P.loading,M=0===P.events.length;p[19]!==P.events?(l=P.events.find(sg)?.id||null,p[19]=P.events,p[20]=l):l=p[20],p[21]!==P.error||p[22]!==M||p[23]!==l||p[24]!==k||p[25]!==D||p[26]!==F||p[27]!==A||p[28]!==V?(r={error:E,revisionId:k,onOlderRevision:D,revisionDocument:F,sinceDocument:A,ready:V,isPristine:M,lastNonDeletedRevId:l},p[21]=P.error,p[22]=M,p[23]=l,p[24]=k,p[25]=D,p[26]=F,p[27]=A,p[28]=V,p[29]=r):r=p[29];let L=r;return p[30]!==L||p[31]!==T||p[32]!==e?(a=T?(0,o.jsx)(d.PerspectiveProvider,{selectedPerspectiveName:T,excludedPerspectives:d.EMPTY_ARRAY,children:(0,o.jsx)(sm,{...e,historyStore:L})}):(0,o.jsx)(sm,{...e,historyStore:L}),p[30]=L,p[31]=T,p[32]=e,p[33]=a):a=p[33],p[34]!==a||p[35]!==P?(u=(0,o.jsx)(d.EventsProvider,{value:P,children:a}),p[34]=a,p[35]=P,p[36]=u):u=p[36],u};function sg(e){return!(0,d.isDeleteDocumentGroupEvent)(e)&&!(0,d.isDeleteDocumentVersionEvent)(e)}let sf=e=>{let t,n,i,l,r=(0,s.c)(20),{pane:u}=e,p=lI(),m=sP(u.options,p.params),h=p.params||iN,[g,f]=(0,a.useState)(null);r[0]!==m.id?(t=(0,c.getPublishedId)(m.id),r[0]=m.id,r[1]=t):t=r[1],r[2]!==m.type||r[3]!==h.rev||r[4]!==h.since||r[5]!==t?(n={documentId:t,documentType:m.type,onError:f,rev:h.rev,since:h.since},r[2]=m.type,r[3]=h.rev,r[4]=h.since,r[5]=t,r[6]=n):n=r[6];let x=(0,d.useTimelineStore)(n),b=(0,d.useTimelineSelector)(x,sx),y=(0,d.useTimelineSelector)(x,sb),v=(0,d.useTimelineSelector)(x,sy),j=(0,d.useTimelineSelector)(x,sv),w=(0,d.useTimelineSelector)(x,sj),S=(0,d.useTimelineSelector)(x,sw),C=(0,d.useTimelineSelector)(x,sS),_=y?.id||null,I=!!S;r[7]!==C||r[8]!==b||r[9]!==x||r[10]!==_||r[11]!==j||r[12]!==v||r[13]!==I||r[14]!==g||r[15]!==w?(i={store:x,error:g,revisionId:_,onOlderRevision:b,revisionDocument:j,sinceDocument:v,ready:w,isPristine:I,lastNonDeletedRevId:C},r[7]=C,r[8]=b,r[9]=x,r[10]=_,r[11]=j,r[12]=v,r[13]=I,r[14]=g,r[15]=w,r[16]=i):i=r[16];let T=i;return r[17]!==T||r[18]!==e?(l=(0,o.jsx)(sm,{...e,historyStore:T}),r[17]=T,r[18]=e,r[19]=l):l=r[19],l};function sx(e){return e.onOlderRevision}function sb(e){return e.revTime}function sy(e){return e.sinceAttributes}function sv(e){return e.timelineDisplayed}function sj(e){return e.timelineReady}function sw(e){return e.isPristine}function sS(e){return e.lastNonDeletedRevId}function sC(e){let t=(0,s.c)(4),{children:n}=e,i=lI(),{excludedPerspectives:l}=(0,d.usePerspective)(),{scheduledDraft:r}=i.params;if(r){let e;return t[0]!==n||t[1]!==l||t[2]!==r?(e=(0,o.jsx)(d.PerspectiveProvider,{selectedPerspectiveName:r,excludedPerspectives:l,children:n}),t[0]=n,t[1]=l,t[2]=r,t[3]=e):e=t[3],e}return n}let s_=(0,a.memo)(e=>{let t,n,i,l=(0,s.c)(9),r=(0,d.useSource)(),{setParams:a,params:c}=lI();l[0]!==c||l[1]!==a?(t=e=>{a({...c,scheduledDraft:e},{perspective:""})},l[0]=c,l[1]=a,l[2]=t):t=l[2];let u=t;return l[3]!==e||l[4]!==r.beta?.eventsAPI?.documents?(n=r.beta?.eventsAPI?.documents?(0,o.jsx)(sh,{...e}):(0,o.jsx)(sf,{...e}),l[3]=e,l[4]=r.beta?.eventsAPI?.documents,l[5]=n):n=l[5],l[6]!==u||l[7]!==n?(i=(0,o.jsx)(sC,{children:(0,o.jsx)(d.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:u,children:n})}),l[6]=u,l[7]=n,l[8]=i):i=l[8],i});s_.displayName="Memo(DocumentPaneProviderWrapper)";let sI=(0,a.memo)(function(e){let t,n,i=(0,s.c)(5),{name:l}=(0,d.useSource)(),r=e.pane.source||l;return i[0]!==e?(t=(0,o.jsx)(d.CopyPasteProvider,{children:(0,o.jsx)(sT,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==r||i[3]!==t?(n=(0,o.jsx)(d.SourceProvider,{name:r,children:t}),i[2]=r,i[3]=t,i[4]=n):n=i[4],n});function sT(e){var t,n,i;let l,r,c,u,p,m,h,g,f,x,b,y,v=(0,s.c)(57),{pane:j,paneKey:w}=e,{resolveNewDocumentOptions:S}=(0,d.useSource)().document,{selectedPerspectiveName:_}=(0,d.usePerspective)(),I=lI(),T=sP(j.options,I.params),{documentType:R,isLoaded:P}=(0,d.useDocumentType)(T.id,T.type);!function(){let e,t,n,i,l,r=(0,s.c)(10),{params:o,setParams:c}=lI(),u=void 0===o?iN:o,{selectedPerspectiveName:p}=(0,d.usePerspective)(),m=(0,a.useRef)(!1);r[0]!==u||r[1]!==c?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>u[e])&&c({...u,rev:"true"===u.preserveRev?u.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},r[0]=u,r[1]=c,r[2]=e):e=r[2];let h=(0,a.useEffectEvent)(e);r[3]!==p||r[4]!==h?(t=()=>{m.current&&h(p)},r[3]=p,r[4]=h,r[5]=t):t=r[5],r[6]!==p?(n=[p],r[6]=p,r[7]=n):n=r[7],(0,a.useEffect)(t,n),r[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(m.current=!0,()=>{m.current=!1}),l=[],r[8]=i,r[9]=l):(i=r[8],l=r[9]),(0,a.useEffect)(i,l)}();let E=((y=(0,s.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(b={pick:nG,defaultComponent:sr},y[0]=b):b=y[0],(0,d.useMiddlewareComponents)(b));v[0]!==T.id||v[1]!==T.type||v[2]!==S?(l=S({type:"document",documentId:T.id,schemaType:T.type}),v[0]=T.id,v[1]=T.type,v[2]=S,v[3]=l):l=v[3];let k=l;v[4]!==k?(r={templateItems:k},v[4]=k,v[5]=r):r=v[5];let[D,F]=(0,d.useTemplatePermissions)(r),A=P&&!F;v[6]!==R||v[7]!==A||v[8]!==T||v[9]!==e?(c=A&&R&&T.type!==R?(t=e,n=T,i=R,{...t,pane:{...t.pane,options:{...n,type:i}}}):e,v[6]=R,v[7]=A,v[8]=T,v[9]=e,v[10]=c):c=v[10];let V=c,{ReferenceChildLink:M,handleEditReference:L,groupIndex:z,routerPanesState:O}=I;v[11]!==z||v[12]!==O?(u=O[z+1]?.[0].params||{},v[11]=z,v[12]=O,v[13]=u):u=v[13];let B=u,H=O.length,{parentRefPath:$}=B;v[14]!==z||v[15]!==$||v[16]!==H?(p=$?{path:(0,td.fromString)($),state:z>=H-1?"none":z>=H-2?"selected":"pressed"}:{path:[],state:"none"},v[14]=z,v[15]=$,v[16]=H,v[17]=p):p=v[17];let N=p,{t:G}=(0,d.useTranslation)(C);if("*"===T.type&&!A){let e,t;return v[18]!==G?(e=G("panes.document-pane.document-not-found.loading"),v[18]=G,v[19]=e):e=v[19],v[20]!==w||v[21]!==e?(t=(0,o.jsx)(iA,{flex:2.5,minWidth:320,paneKey:w,title:e}),v[20]=w,v[21]=e,v[22]=t):t=v[22],t}if(!R){let e,t,n,i,l;return v[23]!==G?(e=G("panes.document-pane.document-not-found.title"),v[23]=G,v[24]=e):e=v[24],v[25]!==T.id?(t={id:T.id},v[25]=T.id,v[26]=t):t=v[26],v[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:sR},v[27]=n):n=v[27],v[28]!==G||v[29]!==t?(i=(0,o.jsx)(ej.Stack,{space:4,children:(0,o.jsx)(ej.Text,{as:"p",children:(0,o.jsx)(d.Translate,{t:G,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),v[28]=G,v[29]=t,v[30]=i):i=v[30],v[31]!==w||v[32]!==e||v[33]!==i?(l=(0,o.jsx)(iE,{flex:2.5,minWidth:320,paneKey:w,title:e,children:i}),v[31]=w,v[32]=e,v[33]=i,v[34]=l):l=v[34],l}let U=`${R}-${T.id}-${_||""}`;return v[35]!==E||v[36]!==T.id||v[37]!==T.type?(m=(0,o.jsx)(E,{documentId:T.id,documentType:T.type}),v[35]=E,v[36]=T.id,v[37]=T.type,v[38]=m):m=v[38],v[39]!==T.id||v[40]!==T.type||v[41]!==m?(h=(0,o.jsx)(iM,{documentId:T.id,documentType:T.type,children:m}),v[39]=T.id,v[40]=T.type,v[41]=m,v[42]=h):h=v[42],v[43]!==T.id||v[44]!==T.type||v[45]!==h?(g=(0,o.jsx)(n2,{documentId:T.id,documentType:T.type,children:h}),v[43]=T.id,v[44]=T.type,v[45]=h,v[46]=g):g=v[46],v[47]!==M||v[48]!==N||v[49]!==L||v[50]!==g||v[51]!==D?(f=(0,o.jsx)(d.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:M,onEditReference:L,initialValueTemplateItems:D,activePath:N,children:g}),v[47]=M,v[48]=N,v[49]=L,v[50]=g,v[51]=D,v[52]=f):f=v[52],v[53]!==V||v[54]!==U||v[55]!==f?(x=(0,o.jsx)(s_,{...V,children:f},U),v[53]=V,v[54]=U,v[55]=f,v[56]=x):x=v[56],x}function sR(e){let{children:t}=e;return(0,o.jsx)("code",{children:t})}function sP(e,t){let n,i,l=(0,s.c)(8);l[0]!==t?(n=void 0===t?{}:t,l[0]=t,l[1]=n):n=l[1];let r=n,o=(0,d.useTemplates)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let s=e.template||r.template;l[2]!==s||l[3]!==o?(t=s?o.find(e=>e.id===s):void 0,l[2]=s,l[3]=o,l[4]=t):t=l[4];let a=t?.schemaType;if(!a){i=e;break e}l[5]!==a||l[6]!==e?(n={...e,type:a},l[5]=a,l[6]=e,l[7]=n):n=l[7],i=n}return i}let sE=(0,a.forwardRef)(function(e,t){let n,i,l,r=(0,s.c)(9),{routerPanesState:d,groupIndex:c}=(0,a.useContext)(u.PaneRouterContext);r[0]!==c||r[1]!==d?(n=d.slice(0,c),r[0]=c,r[1]=d,r[2]=n):n=r[2];let p=n;r[3]!==p?(i={panes:p},r[3]=p,r[4]=i):i=r[4];let m=i;return r[5]!==e||r[6]!==t||r[7]!==m?(l=(0,o.jsx)(eE.StateLink,{...e,ref:t,state:m}),r[5]=e,r[6]=t,r[7]=m,r[8]=l):l=r[8],l}),sk=(0,a.forwardRef)(function(e,t){let n,i,l,r,d,c,p=(0,s.c)(19);p[0]!==e?({childId:n,childPayload:l,childParameters:i,...r}=e,p[0]=e,p[1]=n,p[2]=i,p[3]=l,p[4]=r):(n=p[1],i=p[2],l=p[3],r=p[4]);let{routerPanesState:m,groupIndex:h}=(0,a.useContext)(u.PaneRouterContext);if(p[5]!==n||p[6]!==i||p[7]!==l||p[8]!==h||p[9]!==m){let e;p[11]!==n||p[12]!==i||p[13]!==l?(e=[{id:n,params:i,payload:l}],p[11]=n,p[12]=i,p[13]=l,p[14]=e):e=p[14],d={panes:[...m.slice(0,h+1),e]},p[5]=n,p[6]=i,p[7]=l,p[8]=h,p[9]=m,p[10]=d}else d=p[10];return p[15]!==t||p[16]!==r||p[17]!==d?(c=(0,o.jsx)(eE.StateLink,{...r,ref:t,state:d}),p[15]=t,p[16]=r,p[17]=d,p[18]=c):c=p[18],c}),sD=(0,a.forwardRef)(function(e,t){let n,i,l,r,c,p,m,h=(0,s.c)(20),{routerPanesState:g,groupIndex:f,siblingIndex:x}=(0,a.useContext)(u.PaneRouterContext);h[0]!==e?({params:n,payload:i,...l}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=l):(n=h[1],i=h[2],l=h[3]);let b=(0,d.useUnique)(n),y=(0,d.useUnique)(i),v=g[f],j=v[x],w=b??j.params,S=y??j.payload;h[4]!==j||h[5]!==w||h[6]!==S?(r={...j,params:w,payload:S},h[4]=j,h[5]=w,h[6]=S,h[7]=r):r=h[7];let C=r;h[8]!==v||h[9]!==C||h[10]!==x?(c=[...v.slice(0,x),C,...v.slice(x+1)],h[8]=v,h[9]=C,h[10]=x,h[11]=c):c=h[11];let _=c;h[12]!==g||h[13]!==f||h[14]!==_?(p={panes:[...g.slice(0,f),_,...g.slice(f+1)]},h[12]=g,h[13]=f,h[14]=_,h[15]=p):p=h[15];let I=p;return h[16]!==I||h[17]!==t||h[18]!==l?(m=(0,o.jsx)(eE.StateLink,{ref:t,...l,state:I}),h[16]=I,h[17]=t,h[18]=l,h[19]=m):m=h[19],m}),sF=(0,a.forwardRef)(function(e,t){let n,i,l,r,a,d,u,p,m,h,g,f=(0,s.c)(24);f[0]!==e?({documentId:i,documentType:l,parentRefPath:r,children:n,template:d,...a}=e,f[0]=e,f[1]=n,f[2]=i,f[3]=l,f[4]=r,f[5]=a,f[6]=d):(n=f[1],i=f[2],l=f[3],r=f[4],a=f[5],d=f[6]),f[7]!==i?(u=(0,c.getPublishedId)(i),f[7]=i,f[8]=u):u=f[8];let x=d?.params;return f[9]!==r?(p=(0,td.toString)(r),f[9]=r,f[10]=p):p=f[10],f[11]!==d?(m=d&&{template:d?.id},f[11]=d,f[12]=m):m=f[12],f[13]!==l||f[14]!==p||f[15]!==m?(h={type:l,parentRefPath:p,...m},f[13]=l,f[14]=p,f[15]=m,f[16]=h):h=f[16],f[17]!==n||f[18]!==t||f[19]!==a||f[20]!==u||f[21]!==x||f[22]!==h?(g=(0,o.jsx)(sk,{...a,ref:t,childId:u,childPayload:x,childParameters:h,children:n}),f[17]=n,f[18]=t,f[19]=a,f[20]=u,f[21]=x,f[22]=h,f[23]=g):g=f[23],g}),sA=[];function sV(e){let t,n,i,l,r,a,d,c,p,m,h,g,f,x=(0,s.c)(60),{children:b,flatIndex:y,index:v,params:j,payload:w,siblingIndex:S}=e,{navigate:C,navigateIntent:_,resolvePathFromState:I}=(0,eE.useRouter)(),T=(0,eE.useRouterState)(),{panes:R,expand:P}=n3(),E=T?.panes||sA,k=R?.[R.length-2],D=v-1;x[0]!==D||x[1]!==E||x[2]!==T||x[3]!==S?(t=e=>{let t=E[D]||[],n=t[S],i=e(t,n),l=[...E.slice(0,D),i,...E.slice(D+1)];return{...T,panes:l}},x[0]=D,x[1]=E,x[2]=T,x[3]=S,x[4]=t):t=x[4];let F=t;x[5]!==F||x[6]!==C?(n=(e,t)=>{let n=F(e);return setTimeout(()=>C(n,t?{stickyParams:t}:void 0),0),n},x[5]=F,x[6]=C,x[7]=n):n=x[7];let A=n;x[8]!==F||x[9]!==I||x[10]!==S?(i=e=>I(F((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)])),x[8]=F,x[9]=I,x[10]=S,x[11]=i):i=x[11];let V=i;x[12]!==A||x[13]!==S?(l=e=>{A((t,n)=>[...t.slice(0,S),{...n,payload:e},...t.slice(S+1)])},x[12]=A,x[13]=S,x[14]=l):l=x[14];let M=l;x[15]!==A||x[16]!==S?(r=(e,t)=>{A((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)],t)},x[15]=A,x[16]=S,x[17]=r):r=x[17];let L=r;x[18]!==D||x[19]!==C||x[20]!==E?(a=e=>{let{id:t,parentRefPath:n,type:i,template:l,version:r}=e;C({panes:[...E.slice(0,D+1),[{id:t,params:{template:l.id,parentRefPath:(0,td.toString)(n),type:i,version:r},payload:l.params}]]})},x[18]=D,x[19]=C,x[20]=E,x[21]=a):a=x[21];let z=a,O=!!E[D]&&E[D].length>1,B=E[D]?E[D].length:0,H=y?sE:void 0;x[22]!==A?(c=e=>{let t=void 0===e?{}:e;A(()=>[{id:t.id||"",payload:t.payload,params:t.params||{}}])},d=()=>{A(sM)},x[22]=A,x[23]=d,x[24]=c):(d=x[23],c=x[24]),x[25]!==P||x[26]!==D||x[27]!==k||x[28]!==C||x[29]!==E?(p=e=>{(void 0===e||e)&&k&&P(k.element),C({panes:E.slice(0,D)})},x[25]=P,x[26]=D,x[27]=k,x[28]=C,x[29]=E,x[30]=p):p=x[30],x[31]!==A||x[32]!==S?(m=e=>{A((t,n)=>{let i={...n,payload:e?.payload||n.payload,params:e?.params||n.params};return[...t.slice(0,S),i,...t.slice(S)]})},x[31]=A,x[32]=S,x[33]=m):m=x[33],x[34]!==j||x[35]!==L?(h=e=>{let t=(0,eV.omit)(j,"view");return L(e?{...t,view:e}:t)},x[34]=j,x[35]=L,x[36]=h):h=x[36],x[37]!==V||x[38]!==y||x[39]!==D||x[40]!==z||x[41]!==_||x[42]!==j||x[43]!==w||x[44]!==E||x[45]!==L||x[46]!==M||x[47]!==S||x[48]!==d||x[49]!==p||x[50]!==m||x[51]!==h||x[52]!==O||x[53]!==B||x[54]!==H||x[55]!==c?(g={index:y,groupIndex:D,siblingIndex:S,payload:w,params:j,hasGroupSiblings:O,groupLength:B,routerPanesState:E,ChildLink:sk,BackLink:H,ReferenceChildLink:sF,handleEditReference:z,ParameterizedLink:sD,replaceCurrent:c,closeCurrent:d,closeCurrentAndAfter:p,duplicateCurrent:m,setView:h,setParams:L,setPayload:M,createPathWithParams:V,navigateIntent:_},x[37]=V,x[38]=y,x[39]=D,x[40]=z,x[41]=_,x[42]=j,x[43]=w,x[44]=E,x[45]=L,x[46]=M,x[47]=S,x[48]=d,x[49]=p,x[50]=m,x[51]=h,x[52]=O,x[53]=B,x[54]=H,x[55]=c,x[56]=g):g=x[56];let $=g;return x[57]!==b||x[58]!==$?(f=(0,o.jsx)(u.PaneRouterContext.Provider,{value:$,children:b}),x[57]=b,x[58]=$,x[59]=f):f=x[59],f}function sM(e,t){return e.length>1?e.filter(e=>e!==t):e}function sL(e){let t,n,i,l,r,a=(0,s.c)(14),{isSelected:c,pane:u,paneKey:p}=e;a[0]!==u?(t=(0,d.isRecord)(u)&&u.type||null,a[0]=u,a[1]=t):t=a[1];let m=t,{t:h}=(0,d.useTranslation)(C);return a[2]!==h?(n=h("panes.unknown-pane-type.title"),a[2]=h,a[3]=n):n=a[3],a[4]!==n?(i=(0,o.jsx)(iv,{title:n}),a[4]=n,a[5]=i):i=a[5],a[6]!==h||a[7]!==m?(l=(0,o.jsx)(ie,{children:(0,o.jsx)(ej.Box,{padding:4,children:"string"==typeof m?(0,o.jsx)(ej.Text,{as:"p",muted:!0,children:(0,o.jsx)(d.Translate,{t:h,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:m}})}):(0,o.jsx)(ej.Text,{as:"p",muted:!0,children:(0,o.jsx)(d.Translate,{t:h,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),a[6]=h,a[7]=m,a[8]=l):l=a[8],a[9]!==c||a[10]!==p||a[11]!==i||a[12]!==l?(r=(0,o.jsxs)(n8,{id:p,selected:c,children:[i,l]}),a[9]=c,a[10]=p,a[11]=i,a[12]=l,a[13]=r):r=a[13],r}let sz={component:(0,a.lazy)(()=>e.A(28515)),document:(0,a.lazy)(()=>Promise.resolve().then(function(){return cp})),documentList:(0,a.lazy)(()=>Promise.resolve().then(function(){return cm})),list:(0,a.lazy)(()=>e.A(62237))},sO=(0,a.memo)(function(e){let t,n,i,l,r=(0,s.c)(25),{active:d,childItemId:c,groupIndex:u,index:p,itemId:m,pane:h,paneKey:g,params:f,payload:x,path:b,selected:y,siblingIndex:v,maximized:j,onSetMaximizedPane:w}=e,S=sz[h.type]||sL;r[0]!==g||r[1]!==b||r[2]!==y?(t=(0,o.jsx)(iA,{paneKey:g,path:b,selected:y}),r[0]=g,r[1]=b,r[2]=y,r[3]=t):t=r[3];let C=c||"";return r[4]!==S||r[5]!==d||r[6]!==p||r[7]!==m||r[8]!==j||r[9]!==w||r[10]!==h||r[11]!==g||r[12]!==y||r[13]!==C?(n=(0,o.jsx)(S,{childItemId:C,index:p,itemId:m,isActive:d,isSelected:y,paneKey:g,pane:h,maximized:j,onSetMaximizedPane:w}),r[4]=S,r[5]=d,r[6]=p,r[7]=m,r[8]=j,r[9]=w,r[10]=h,r[11]=g,r[12]=y,r[13]=C,r[14]=n):n=r[14],r[15]!==t||r[16]!==n?(i=(0,o.jsx)(a.Suspense,{fallback:t,children:n}),r[15]=t,r[16]=n,r[17]=i):i=r[17],r[18]!==u||r[19]!==p||r[20]!==f||r[21]!==x||r[22]!==v||r[23]!==i?(l=(0,o.jsx)(sV,{flatIndex:p,index:u,params:f,payload:x,siblingIndex:v,children:i}),r[18]=u,r[19]=p,r[20]=f,r[21]=x,r[22]=v,r[23]=i,r[24]=l):l=r[24],l},({params:e={},payload:t=null,...n},{params:i={},payload:l=null,...r})=>{if(!(0,eM.isEqual)(e,i)||!(0,eM.isEqual)(t,l))return!1;for(let e of new Set([...Object.keys(n),...Object.keys(r)]))if(n[e]!==r[e])return!1;return!0});function sB(e){let t,n,i=(0,s.c)(10),{document:l}=e,r=(0,d.useSchema)().get(l._type),{t:a}=(0,d.useTranslation)(C),{title:c}=iX();if(!r){let e,t;return i[0]!==l._type||i[1]!==a?(e=a("doc-title.unknown-schema-type.text",{schemaType:l._type}),i[0]=l._type,i[1]=a,i[2]=e):e=i[2],i[3]!==e?(t=(0,o.jsx)("code",{children:e}),i[3]=e,i[4]=t):t=i[4],t}return i[5]!==a||i[6]!==c?(t=c||(0,o.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:a("doc-title.fallback.text")}),i[5]=a,i[6]=c,i[7]=t):t=i[7],i[8]!==t?(n=(0,o.jsx)(o.Fragment,{children:t}),i[8]=t,i[9]=n):n=i[9],n}let sH=(0,e_.styled)(ej.Box)`
  margin-left: auto;
`,s$=e_.styled.details`
  flex: none;

  &[open] ${sH} {
    transform: rotate(180deg);
  }
`,sN=e_.styled.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,sG=e_.styled.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,ej.rem)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,ej.rem)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,ej.rem)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,sU=(0,e_.styled)(ej.Flex)`
  min-height: 33px;
`,sq=e=>{let t,n,i,l,r,a,c=(0,s.c)(13),{t:u}=(0,d.useTranslation)(C),p=e.totalCount-e.references.length;return p?(c[0]!==p||c[1]!==u?(t=u("confirm-delete-dialog.other-reference-count.title",{count:p}),c[0]=p,c[1]=u,c[2]=t):t=c[2],c[3]!==t?(n=(0,o.jsx)(ej.Text,{size:1,muted:!0,children:t}),c[3]=t,c[4]=n):n=c[4],c[5]!==u?(i=u("confirm-delete-dialog.other-reference-count.tooltip"),c[5]=u,c[6]=i):i=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(ej.Text,{size:1,muted:!0,children:(0,o.jsx)(m.InfoOutlineIcon,{})}),c[7]=l):l=c[7],c[8]!==i?(r=(0,o.jsx)(ev.Tooltip,{portal:!0,placement:"top",content:i,children:l}),c[8]=i,c[9]=r):r=c[9],c[10]!==n||c[11]!==r?(a=(0,o.jsx)(ej.Box,{padding:2,children:(0,o.jsxs)(ej.Inline,{space:2,children:[n,r]})}),c[10]=n,c[11]=r,c[12]=a):a=c[12],a):null};function sW(e){let t,n,i,l,r,a,c,u=(0,s.c)(30),{icon:p,layout:m,presence:h,schemaType:g,sortOrder:f,value:x}=e,b=(0,d.useDocumentVersionInfo)(x._id),{perspectiveStack:y}=(0,d.usePerspective)();e:{let e;if(!f){t=void 0;break e}u[0]!==f.by?(e={ordering:{title:"",name:"",by:f.by}},u[0]=f.by,u[1]=e):e=u[1],t=e}let v=t;u[2]!==y||u[3]!==e.documentPreviewStore||u[4]!==g||u[5]!==x._id||u[6]!==v?(n=(0,d.getPreviewStateObservable)(e.documentPreviewStore,g,x._id,y,v),u[2]=y,u[3]=e.documentPreviewStore,u[4]=g,u[5]=x._id,u[6]=v,u[7]=n):n=u[7];let j=n;u[8]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},u[8]=i):i=u[8];let{snapshot:w,original:S,isLoading:C}=(0,eP.useObservable)(j,i);u[9]!==C||u[10]!==h||u[11]!==b.draft||u[12]!==b.published||u[13]!==b.versions?(l=C?null:(0,o.jsx)(ev.TooltipDelayGroupProvider,{children:(0,o.jsxs)(ej.Flex,{align:"center",gap:3,children:[h&&h.length>0&&(0,o.jsx)(d.DocumentPreviewPresence,{presence:h}),(0,o.jsx)(d.DocumentStatusIndicator,{draft:b.draft,published:b.published,versions:b.versions})]})}),u[9]=C,u[10]=h,u[11]=b.draft,u[12]=b.published,u[13]=b.versions,u[14]=l):l=u[14];let _=l;u[15]!==b.draft||u[16]!==b.published||u[17]!==b.versions?(r=(0,o.jsx)(d.DocumentStatus,{draft:b.draft,published:b.published,versions:b.versions}),u[15]=b.draft,u[16]=b.published,u[17]=b.versions,u[18]=r):r=u[18];let I=r;return u[19]!==S||u[20]!==w||u[21]!==x?(a=(0,d.getPreviewValueWithFallback)({snapshot:w,original:S,fallback:x}),u[19]=S,u[20]=w,u[21]=x,u[22]=a):a=u[22],u[23]!==p||u[24]!==C||u[25]!==m||u[26]!==_||u[27]!==a||u[28]!==I?(c=(0,o.jsx)(d.SanityDefaultPreview,{...a,isPlaceholder:C,icon:p,layout:m,status:_,tooltip:I}),u[23]=p,u[24]=C,u[25]=m,u[26]=_,u[27]=a,u[28]=I,u[29]=c):c=u[29],c}let sK=[];function sY(e){let t,n,i,l,r=(0,s.c)(16),{onClick:a,type:u,value:p}=e,m=p?._id;r[0]!==m?(t=(0,c.getPublishedId)(m),r[0]=m,r[1]=t):t=r[1];let h=(0,d.useDocumentPresence)(t),g=(0,d.useDocumentPreviewStore)(),{ReferenceChildLink:f}=lI();r[2]!==f||r[3]!==u?.name||r[4]!==p?._id?(n=function(e){return(0,o.jsx)(f,{documentId:p?._id,documentType:u?.name,parentRefPath:sK,...e})},r[2]=f,r[3]=u?.name,r[4]=p?._id,r[5]=n):n=r[5];let x=n,b=u?.icon,y=h?.length>0?h:sK;return r[6]!==g||r[7]!==b||r[8]!==y||r[9]!==u||r[10]!==p?(i=(0,o.jsx)(sW,{documentPreviewStore:g,icon:b,layout:"default",presence:y,schemaType:u,value:p}),r[6]=g,r[7]=b,r[8]=y,r[9]=u,r[10]=p,r[11]=i):i=r[11],r[12]!==a||r[13]!==x||r[14]!==i?(l=(0,o.jsx)(d.PreviewCard,{__unstable_focusRing:!0,as:x,"data-as":"a",onClick:a,radius:2,children:i}),r[12]=a,r[13]=x,r[14]=i,r[15]=l):l=r[15],l}let sX=(0,e_.styled)(ej.Text)`
  /* text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap; */
  max-width: 120px;
`,sJ=e=>{let t,n,i,l,r,a,u,p,m,h,g,f,x,b,y=(0,s.c)(44),{versionId:v,schemaType:j}=e,{t:w}=(0,d.useTranslation)(),S=(0,d.useDocumentPreviewStore)();y[0]!==v?(t=(0,d.getDocumentVariantType)(v),y[0]=v,y[1]=t):t=y[1];let C=t,{data:_}=(0,d.useActiveReleases)();if(y[2]!==S||y[3]!==C||y[4]!==j||y[5]!==v){let e=["version"===C?(0,c.getVersionFromId)(v):"published"===C?"published":"drafts"];n=(0,d.getPreviewStateObservable)(S,j,(0,c.getPublishedId)(v),e),y[2]=S,y[3]=C,y[4]=j,y[5]=v,y[6]=n}else n=y[6];let I=n;y[7]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},y[7]=i):i=y[7];let{snapshot:T,original:R,isLoading:P}=(0,eP.useObservable)(I,i);e:{let e;if("version"!==C){l=void 0;break e}if(y[8]!==_||y[9]!==v){let t;y[11]!==v?(t=e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(v),y[11]=v,y[12]=t):t=y[12],e=_.find(t),y[8]=_,y[9]=v,y[10]=e}else e=y[10];l=e}let E=l;y[13]!==C||y[14]!==E?.metadata?.title||y[15]!==w||y[16]!==v?(r=()=>"version"===C?E?.metadata?.title||(0,c.getVersionFromId)(v):w("published"===C?"release.chip.published":"release.chip.draft"),y[13]=C,y[14]=E?.metadata?.title,y[15]=w,y[16]=v,y[17]=r):r=y[17];let k=r;y[18]!==C||y[19]!==E?(a=E?(0,d.getReleaseTone)(E):"published"===C?"positive":"caution",y[18]=C,y[19]=E,y[20]=a):a=y[20];let D=a;y[21]!==R||y[22]!==j.name||y[23]!==T||y[24]!==v?(u=(0,d.getPreviewValueWithFallback)({snapshot:T,original:R,fallback:{_id:v,_type:j.name}}),y[21]=R,y[22]=j.name,y[23]=T,y[24]=v,y[25]=u):u=y[25];let F=j.icon;return y[26]===Symbol.for("react.memo_cache_sentinel")?(p={backgroundColor:"transparent"},y[26]=p):p=y[26],y[27]!==D?(m=(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.ReleaseAvatarIcon,{tone:D})}),y[27]=D,y[28]=m):m=y[28],y[29]!==k?(h=k(),y[29]=k,y[30]=h):h=y[30],y[31]!==h?(g=(0,o.jsx)(sX,{size:1,weight:"medium",textOverflow:"ellipsis",children:h}),y[31]=h,y[32]=g):g=y[32],y[33]!==m||y[34]!==g?(f=(0,o.jsxs)(ej.Flex,{align:"center",gap:2,paddingY:2,paddingRight:3,paddingLeft:2,children:[m,g]}),y[33]=m,y[34]=g,y[35]=f):f=y[35],y[36]!==f||y[37]!==D?(x=(0,o.jsx)(ej.Card,{border:!0,radius:"full",children:(0,o.jsx)(ej.Card,{radius:"full",tone:D,style:p,children:f})}),y[36]=f,y[37]=D,y[38]=x):x=y[38],y[39]!==P||y[40]!==j.icon||y[41]!==x||y[42]!==u?(b=(0,o.jsx)(d.SanityDefaultPreview,{...u,isPlaceholder:P,icon:F,layout:"default",status:x}),y[39]=P,y[40]=j.icon,y[41]=x,y[42]=u,y[43]=b):b=y[43],b},sQ=e=>{let t,n,i,l=(0,s.c)(8),{documentType:r,documentVersions:a}=e,c=(0,d.useSchema)();l[0]!==r||l[1]!==c?(t=c.get(r),l[0]=r,l[1]=c,l[2]=t):t=l[2];let u=t;if(!u)throw Error(`Schema type ${r} not found`);return l[3]!==a||l[4]!==u?(n=a?.map(e=>(0,o.jsx)(sJ,{versionId:e,schemaType:u},e)),l[3]=a,l[4]=u,l[5]=n):n=l[5],l[6]!==n?(i=(0,o.jsx)(ej.Card,{border:!0,padding:1,radius:2,children:(0,o.jsx)(ej.Stack,{children:n})}),l[6]=n,l[7]=i):i=l[7],i};function sZ(e){let t,n,i,l,r,a,c,u,p,h,g,f,x,b,y,v,j,w,S,_=(0,s.c)(66),{crossDatasetReferences:I,internalReferences:T,documentTitle:R,totalCount:P,action:E,datasetNames:k,hasUnknownDatasetNames:D,documentId:F,documentType:A,onReferenceLinkClick:V,documentVersions:M}=e,L=(0,d.useSchema)(),z=(0,ew.useToast)(),{t:O}=(0,d.useTranslation)(C);_[0]!==V||_[1]!==L||_[2]!==O?(t=e=>{let t=L.get(e._type);return t?(0,o.jsx)(sY,{type:t,value:e,onClick:V}):(0,o.jsx)(ej.Box,{padding:2,children:(0,o.jsx)(d.SanityDefaultPreview,{icon:m.UnknownIcon,title:O("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:O("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},_[0]=V,_[1]=L,_[2]=O,_[3]=t):t=_[3];let B=t;_[4]!==E||_[5]!==R||_[6]!==A||_[7]!==M||_[8]!==O?(n=()=>(0,o.jsxs)(ej.Stack,{space:4,children:[(0,o.jsx)(ej.Text,{as:"p",size:1,children:(0,o.jsx)(d.Translate,{t:O,i18nKey:"confirm-delete-dialog.confirmation.text",context:E,components:{DocumentTitle:()=>(0,o.jsx)("strong",{children:R})}})}),"delete"===E&&(0,o.jsx)(sQ,{documentType:A,documentVersions:M})]}),_[4]=E,_[5]=R,_[6]=A,_[7]=M,_[8]=O,_[9]=n):n=_[9];let H=n;if(T?.totalCount===0&&I?.totalCount===0){let e;return _[10]!==H?(e=H(),_[10]=H,_[11]=e):e=_[11],e}_[12]!==D?(i=D?["unavailable"]:[],_[12]=D,_[13]=i):i=_[13],_[14]!==k||_[15]!==i?(l=[...k,...i],_[14]=k,_[15]=i,_[16]=l):l=_[16];let $=l,N=$.length,G=$.join(", "),U=D&&$.length?"unavailable":"";_[17]!==$.length||_[18]!==O||_[19]!==G||_[20]!==U?(r=O("confirm-delete-dialog.cdr-summary.subtitle",{count:N,datasets:G,context:U}),_[17]=$.length,_[18]=O,_[19]=G,_[20]=U,_[21]=r):r=_[21];let q=r;return _[22]!==H?(a=H(),_[22]=H,_[23]=a):a=_[23],_[24]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(ej.Card,{borderTop:!0,padding:1}),_[24]=c):c=_[24],_[25]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(ej.Text,{"aria-hidden":"true",size:1,children:(0,o.jsx)(m.WarningOutlineIcon,{})}),_[25]=u):u=_[25],_[26]!==R?(p={DocumentTitle:()=>R},_[26]=R,_[27]=p):p=_[27],_[28]!==P?(h={count:P},_[28]=P,_[29]=h):h=_[29],_[30]!==O||_[31]!==p||_[32]!==h?(g=(0,o.jsxs)("div",{children:[c,(0,o.jsx)(ej.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,o.jsxs)(ej.Flex,{children:[u,(0,o.jsx)(ej.Box,{flex:1,marginLeft:3,children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:p,t:O,values:h})})})]})})]}),_[30]=O,_[31]=p,_[32]=h,_[33]=g):g=_[33],_[34]!==R?(f={DocumentTitle:()=>R},_[34]=R,_[35]=f):f=_[35],_[36]!==E||_[37]!==O||_[38]!==f?(x=(0,o.jsx)(ej.Box,{flex:"none",children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:O,context:E,components:f})})}),_[36]=E,_[37]=O,_[38]=f,_[39]=x):x=_[39],_[40]!==T||_[41]!==B?(b=T.totalCount>0&&(0,o.jsxs)(ej.Stack,{as:"ul",space:2,"data-testid":"internal-references",children:[T?.references.map(e=>(0,o.jsx)(ej.Box,{as:"li",children:B(e)},e._id)),T.totalCount>T.references.length&&(0,o.jsx)(ej.Box,{as:"li",padding:3,children:(0,o.jsx)(sq,{...T})})]}),_[40]=T,_[41]=B,_[42]=b):b=_[42],_[43]!==I||_[44]!==q||_[45]!==F||_[46]!==T.totalCount||_[47]!==$.length||_[48]!==O||_[49]!==z?(y=I.totalCount>0&&(0,o.jsxs)(s$,{"data-testid":"cross-dataset-references",style:{borderTop:T.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,o.jsx)(sN,{children:(0,o.jsx)(ej.Card,{as:"a",marginTop:2*(T.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,o.jsxs)(ej.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(m.DocumentsIcon,{})}),(0,o.jsxs)(ej.Stack,{space:2,children:[(0,o.jsx)(ej.Text,{textOverflow:"ellipsis",size:1,children:O("confirm-delete-dialog.cdr-summary.title",{count:$.length,documentCount:O("confirm-delete-dialog.cdr-summary.document-count",{count:I.totalCount})})}),(0,o.jsx)(ej.Text,{title:q,textOverflow:"ellipsis",size:1,muted:!0,children:q})]}),(0,o.jsx)(sH,{children:(0,o.jsx)(ej.Text,{muted:!0,size:1,children:(0,o.jsx)(m.ChevronDownIcon,{})})})]})})}),(0,o.jsxs)(ej.Box,{overflow:"auto",paddingTop:2,children:[(0,o.jsxs)(sG,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,o.jsx)(ej.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:O("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,o.jsx)("th",{children:(0,o.jsx)(ej.Text,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,o.jsx)("th",{children:(0,o.jsx)(ej.Text,{muted:!0,size:1,weight:"medium",children:O("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,o.jsx)("tbody",{children:I.references.filter(s0).map((e,t)=>{let{projectId:n,datasetName:i,documentId:l}=e;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(ej.Text,{size:1,children:n})}),(0,o.jsx)("td",{children:(0,o.jsx)(ej.Text,{size:1,children:i||"unavailable"})}),(0,o.jsx)("td",{children:(0,o.jsxs)(sU,{align:"center",gap:2,justify:"flex-end",children:[(0,o.jsx)(ej.Text,{textOverflow:"ellipsis",size:1,children:l||"unavailable"}),l&&(0,o.jsx)(ev.Button,{mode:"bleed",icon:m.CopyIcon,tooltipProps:{content:O("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(l).catch(()=>{z.push({status:"error",title:O("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${F}-${t}`)})})]}),(0,o.jsx)(sq,{...I})]})]}),_[43]=I,_[44]=q,_[45]=F,_[46]=T.totalCount,_[47]=$.length,_[48]=O,_[49]=z,_[50]=y):y=_[50],_[51]!==b||_[52]!==y?(v=(0,o.jsx)(ej.Card,{radius:2,shadow:1,flex:"auto",padding:1,children:(0,o.jsxs)(ej.Flex,{direction:"column",children:[b,y]})}),_[51]=b,_[52]=y,_[53]=v):v=_[53],_[54]!==R?(j={DocumentTitle:()=>R},_[54]=R,_[55]=j):j=_[55],_[56]!==E||_[57]!==O||_[58]!==j?(w=(0,o.jsx)(ej.Box,{flex:"none",children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:O,context:E,components:j})})}),_[56]=E,_[57]=O,_[58]=j,_[59]=w):w=_[59],_[60]!==g||_[61]!==x||_[62]!==v||_[63]!==w||_[64]!==a?(S=(0,o.jsxs)(ej.Flex,{direction:"column",gap:4,children:[a,g,x,v,w]}),_[60]=g,_[61]=x,_[62]=v,_[63]=w,_[64]=a,_[65]=S):S=_[65],S}function s0(e){return"projectId"in e}let s1=()=>(t||(t=(0,e9.fromEvent)(document,"visibilitychange").pipe((0,eN.startWith)(null),(0,eH.map)(()=>"visible"===document.visibilityState),(0,eq.distinctUntilChanged)(),(0,eW.switchMap)(e=>e?(0,te.timer)(0,5e3):tt.EMPTY),(0,eK.shareReplay)({refCount:!0,bufferSize:1}))),t),s2=(0,d.createHookFromObservableFactory)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),s3=(0,d.createHookFromObservableFactory)(([e,t])=>s1().pipe((0,eW.switchMap)(()=>(function(e,t){let{versionedClient:n}=t;return s1().pipe((0,eW.switchMap)(()=>(function(e,{versionedClient:t}){let n=(0,c.getDraftId)(e),i=(0,c.getPublishedId)(e),l={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(l).pipe((0,eH.map)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,eW.switchMap)(e=>{if(!e)return(0,e3.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,e$.catchError)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,e3.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function s4(e){return"string"!=typeof e.datasetName}function s5(e){return!!e&&""!==e}function s6(e){return e?.datasetName||""}function s8(e){return e.projectId}let s7=(0,e_.styled)(ej.Box)`
  box-sizing: border-box;
`,s9=(0,e_.styled)(ej.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function ae(e){let t,n,i,l,r,u,p,m,h,g,f,x,b=(0,s.c)(51),{id:y,type:v,action:j,onCancel:w,onConfirm:S}=e,_=void 0===j?"delete":j,{t:I}=(0,d.useTranslation)(C),T=`deletion-confirmation-${(0,a.useId)()}`,{internalReferences:R,crossDatasetReferences:P,isLoading:E,totalCount:k,projectIds:D,datasetNames:F,hasUnknownDatasetNames:A}=function(e){let t,n,i,l,r,o,a,u,p=(0,s.c)(24),m=(0,d.useClient)(d.DEFAULT_STUDIO_CLIENT_OPTIONS),h=(0,d.useDocumentStore)();p[0]!==e?(t=(0,c.getPublishedId)(e),p[0]=e,p[1]=t):t=p[1];let g=t;p[2]!==h||p[3]!==g?(n=[g,h],p[2]=h,p[3]=g,p[4]=n):n=p[4];let[f,x]=s2(n);p[5]!==g||p[6]!==m?(i=[g,m],p[5]=g,p[6]=m,p[7]=i):i=p[7];let[b,y]=s3(i);p[8]!==b?.references?(l=()=>Array.from(new Set(b?.references.map(s8).filter(Boolean))).sort(),p[8]=b?.references,p[9]=l):l=p[9],p[10]!==l?(r=l(),p[10]=l,p[11]=r):r=p[11];let v=r;p[12]!==b?.references?(o=Array.from(new Set(b?.references.map(s6).filter(s5))).sort(),p[12]=b?.references,p[13]=o):o=p[13];let j=o;p[14]!==b?.references?(a=()=>!!b?.references.some(s4),p[14]=b?.references,p[15]=a):a=p[15];let w=a(),S=(f?.totalCount||0)+(b?.totalCount||0),C=x||y;return p[16]!==b||p[17]!==j||p[18]!==w||p[19]!==f||p[20]!==v||p[21]!==S||p[22]!==C?(u={totalCount:S,projectIds:v,datasetNames:j,hasUnknownDatasetNames:w,internalReferences:f,crossDatasetReferences:b,isLoading:C},p[16]=b,p[17]=j,p[18]=w,p[19]=f,p[20]=v,p[21]=S,p[22]=C,p[23]=u):u=p[23],u}(y);b[0]!==y||b[1]!==v?(t={_id:y,_type:v},b[0]=y,b[1]=v,b[2]=t):t=b[2];let V=t;b[3]!==V?(n=(0,o.jsx)(sB,{document:V}),b[3]=V,b[4]=n):n=b[4];let M=n,L=!E;b[5]!==y?(i=(0,c.getPublishedId)(y),b[5]=y,b[6]=i):i=b[6],b[7]!==i?(l={documentId:i},b[7]=i,b[8]=l):l=b[8];let{data:z,loading:O}=(0,d.useDocumentVersions)(l);b[9]!==z||b[10]!==S?(r=()=>{S(z)},b[9]=z,b[10]=S,b[11]=r):r=b[11];let B=r;return b[12]!==_||b[13]!==I?(u=I("confirm-delete-dialog.header.text",{context:_}),b[12]=_,b[13]=I,b[14]=u):u=b[14],b[15]!==I?(p=I("confirm-delete-dialog.cancel-button.text"),b[15]=I,b[16]=p):p=b[16],b[17]!==w||b[18]!==p?(m={onClick:w,text:p},b[17]=w,b[18]=p,b[19]=m):m=b[19],b[20]!==_||b[21]!==B||b[22]!==L||b[23]!==I||b[24]!==k?(h=L?{text:I(k>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:_}),onClick:B}:void 0,b[20]=_,b[21]=B,b[22]=L,b[23]=I,b[24]=k,b[25]=h):h=b[25],b[26]!==m||b[27]!==h?(g={cancelButton:m,confirmButton:h},b[26]=m,b[27]=h,b[28]=g):g=b[28],b[29]!==_||b[30]!==P||b[31]!==F||b[32]!==M||b[33]!==z||b[34]!==A||b[35]!==y||b[36]!==R||b[37]!==E||b[38]!==w||b[39]!==D||b[40]!==I||b[41]!==k||b[42]!==v||b[43]!==O?(f=(0,o.jsx)(s7,{children:P&&R&&!E&&!O?(0,o.jsx)(sZ,{crossDatasetReferences:P,internalReferences:R,documentTitle:M,isLoading:E,totalCount:k,action:_,projectIds:D,datasetNames:F,hasUnknownDatasetNames:A,onReferenceLinkClick:w,documentId:y,documentType:v,documentVersions:z}):(0,o.jsx)(s9,{"data-testid":"loading-container",children:(0,o.jsx)(d.LoadingBlock,{showText:!0,title:I("confirm-delete-dialog.loading.text")})})}),b[29]=_,b[30]=P,b[31]=F,b[32]=M,b[33]=z,b[34]=A,b[35]=y,b[36]=R,b[37]=E,b[38]=w,b[39]=D,b[40]=I,b[41]=k,b[42]=v,b[43]=O,b[44]=f):f=b[44],b[45]!==T||b[46]!==w||b[47]!==g||b[48]!==f||b[49]!==u?(x=(0,o.jsx)(ev.Dialog,{width:1,id:T,header:u,footer:g,onClose:w,onClickOutside:w,children:f}),b[45]=T,b[46]=w,b[47]=g,b[48]=f,b[49]=u,b[50]=x):x=b[50],x}function at(e){let t,n,i=(0,s.c)(6),{t:l}=(0,d.useTranslation)(C),r=(0,a.useId)(),[c,u]=(0,a.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(null),i[0]=t):t=i[0];let p=t;return i[1]!==c||i[2]!==r||i[3]!==e||i[4]!==l?(n=c?(0,o.jsx)(ev.Dialog,{id:`dialog-error-${r}`,"data-testid":"confirm-delete-error-dialog",header:l("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:l("confirm-delete-dialog.error.retry-button.text"),onClick:p,tone:"default"}},onClose:e.onCancel,children:(0,o.jsx)(ej.Box,{padding:4,children:(0,o.jsx)(ej.Text,{size:1,children:l("confirm-delete-dialog.error.message.text")})})}):(0,o.jsx)(ev.ErrorBoundary,{onCatch:u,children:(0,o.jsx)(ae,{...e})}),i[1]=c,i[2]=r,i[3]=e,i[4]=l,i[5]=n):n=i[5],n}let an=(0,a.forwardRef)(function(e,t){let n,i,l,r,d=(0,s.c)(10);d[0]!==e?({intent:n,...i}=e,d[0]=e,d[1]=n,d[2]=i):(n=d[1],i=d[2]),d[3]!==n?(l=(0,a.forwardRef)(function(e,t){return(0,o.jsx)(eE.IntentLink,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),d[3]=n,d[4]=l):l=d[4];let c=l;return d[5]!==c||d[6]!==e.disabled||d[7]!==t||d[8]!==i?(r=e.disabled?(0,o.jsx)(ev.Button,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,o.jsx)(ev.Button,{...i,as:c,"data-as":"a",ref:t}),d[5]=c,d[6]=e.disabled,d[7]=t,d[8]=i,d[9]=r):r=d[9],r});function ai(e){let t,n,i,l=(0,s.c)(12),{reveal:r,context:a,loading:c,children:u}=e,p=(0,d.useCurrentUser)(),{t:m}=(0,d.useTranslation)(C);if(!r){let e;return l[0]!==u?(e=(0,o.jsx)(o.Fragment,{children:u}),l[0]=u,l[1]=e):e=l[1],e}return l[2]!==a||l[3]!==p||l[4]!==c||l[5]!==m?(t=c?m("insufficient-permissions-message-tooltip.loading-text"):(0,o.jsx)(d.InsufficientPermissionsMessage,{context:a,currentUser:p}),l[2]=a,l[3]=p,l[4]=c,l[5]=m,l[6]=t):t=l[6],l[7]!==u?(n=(0,o.jsx)("div",{children:u}),l[7]=u,l[8]=n):n=l[8],l[9]!==t||l[10]!==n?(i=(0,o.jsx)(ev.Tooltip,{content:t,portal:!0,children:n}),l[9]=t,l[10]=n,l[11]=i):i=l[11],i}let al={constrainSize:!0,placement:"bottom",portal:!0},ar=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let l={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[l,t.parameters]:l,searchParams:n?[["perspective",n]]:void 0}};function ao(e){let t,n,i,l,r,c,u,p,h=(0,s.c)(60),{templateItems:g}=e,f=(0,d.useTemplates)(),{selectedReleaseId:x}=(0,d.usePerspective)(),{t:b}=(0,d.useTranslation)(C);h[0]!==g||h[1]!==f?(t=[...g,...f],h[0]=g,h[1]=f,h[2]=t):t=h[2];let y=(0,d.useGetI18nText)(t);h[3]!==g?(n={templateItems:g},h[3]=g,h[4]=n):n=h[4];let[v,j]=(0,d.useTemplatePermissions)(n),w=!j&&v?.length!==0&&v?.every(aa);e:{let e;if(!v){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e={},h[5]=e):e=h[5],i=e;break e}h[6]!==v?(e=v.reduce(as,{}),h[6]=v,h[7]=e):e=h[7],i=e}let S=i;if(0===g.length)return null;if(w){let e,t,n;return h[8]!==b?(e=b("pane-header.disabled-created-button.aria-label"),h[8]=b,h[9]=e):e=h[9],h[10]!==e?(t=(0,o.jsx)(ev.Button,{"aria-label":e,icon:m.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),h[10]=e,h[11]=t):t=h[11],h[12]!==j||h[13]!==t?(n=(0,o.jsx)(ai,{context:"create-document-type",reveal:!0,loading:j,children:t}),h[12]=j,h[13]=t,h[14]=n):n=h[14],n}if(1===g.length){let e,t,n,i,l,r,s=g[0],a=!S[s.id]?.granted;h[15]!==s||h[16]!==x||h[17]!==f?(e=ar(f,s,x),h[15]=s,h[16]=x,h[17]=f,h[18]=e):e=h[18];let d=e;if(!d)return null;h[19]!==s||h[20]!==y?(t=y(s),h[19]=s,h[20]=y,h[21]=t):t=h[21];let c=t.title,u=s.icon||m.AddIcon;return h[22]!==b?(n=b("pane-header.create-new-button.tooltip"),h[22]=b,h[23]=n):n=h[23],h[24]!==n?(i={content:n},h[24]=n,h[25]=i):i=h[25],h[26]!==a||h[27]!==d||h[28]!==t.title||h[29]!==u||h[30]!==i?(l=(0,o.jsx)(an,{"aria-label":c,icon:u,intent:d,mode:"bleed",disabled:a,"data-testid":"action-intent-button",tooltipProps:i}),h[26]=a,h[27]=d,h[28]=t.title,h[29]=u,h[30]=i,h[31]=l):l=h[31],h[32]!==a||h[33]!==j||h[34]!==l?(r=(0,o.jsx)(ai,{reveal:a,loading:j,context:"create-document-type",children:l}),h[32]=a,h[33]=j,h[34]=l,h[35]=r):r=h[35],r}if(h[36]!==b?(l=b("pane-header.create-new-button.tooltip"),h[36]=b,h[37]=l):l=h[37],h[38]!==l?(r=(0,o.jsx)(ev.Button,{icon:m.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:l}}),h[38]=l,h[39]=r):r=h[39],h[40]!==y||h[41]!==j||h[42]!==S||h[43]!==x||h[44]!==b||h[45]!==g||h[46]!==f){let e;h[48]!==y||h[49]!==j||h[50]!==S||h[51]!==x||h[52]!==b||h[53]!==f?(e=(e,t)=>{let n=!S[e.id]?.granted,i=ar(f,e,x),l=f.find(t=>t.id===e.templateId);if(!l||!i)return null;let r=(0,a.forwardRef)((e,t)=>n?(0,o.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,o.jsx)(eE.IntentLink,{...e,intent:i.type,params:i.params,searchParams:i.searchParams,ref:t}));r.displayName="Link";let{title:s}=y({...e,title:e.title||y(l).title});return(0,o.jsx)(ai,{context:"create-document-type",reveal:n,loading:j,children:(0,o.jsx)(ev.MenuItem,{as:r,"data-as":n?"button":"a",text:s,"aria-label":n?b("pane-header.disabled-created-button.aria-label"):s,disabled:n,"data-testid":`action-intent-button-${t}`})},e.id)},h[48]=y,h[49]=j,h[50]=S,h[51]=x,h[52]=b,h[53]=f,h[54]=e):e=h[54],c=g.map(e),h[40]=y,h[41]=j,h[42]=S,h[43]=x,h[44]=b,h[45]=g,h[46]=f,h[47]=c}else c=h[47];return h[55]!==c?(u=(0,o.jsx)(ej.Menu,{children:c}),h[55]=c,h[56]=u):u=h[56],h[57]!==r||h[58]!==u?(p=(0,o.jsx)(ev.MenuButton,{button:r,id:"create-menu",menu:u,popover:al}),h[57]=r,h[58]=u,h[59]=p):p=h[59],p}function as(e,t){return e[t.id]=t,e}function aa(e){return!e.granted}function ad(e){return null!=e}let ac=(0,a.memo)(function(e){let t,n,i,l,r,a,c,u,p,m,h=(0,s.c)(28),{initialValueTemplateItems:g,menuItems:f,menuItemGroups:x,actionHandlers:b}=e,y=void 0===g?d.EMPTY_ARRAY:g,v=void 0===f?d.EMPTY_ARRAY:f,j=void 0===x?d.EMPTY_ARRAY:x,w=void 0===b?d.EMPTY_OBJECT:b,S=(0,d.useTemplates)();h[0]!==w?(t=e=>{if("string"==typeof e.action&&!(e.action in w))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?w[e.action]:null;return!!t&&(t(e.params),!0)},h[0]=w,h[1]=t):t=h[1];let C=t;h[2]!==C||h[3]!==j||h[4]!==v?(n=rs({actionHandler:C,menuItemGroups:j,menuItems:v.filter(au)}),h[2]=C,h[3]=j,h[4]=v,h[5]=n):n=h[5];let _=n;h[6]!==_?(i=_.filter(rr),h[6]=_,h[7]=i):i=h[7];let I=i;h[8]!==_?(l=_.filter(ro),h[8]=_,h[9]=l):l=h[9];let T=l;if(h[10]!==v||h[11]!==S){let e;h[13]!==S?(e=(e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:void 0,r=i.template||i.type;if(!r)return null;let o=S.find(e=>e.id===r);return o?{item:e,template:o,templateParams:l,menuItemIndex:t,initialDocumentId:i.id}:null},h[13]=S,h[14]=e):e=h[14],r=v.map(e).filter(ad).map(ap),h[10]=v,h[11]=S,h[12]=r}else r=h[12];let R=r;h[15]!==R||h[16]!==y?(a=(0,eL.uniqBy)([...R,...y],am),h[15]=R,h[16]=y,h[17]=a):a=h[17];let P=a;return h[18]!==P?(c=(0,o.jsx)(ao,{templateItems:P}),h[18]=P,h[19]=c):c=h[19],h[20]!==I?(u=I.map(ah),h[20]=I,h[21]=u):u=h[21],h[22]!==T?(p=T.length>0&&(0,o.jsx)(ic,{nodes:T}),h[22]=T,h[23]=p):p=h[23],h[24]!==c||h[25]!==u||h[26]!==p?(m=(0,o.jsxs)(ej.Flex,{gap:1,children:[c,u,p]}),h[24]=c,h[25]=u,h[26]=p,h[27]=m):m=h[27],m});function au(e){return e.intent?.type!=="create"}function ap(e){let{initialDocumentId:t,item:n,template:i,menuItemIndex:l,templateParams:r}=e;return{id:`menuItem${l}`,initialDocumentId:t,templateId:i.id,type:"initialValueTemplateItem",title:n.title||i.title,i18n:n.i18n||i.i18n,icon:n.icon,description:i.description,parameters:r,schemaType:i.schemaType}}function am(e){var t=[e.initialDocumentId,e.templateId,e.parameters];let n=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(n):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(n(JSON.parse(JSON.stringify(t))))}function ah(e){return(0,o.jsx)(iw,{node:e},e.key)}function ag(e){let t,n,i,l,r,a,c,u=(0,s.c)(16),{t:p}=(0,d.useTranslation)(C),{layout:m,value:h}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},u[0]=t):t=u[0],u[1]!==h._type?(n={documentType:h._type},u[1]=h._type,u[2]=n):n=u[2],u[3]!==p||u[4]!==n?(i=(0,o.jsx)("em",{children:(0,o.jsx)(d.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),u[3]=p,u[4]=n,u[5]=i):i=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(l={Code:"code"},u[6]=l):l=u[6],u[7]!==h._id?(r={documentId:h._id},u[7]=h._id,u[8]=r):r=u[8],u[9]!==p||u[10]!==r?(a=(0,o.jsx)(d.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.subtitle",components:l,values:r}),u[9]=p,u[10]=r,u[11]=a):a=u[11],u[12]!==m||u[13]!==i||u[14]!==a?(c=(0,o.jsx)(d.SanityDefaultPreview,{title:i,subtitle:a,media:af,layout:m}),u[12]=m,u[13]=i,u[14]=a,u[15]=c):c=u[15],c}function af(){return(0,o.jsx)(m.WarningOutlineIcon,{})}function ax(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function ab(e){let t,n,i,l,r,c,u,p,h=(0,s.c)(43),{icon:g,id:f,layout:x,pressed:b,schemaType:y,selected:v,sortOrder:j,title:w,value:S,margin:C,marginBottom:_,marginTop:I}=e,T=void 0===x?"default":x,R=(0,d.useSchema)(),P=(0,d.useDocumentPreviewStore)(),{ChildLink:E}=lI(),k=(0,d.useDocumentPresence)(f),D=!!(y&&y.name&&R.get(y.name)),[F,A]=(0,a.useState)(!1);e:{let e,n,i,l;if(S&&(0,eS.isSanityDocument)(S)){let e,n;if(!y||!D){let e;h[0]!==S?(e=(0,o.jsx)(ag,{value:S}),h[0]=S,h[1]=e):e=h[1],t=e;break e}h[2]!==g||h[3]!==y?(e=ax(g,y,m.DocumentIcon),h[2]=g,h[3]=y,h[4]=e):e=h[4],h[5]!==k||h[6]!==P||h[7]!==T||h[8]!==y||h[9]!==j||h[10]!==e||h[11]!==S?(n=(0,o.jsx)(sW,{documentPreviewStore:P,icon:e,layout:T,schemaType:y,sortOrder:j,value:S,presence:k}),h[5]=k,h[6]=P,h[7]=T,h[8]=y,h[9]=j,h[10]=e,h[11]=S,h[12]=n):n=h[12],t=n;break e}h[13]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},h[13]=e):e=h[13],h[14]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(ej.Box,{style:e,children:(0,o.jsx)(ej.Text,{muted:!0,size:1,children:(0,o.jsx)(m.ChevronRightIcon,{})})}),h[14]=n):n=h[14],h[15]!==g||h[16]!==y?(i=ax(g,y,m.FolderIcon),h[15]=g,h[16]=y,h[17]=i):i=h[17],h[18]!==i||h[19]!==w?(l=(0,o.jsx)(d.SanityDefaultPreview,{status:n,icon:i,layout:"compact",title:w}),h[18]=i,h[19]=w,h[20]=l):l=h[20],t=l}let V=t;h[21]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.metaKey?A(!1):A(!0)},h[21]=n):n=h[21];let M=n;h[22]===Symbol.for("react.memo_cache_sentinel")?(i=()=>A(!1),h[22]=i):i=h[22],h[23]!==v?(l=[v],h[23]=v,h[24]=l):l=h[24],(0,a.useEffect)(i,l);let[L,z]=(0,a.useState)(!1),O=(0,a.useRef)(null);h[25]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{O.current=setTimeout(()=>(0,a.startTransition)(()=>z(!0)),400)},h[25]=r):r=h[25];let B=r;h[26]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{O.current&&clearTimeout(O.current),(0,a.startTransition)(()=>z(!1))},h[26]=c):c=h[26];let H=c,$=`pane-item-${w}`,N=v||F;return h[27]!==f||h[28]!==L||h[29]!==y||h[30]!==S?(u=L&&y?.name&&S&&(0,eS.isSanityDocument)(S)&&(0,o.jsx)(ay,{documentId:f,documentType:y.name}),h[27]=f,h[28]=L,h[29]=y,h[30]=S,h[31]=u):u=h[31],h[32]!==f||h[33]!==C||h[34]!==_||h[35]!==I||h[36]!==b||h[37]!==V||h[38]!==u||h[39]!==$||h[40]!==E||h[41]!==N?(p=(0,o.jsxs)(d.PreviewCard,{"data-testid":$,__unstable_focusRing:!0,as:E,childId:f,"data-as":"a",margin:C,marginBottom:_,marginTop:I,onClick:M,onMouseEnter:B,onMouseLeave:H,pressed:b,radius:2,selected:N,sizing:"border",tabIndex:-1,tone:"inherit",children:[V,u]}),h[32]=f,h[33]=C,h[34]=_,h[35]=I,h[36]=b,h[37]=V,h[38]=u,h[39]=$,h[40]=E,h[41]=N,h[42]=p):p=h[42],p}function ay(e){let t,n=(0,s.c)(2),{documentId:i,documentType:l}=e;return n[0]!==i?(t=(0,c.getPublishedId)(i),n[0]=i,n[1]=t):t=n[1],(0,d.useEditState)(t,l),null}ay.displayName="PreloadDocumentPane";let av=(0,a.memo)(e=>{let t,n=(0,s.c)(4),{children:i,group:l}=e,r=(0,a.useContext)(u.DocumentActionsStateContext);if(null===r)throw Error("DocumentActionsStateContext is not set. This should not happen.");return n[0]!==i||n[1]!==l||n[2]!==r?(t=i({states:l?r.filter(e=>(e.group||["default"]).includes(l)):r}),n[0]=i,n[1]=l,n[2]=r,n[3]=t):t=n[3],t});av.displayName="Memo(RenderActionCollectionState)";let aj=(0,a.memo)(e=>{let t,n=(0,s.c)(4),{badges:i,children:l,badgeProps:r}=e;return n[0]!==r||n[1]!==i||n[2]!==l?(t=(0,o.jsx)(d.GetHookCollectionState,{hooks:i,args:r,children:l}),n[0]=r,n[1]=i,n[2]=l,n[3]=t):t=n[3],t});aj.displayName="Memo(RenderBadgeCollectionState)";let aw={by:[{field:"_updatedAt",direction:"desc"}]},aS={},aC=(0,e_.styled)(ej.Box)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,a_=(0,e_.styled)(ej.Box)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,aI=[...Array(30).keys()];function aT(e){let t,n,i=(0,s.c)(4),{layout:l}=e;return i[0]!==l?(t=aI.map(e=>(0,o.jsx)(d.SanityDefaultPreview,{isPlaceholder:!0,layout:l},e)),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(ej.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function aR(e){let t,n,i,l,r,u,p,m=(0,s.c)(67),{childItemId:h,error:g,isRetrying:f,autoRetry:x,filterIsSimpleTypeConstraint:b,hasMaxItems:y,hasSearchQuery:v,isActive:j,isLazyLoading:w,muted:S,isLoading:_,isConnected:I,retryCount:T,canRetry:R,items:P,layout:E,loadingVariant:k,onEndReached:D,onRetry:F,paneTitle:A,searchInputElement:V,showIcons:M,sortOrder:L}=e,z=(0,d.useSchema)(),{collapsed:O}=n3(),{collapsed:B,index:H}=n9(),[$,N]=(0,a.useState)(!B),{t:G}=(0,d.useTranslation)(C);m[0]!==D||m[1]!==$?(t=()=>{$&&D()},m[0]=D,m[1]=$,m[2]=t):t=m[2];let U=t;m[3]!==B?(n=()=>{if(B)return;let e=setTimeout(()=>{N(!0)},0);return()=>{clearTimeout(e)}},m[3]=B,m[4]=n):n=m[4],m[5]!==B||m[6]!==P?(i=[B,P],m[5]=B,m[6]=P,m[7]=i):i=m[7],(0,a.useEffect)(n,i),m[8]!==h||m[9]!==y||m[10]!==j||m[11]!==w||m[12]!==P.length||m[13]!==E||m[14]!==z||m[15]!==M||m[16]!==L||m[17]!==G?(l=(e,t)=>{let{activeIndex:n}=t,i=(0,c.getPublishedId)(e._id),l=h===i,r=!j&&l,s=j&&l,a=n===P.length-1,u=a&&w,p=a&&y;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ab,{icon:!!M&&void 0,id:i,layout:E,marginBottom:1,pressed:r,schemaType:z.get(e._type),selected:s,sortOrder:L,value:e}),u&&(0,o.jsx)(d.LoadingBlock,{}),p&&(0,o.jsx)(ej.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,o.jsx)(ej.Text,{align:"center",muted:!0,size:1,children:G("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},m[8]=h,m[9]=y,m[10]=j,m[11]=w,m[12]=P.length,m[13]=E,m[14]=z,m[15]=M,m[16]=L,m[17]=G,m[18]=l):l=m[18];let q=l;e:{let e,t;if(v){let e,t;m[19]!==G?(e=G("panes.document-list-pane.no-documents.text"),m[19]=G,m[20]=e):e=m[20],m[21]!==e?(t=(0,o.jsx)(ej.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,o.jsx)(ej.Container,{width:1,children:(0,o.jsx)(ej.Box,{paddingX:4,paddingY:5,children:(0,o.jsx)(ej.Text,{align:"center",muted:!0,children:e})})})}),m[21]=e,m[22]=t):t=m[22],r=t;break e}m[23]!==b||m[24]!==G?(e=G(b?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),m[23]=b,m[24]=G,m[25]=e):e=m[25],m[26]!==e?(t=(0,o.jsx)(ej.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,o.jsx)(ej.Container,{width:1,children:(0,o.jsx)(ej.Box,{paddingX:4,paddingY:5,children:(0,o.jsx)(ej.Text,{align:"center",muted:!0,children:e})})})}),m[26]=e,m[27]=t):t=m[27],r=t}let W=r;t:{let e,t;if(!$){u=null;break t}let n=window.navigator.onLine;if(g){let e,t,i,l,r,s,a;m[28]!==G?(e=G("panes.document-list-pane.error.title"),m[28]=G,m[29]=e):e=m[29],m[30]!==e?(t=(0,o.jsx)(ej.Heading,{as:"h3",children:e}),m[30]=e,m[31]=t):t=m[31],m[32]!==g||m[33]!==G?(i=d.isDev?(0,o.jsx)(d.Translate,{t:G,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:g.message},components:{Code:aP}}):G(n?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),m[32]=g,m[33]=G,m[34]=i):i=m[34],m[35]!==i?(l=(0,o.jsx)(ej.Text,{as:"p",children:i}),m[35]=i,m[36]=l):l=m[36];let c=n&&R?F:void 0;m[37]!==g||m[38]!==f||m[39]!==c?(r=(0,o.jsx)(d.ErrorActions,{error:g,eventId:null,onRetry:c,isRetrying:f}),m[37]=g,m[38]=f,m[39]=c,m[40]=r):r=m[40],m[41]!==x||m[42]!==R||m[43]!==f||m[44]!==T||m[45]!==G?(s=R?(0,o.jsx)(ej.Text,{as:"p",muted:!0,size:1,children:f?G("panes.document-list-pane.error.retrying",{count:T}):x?G("panes.document-list-pane.error.will-retry-automatically",{count:T}):G("panes.document-list-pane.error.max-retries-attempted",{count:T})}):null,m[41]=x,m[42]=R,m[43]=f,m[44]=T,m[45]=G,m[46]=s):s=m[46],m[47]!==r||m[48]!==s||m[49]!==t||m[50]!==l?(a=(0,o.jsx)(ej.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,o.jsx)(ej.Container,{width:1,children:(0,o.jsxs)(ej.Stack,{paddingX:4,paddingY:5,space:4,children:[t,l,r,s]})})}),m[47]=r,m[48]=s,m[49]=t,m[50]=l,m[51]=a):a=m[51],u=a;break t}if(I&&!_&&0===P.length){u=W;break t}if("initial"===k&&_){let e;m[52]!==E?(e=(0,o.jsx)(ik,{ms:300,children:(0,o.jsx)(aT,{layout:E})}),m[52]=E,m[53]=e):e=m[53],u=e;break t}if("spinner"===k&&_){u=null;break t}let i=`${H}-${B}`,l=S?.8:1;m[54]!==U||m[55]!==P||m[56]!==i||m[57]!==A||m[58]!==q||m[59]!==V?(e=(0,o.jsx)(a_,{children:(0,o.jsx)(d.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:A,canReceiveFocus:!0,inputElement:V,itemHeight:51,items:P,onEndReached:U,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:q,wrapAround:!1},i)}),m[54]=U,m[55]=P,m[56]=i,m[57]=A,m[58]=q,m[59]=V,m[60]=e):e=m[60],m[61]!==l||m[62]!==e?(t=(0,o.jsx)(aC,{overflow:"hidden",height:"fill",$opacity:l,children:e}),m[61]=l,m[62]=e,m[63]=t):t=m[63],u=t}let K=u,Y=O||"initial"===k?"hidden":"auto";return m[64]!==K||m[65]!==Y?(p=(0,o.jsx)(ie,{"data-testid":"document-list-pane",overflow:Y,children:K}),m[64]=K,m[65]=Y,m[66]=p):p=m[66],p}function aP(e){let{children:t}=e;return(0,o.jsx)("code",{children:t})}function aE(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base||"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,tq.parse)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let ak=(0,d.createSWR)({maxSize:100});function aD(e){let{client:t,schema:n,sort:i,perspective:l,limit:r,params:o,filter:s,searchQuery:a,staticTypeNames:c,maxFieldDepth:u,searchStrategy:p}=e,m=i.by,h=i?.extendedProjection,g=(0,tn.defer)(()=>t.listen(`*[${s}]`,o,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,eZ.mergeMap)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,ti.throwError)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,ti.throwError)(()=>Error(`Received unexpected type of first event "${e.type}"`)):(0,e3.of)(e)}),(0,e0.share)()),[f,x]=(0,tl.partition)(g,e=>"welcome"===e.type),b=JSON.stringify({fiilter:s,limit:r,params:o,searchQuery:a,perspective:l,sort:i,staticTypeNames:c});return(0,e4.merge)(f,x.pipe((0,tr.throttleTime)(1e3,to.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,tY.exhaustMapWithTrailing)(e=>(c?(0,e3.of)(c):t.observable.fetch(`array::unique(*[${s}][]._type)`,o)).pipe((0,eZ.mergeMap)(g=>{let f=(0,d.getSearchableTypes)(n,c||[]).filter(e=>!!g.includes(e.name)&&(T(e,i.by,!0),!0)),x=(0,d.createSearch)(f,t,{filter:s,params:o,strategy:p,maxDepth:u}),b=()=>x({query:a||"",types:f},{__unstable_extendedProjection:h,comments:[`findability-source: ${a?"list-query":"list"}`],limit:r,skipSortByScore:!0,sort:m,perspective:l}).pipe((0,eH.map)(e=>e.hits.map(({hit:e})=>e)),(0,eH.map)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,te.timer)(1200).pipe((0,eZ.mergeMap)(b)):"reconnect"===e.type?(0,e3.of)(e):b()}))),(0,eY.scan)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:e?.documents||[]}),null),(0,eJ.filter)(e=>null!==e),ak(b),(0,eH.map)(({fromCache:e,value:t})=>({fromCache:e,...t})))}let aF={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]};function aA(e,t){if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,d.collate)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${t.type}`)}function aV(e){return{type:"result",result:e}}function aM(e){return{type:"result",result:e}}function aL(e){let[,t]=e;return t?.documents.length===100}function az(){return(0,tK.observableCallback)()}function aO(){return(0,tK.observableCallback)()}let aB="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",aH=e_.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,a$=e_.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,aN=(0,e_.styled)(m.SpinnerIcon)`
  animation: ${aH} 500ms linear infinite;
`,aG=(0,e_.styled)(m.SpinnerIcon)`
  animation: ${aH} 1500ms linear infinite;
  opacity: 0.4;
`,aU=(0,e_.styled)(m.SpinnerIcon)`
  animation:
    ${aH} 1500ms linear infinite,
    ${a$} 1000ms linear;
  opacity: 0.4;
`,aq=(0,a.memo)(function(e){var t;let n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w,S,_,I,T,R,P=(0,s.c)(70),{childItemId:E,isActive:k,pane:D,paneKey:F,sortOrder:A,layout:V}=e,M=(0,d.useSchema)(),L=(0,d.useActiveReleases)(),{perspectiveStack:z}=(0,d.usePerspective)(),{displayOptions:O,options:B}=D,{apiVersion:H,filter:$}=B,N=dh(B.params||aS);e:{let e;P[0]!==$||P[1]!==N?(e=aE($,N),P[0]=$,P[1]=N,P[2]=e):e=P[2];let t=e;if(t?.length===1){n=t[0];break e}n=null}let G=n,U=O?.showIcons!==!1,{t:q}=(0,d.useTranslation)(C),{title:W}=(0,d.useI18nText)(D),[K,Y]=(0,a.useState)(""),[X,J]=(0,a.useState)(""),[Q,Z]=(0,a.useState)(null);P[3]!==M||P[4]!==A||P[5]!==G?(i=G&&A?(t=M.get(G),(R=A.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=td.fromString(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,eS.isKeySegment)(e)||(0,eS.isIndexSegment)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,eS.isReferenceSchemaType)(t)){i=t;continue}let[l,r]=t.to||[];if(r||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e})).every((e,t)=>e===A.by[t])?A:{...A,by:R}):A,P[3]=M,P[4]=A,P[5]=G,P[6]=i):i=P[6];let ee=(0,d.useUnique)(i),et=H||d.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;P[7]!==et?(l={...d.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:et},P[7]=et,P[8]=l):l=P[8];let en=(0,d.useClient)(l);P[9]!==K?(r=K?.trim(),P[9]=K,P[10]=r):r=P[10],P[11]!==en||P[12]!==$||P[13]!==N||P[14]!==z||P[15]!==ee||P[16]!==r?(c={client:en,filter:$,perspective:z,params:N,searchQuery:r,sortOrder:ee},P[11]=en,P[12]=$,P[13]=N,P[14]=z,P[15]=ee,P[16]=r,P[17]=c):c=P[17];let{error:ei,isLoadingFullList:el,isLoading:er,items:eo,fromCache:es,isRetrying:ea,autoRetry:ed,canRetry:ec,retryCount:eu,connected:ep,onLoadFullList:em,onRetry:eh}=function(e){let t,n,i,l=(0,s.c)(31),{client:r,filter:o,params:c,sortOrder:u,searchQuery:p,perspective:m}=e,{strategy:h}=(0,d.useWorkspace)().search,g=(0,d.useSchema)(),f=(0,d.useSearchMaxFieldDepth)();l[0]!==c||l[1]!==o?(t=aE(o,c),l[0]=c,l[1]=o,l[2]=t):t=l[2];let x=t,[b]=(0,a.useState)(aO),[y,v]=b,[j]=(0,a.useState)(az),[w,S]=j,C=p||"",_=u||aw;if(l[3]!==r||l[4]!==f||l[5]!==w||l[6]!==y||l[7]!==c||l[8]!==m||l[9]!==g||l[10]!==o||l[11]!==h||l[12]!==C||l[13]!==_||l[14]!==x){let e,t={client:r,filter:o,limit:100,params:c,schema:g,perspective:m,searchQuery:C,sort:_,staticTypeNames:x,maxFieldDepth:f,searchStrategy:h},i=aD(t).pipe((0,eK.shareReplay)({refCount:!0,bufferSize:1})),s=w.pipe((0,eX.withLatestFrom)(i),(0,eJ.filter)(aL),(0,eQ.take)(1),(0,eZ.mergeMap)(()=>(0,e5.concat)((0,e3.of)({type:"loadFullList"}),aD({...t,limit:2e3}).pipe((0,eH.map)(aM)))),(0,e0.share)());l[16]!==y?(e=(e,t,n)=>{var i,l;let r=(l=e)instanceof Error?l:"object"==typeof l&&null!==l&&"message"in l&&"string"==typeof l.message?Error(`${l.message} ${aB}`):Error(`${String(l)} ${aB}`),o=window.navigator.onLine,s=o&&!((i=e)instanceof tW.ChannelError)&&(i instanceof tW.ServerError||!(i instanceof tW.ClientError)||403===i.statusCode),a=t<10,d=(0,e4.merge)(o?y:(0,e9.fromEvent)(window,"online"),o&&a?(0,te.timer)(1e3*t):ts.NEVER).pipe((0,eQ.take)(1),(0,eW.switchMap)(()=>(0,e4.merge)((0,e3.of)({type:"error",error:r,retrying:!0,autoRetry:a,canRetry:s,retryCount:t}),n)));return(0,e5.concat)((0,e3.of)({type:"error",error:r,retrying:!1,autoRetry:a,canRetry:s,retryCount:t}),d)},l[16]=y,l[17]=e):e=l[17],n=(0,e4.merge)(i.pipe((0,eH.map)(aV),(0,e1.takeUntil)(s)),s).pipe((0,d.catchWithCount)(e),(0,eY.scan)(aA,aF)),l[3]=r,l[4]=f,l[5]=w,l[6]=y,l[7]=c,l[8]=m,l[9]=g,l[10]=o,l[11]=h,l[12]=C,l[13]=_,l[14]=x,l[15]=n}else n=l[15];let I=n,{error:T,items:R,isLoading:P,fromCache:E,connected:k,canRetry:D,isLoadingFullList:F,isRetrying:A,autoRetry:V,retryCount:M}=(0,eP.useObservable)(I,aF);return l[18]!==V||l[19]!==D||l[20]!==k||l[21]!==T||l[22]!==E||l[23]!==P||l[24]!==F||l[25]!==A||l[26]!==R||l[27]!==S||l[28]!==v||l[29]!==M?(i={error:T,onRetry:v,isLoading:P,items:R,isRetrying:A,canRetry:D,retryCount:M,autoRetry:V,connected:k,fromCache:E,onLoadFullList:S,isLoadingFullList:F},l[18]=V,l[19]=D,l[20]=k,l[21]=T,l[22]=E,l[23]=P,l[24]=F,l[25]=A,l[26]=R,l[27]=S,l[28]=v,l[29]=M,l[30]=i):i=l[30],i}(c),eg=er||L.loading;P[18]===Symbol.for("react.memo_cache_sentinel")?(u=e=>e.pipe((0,eH.map)(aW),(0,eU.tap)(J),(0,ta.debounce)(aK),(0,eU.tap)(Y)),P[18]=u):u=P[18];let ef=(0,eP.useObservableEvent)(u);P[19]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{Y(""),J("")},P[19]=p):p=P[19];let ex=p;P[20]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{"Escape"===e.key&&ex()},P[20]=h):h=P[20];let eb=h,[ey,ev]=(0,a.useState)();P[21]!==ey||P[22]!==eg||P[23]!==F?(f=()=>{ey||eg||ev(F)},g=[ey,eg,F],P[21]=ey,P[22]=eg,P[23]=F,P[24]=g,P[25]=f):(g=P[24],f=P[25]),(0,a.useEffect)(f,g),P[26]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{ex(),ev()},P[26]=x):x=P[26],P[27]!==F?(b=[F,ex],P[27]=F,P[28]=b):b=P[28],(0,a.useEffect)(x,b);t:{if(ep&&eg&&ey===F){y="spinner";break t}if(ep&&es){y="subtle";break t}y="initial"}let ew=y;n:{if("spinner"===ew){v=aN;break n}if(X&&"subtle"===ew){v=aG;break n}v=m.SearchIcon}let eC=v;(0,d.useReconnectingToast)(!ep),P[29]!==q?(j=q("panes.document-list-pane.search-input.aria-label"),P[29]=q,P[30]=j):j=P[30];let e_=!!K;P[31]===Symbol.for("react.memo_cache_sentinel")?(w=[2,2,1],P[31]=w):w=P[31];let eI=ep&&("subtle"!==ew||X)?null:aU;P[32]!==q?(S=q("panes.document-list-pane.search-input.placeholder"),P[32]=q,P[33]=S):S=P[33],P[34]!==ef||P[35]!==X||P[36]!==j||P[37]!==e_||P[38]!==eI||P[39]!==S||P[40]!==eC?(_=(0,o.jsx)(ej.Box,{paddingX:3,paddingBottom:3,children:(0,o.jsx)(ej.TextInput,{"aria-label":j,autoComplete:"off",border:!1,clearButton:e_,fontSize:w,icon:eC,iconRight:eI,onChange:ef,onClear:ex,onKeyDown:eb,padding:2,placeholder:S,radius:2,ref:Z,spellCheck:!1,value:X})}),P[34]=ef,P[35]=X,P[36]=j,P[37]=e_,P[38]=eI,P[39]=S,P[40]=eC,P[41]=_):_=P[41];let eT=!!G,eR=2e3===eo.length,eE=!!K,ek="subtle"===ew;return P[42]!==ed||P[43]!==ec||P[44]!==E||P[45]!==ep||P[46]!==ei||P[47]!==k||P[48]!==eg||P[49]!==el||P[50]!==ea||P[51]!==eo||P[52]!==V||P[53]!==ew||P[54]!==em||P[55]!==eh||P[56]!==F||P[57]!==eu||P[58]!==Q||P[59]!==U||P[60]!==ee||P[61]!==eT||P[62]!==eR||P[63]!==eE||P[64]!==ek||P[65]!==W?(I=(0,o.jsx)(aR,{childItemId:E,error:ei,filterIsSimpleTypeConstraint:eT,hasMaxItems:eR,hasSearchQuery:eE,isActive:k,isLazyLoading:el,isLoading:eg,autoRetry:ed,canRetry:ec,retryCount:eu,isRetrying:ea,isConnected:ep,items:eo,layout:V,muted:ek,loadingVariant:ew,onEndReached:em,onRetry:eh,paneTitle:W,searchInputElement:Q,showIcons:U,sortOrder:ee},F),P[42]=ed,P[43]=ec,P[44]=E,P[45]=ep,P[46]=ei,P[47]=k,P[48]=eg,P[49]=el,P[50]=ea,P[51]=eo,P[52]=V,P[53]=ew,P[54]=em,P[55]=eh,P[56]=F,P[57]=eu,P[58]=Q,P[59]=U,P[60]=ee,P[61]=eT,P[62]=eR,P[63]=eE,P[64]=ek,P[65]=W,P[66]=I):I=P[66],P[67]!==_||P[68]!==I?(T=(0,o.jsxs)(o.Fragment,{children:[_,I]}),P[67]=_,P[68]=I,P[69]=T):T=P[69],T});function aW(e){return e.target.value}function aK(e){return""===e?(0,e3.of)(""):(0,te.timer)(300)}let aY=(0,a.memo)(e=>{let t,n,i,l,r,a,d,c,u,p=(0,s.c)(27),{contentAfter:h,index:g,initialValueTemplates:f,menuItemGroups:x,menuItems:b,setLayout:y,setSortOrder:v,title:j}=e;p[0]!==f?(t=void 0===f?[]:f,p[0]=f,p[1]=t):t=p[1];let w=t;p[2]!==x?(n=void 0===x?[]:x,p[2]=x,p[3]=n):n=p[3];let S=n;p[4]!==b?(i=void 0===b?[]:b,p[4]=b,p[5]=i):i=p[5];let C=i,{features:_}=i$(),{collapsed:I,isLast:T}=n9(),R=T&&!I?-1:0;p[6]!==y?(l=e=>{let{layout:t}=e;y(t)},p[6]=y,p[7]=l):l=p[7],p[8]!==v?(r=e=>{v(e)},p[8]=v,p[9]=r):r=p[9],p[10]!==l||p[11]!==r?(a={setLayout:l,setSortOrder:r},p[10]=l,p[11]=r,p[12]=a):a=p[12];let P=a;return p[13]!==P||p[14]!==w||p[15]!==S||p[16]!==C?(d=(0,o.jsx)(ac,{initialValueTemplateItems:w,actionHandlers:P,menuItemGroups:S,menuItems:C}),p[13]=P,p[14]=w,p[15]=S,p[16]=C,p[17]=d):d=p[17],p[18]!==_.backButton||p[19]!==g?(c=_.backButton&&g>0&&(0,o.jsx)(ev.Button,{as:sE,"data-as":"a",icon:m.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),p[18]=_.backButton,p[19]=g,p[20]=c):c=p[20],p[21]!==h||p[22]!==d||p[23]!==c||p[24]!==R||p[25]!==j?(u=(0,o.jsx)(ev.TooltipDelayGroupProvider,{children:(0,o.jsx)(iv,{actions:d,backButton:c,contentAfter:h,tabIndex:R,title:j})}),p[21]=h,p[22]=d,p[23]=c,p[24]=R,p[25]=j,p[26]=u):u=p[26],u});function aX(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:l}=n.options.meta||{},r=(0,a.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,l=e<i?e:i,r=e<i?i:e,o=n.getRowModel().flatRows.slice(l,r+1).map(({id:e})=>e),s=n.getSelectedRowModel().rows.map(({id:e})=>e);n.setRowSelection(()=>[...o,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else l&&(l(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,l,n]);return(0,o.jsx)(ej.Checkbox,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:r})}function aJ(e){let t,n,i,l,r,d,c,p,m,h,g,f,x,b,y,v,j,w=(0,s.c)(49),{children:S,table:C}=e,[_,I]=(0,a.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],w[0]=t):t=w[0];let[T,R]=(0,a.useState)(t);w[1]!==_?.state?(n=e=>{_?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),I(void 0===e?null:e),R([])},w[1]=_?.state,w[2]=n):n=w[2];let P=n;w[3]!==P?(i=()=>P(),w[3]=P,w[4]=i):i=w[4];let E=i;w[5]!==P||w[6]!==_||w[7]!==C?(l=e=>{if(!_)return;let t=C.getVisibleLeafColumns(),n=t.findIndex(e=>e.id===_.colId)+("left"===e?-1:1);n<0||n>=t.length||P({colId:t[n].id,rowIndex:_.rowIndex,state:"selected"})},w[5]=P,w[6]=_,w[7]=C,w[8]=l):l=w[8];let k=l;w[9]!==_?(r=e=>{_&&R(t=>{let{rowIndex:n}=_,i=t=>t+("down"===e?1:-1);if(!t.length){let e=i(n);return e<0?[]:[e]}let l=i(t[t.length-1]);return l<0?t:l===n?[]:t.includes(l)?t.slice(0,-1):[...t,l]})},w[9]=_,w[10]=r):r=w[10];let D=r;w[11]!==P?(d=(e,t)=>{P({colId:e,rowIndex:t,state:"selected"})},w[11]=P,w[12]=d):d=w[12];let F=d;w[13]!==P||w[14]!==_||w[15]!==T.length?(c=()=>{_&&(T.length?R([]):P("selected"===_.state?null:{..._,state:"selected"}))},w[13]=P,w[14]=_,w[15]=T.length,w[16]=c):c=w[16];let A=c;w[17]!==D||w[18]!==_||w[19]!==F?(p=(e,t)=>{if(!_)return;let n="ArrowDown"===t?"down":"up",i="down"===n?1:-1;if(e)D(n);else{let e=_.rowIndex+i;if(e<0)return;F(_.colId,e)}},w[17]=D,w[18]=_,w[19]=F,w[20]=p):p=w[20];let V=p;w[21]!==k||w[22]!==A||w[23]!==V||w[24]!==_?(m=e=>{if(!_)return;let{key:t,shiftKey:n}=e;switch(t){case"Shift":break;case"Escape":A();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),V(n,t);break;case"ArrowLeft":case"ArrowRight":"selected"===_.state&&(e.preventDefault(),k("ArrowLeft"===t?"left":"right"))}},w[21]=k,w[22]=A,w[23]=V,w[24]=_,w[25]=m):m=w[25];let M=m;w[26]!==E||w[27]!==_?(h=e=>{_&&(document.getElementById(`cell-${_.colId}-${_.rowIndex}`)?.contains(e.target)||E())},w[26]=E,w[27]=_,w[28]=h):h=w[28];let L=h;w[29]!==L||w[30]!==M||w[31]!==_?(g=()=>(_&&(document.addEventListener("keydown",M),document.addEventListener("click",L)),()=>{_&&(document.removeEventListener("keydown",M),document.removeEventListener("click",L))}),f=[L,M,_],w[29]=L,w[30]=M,w[31]=_,w[32]=g,w[33]=f):(g=w[32],f=w[33]),(0,a.useEffect)(g,f),w[34]===Symbol.for("react.memo_cache_sentinel")?(x=()=>I(aQ),w[34]=x):x=w[34];let z=x;w[35]!==_||w[36]!==T?(b=(e,t)=>_?.colId!==e?null:_.rowIndex===t?"focused"===_.state?"focused":"selectedAnchor":T.includes(t)?"selectedRange":null,w[35]=_,w[36]=T,w[37]=b):b=w[37];let O=b;w[38]!==P||w[39]!==_?(y=()=>{_&&P({colId:_.colId,rowIndex:_.rowIndex+1,state:"selected"})},w[38]=P,w[39]=_,w[40]=y):y=w[40];let B=y;w[41]!==O||w[42]!==E||w[43]!==F||w[44]!==B?(v={focusAnchorCell:z,resetFocusSelection:E,setSelectedAnchorCell:F,getStateByCellId:O,submitFocusedCell:B},w[41]=O,w[42]=E,w[43]=F,w[44]=B,w[45]=v):v=w[45];let H=v;return w[46]!==S||w[47]!==H?(j=(0,o.jsx)(u.DocumentSheetListContext.Provider,{value:H,children:S}),w[46]=S,w[47]=H,w[48]=j):j=w[48],j}function aQ(e){return e?{...e,state:"focused"}:null}aY.displayName="Memo(PaneHeader)";let aZ=e_.styled.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,a0=(0,e_.styled)(aZ)`
  position: sticky;
  z-index: 2;
`;function a1(e){let{getValue:t,column:n,row:i,fieldType:l}=e,r=`cell-${n.id}-${i.index}`,[s,d]=(0,a.useState)(()=>t()),[c,p]=(0,a.useState)(!1),m=(0,a.useRef)(null),{focusAnchorCell:h,resetFocusSelection:g,setSelectedAnchorCell:f,getStateByCellId:x,submitFocusedCell:b}=(()=>{let e=(0,a.useContext)(u.DocumentSheetListContext);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e})(),y=x(n.id,i.index),v=(0,a.useCallback)(()=>{f(n.id,i.index),h()},[n.id,h,i.index,f]),{patchDocument:j}=e.table.options.meta||{},w=()=>{m.current?.focus(),m.current instanceof HTMLInputElement&&m.current.select()},S=(0,a.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===y&&w(),"focused"===y&&b())},[y,b]),C=(0,a.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(d(t),j?.(i.id,n.id,t))},[n.id,j,i.id]),_=(0,a.useCallback)(()=>navigator.clipboard.writeText(s.toString()),[s]);(0,a.useEffect)(()=>(("selectedAnchor"===y||"focused"===y)&&document.addEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.addEventListener("paste",C),"selectedAnchor"===y&&document.addEventListener("copy",_),()=>{("selectedAnchor"===y||"focused"===y)&&document.removeEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.removeEventListener("paste",C),"selectedAnchor"===y&&document.removeEventListener("copy",_)}),[r,y,n.id,x,_,S,C,i.index]);let I=()=>"focused"===y?"2px solid blue":"selectedRange"===y?"1px solid green":"selectedAnchor"===y?"1px solid blue":"1px solid transparent",T={onFocus:v,onBlur:()=>{c&&(j?.(i.id,n.id,s),p(!1)),g()},onMouseDown:e=>{2===e.detail?w():(e.preventDefault(),f(n.id,i.index))},"aria-selected":!!y,"data-testid":r,id:r,ref:e=>{m.current=e}};return"boolean"===l.name?(0,o.jsxs)(ej.Select,{...T,onChange:()=>null,radius:0,style:{boxShadow:"none",border:I(),padding:0},value:JSON.stringify(s),children:[(0,o.jsx)("option",{value:"True",children:"True"}),(0,o.jsx)("option",{value:"False",children:"False"})]}):(0,o.jsx)(ej.TextInput,{...T,size:0,radius:0,border:!1,style:{border:I(),padding:"22px 16px"},value:"string"==typeof s||"number"==typeof s?s:JSON.stringify(s),onChange:e=>{p(!0),d(e.target.value)}})}function a2(e){let t=e.column.getIsPinned(),n=t&&e.column.getIsLastColumn("left")?2:1;return(0,o.jsx)(t?a0:aZ,{style:{left:e.column.getStart("left")??void 0,borderRight:`${n}px solid var(--card-border-color)`},width:e.column.getSize(),children:nI(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let a3=e=>{let{documentPreviewStore:t,row:n,schemaType:i}=e,l=(0,a.useMemo)(()=>(0,d.getPreviewStateObservable)(t,i,n.original._id),[t,n.original._id,i]),r=(0,d.useDocumentVersionInfo)(n.original._id),{snapshot:s,isLoading:c}=(0,eP.useObservable)(l,{snapshot:null,isLoading:!0});if(c)return(0,o.jsx)(ej.Text,{size:1,muted:!0,children:"Loading..."});let u=s?.title??"Untitled";return(0,o.jsxs)(ej.Flex,{align:"center",gap:3,children:[(0,o.jsx)(d.DocumentStatusIndicator,{draft:r.draft,published:r.published,versions:void 0}),(0,o.jsx)(ej.Text,{size:1,children:u})]})},a4=(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},a5=["string","number","boolean"],a6=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:l}=n;return a5.includes(i.name)?[...e,a4(t?`${t}.${n.name}`:n.name,{id:t?`${t}_${n.name}`:n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,o.jsx)(a1,{...e,fieldType:i})})]:"object"===i.name&&(0,eS.isObjectSchemaType)(i)&&!t?[...e,{header:l,columns:a6(i,n.name)}]:e},[]),a8=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?a8(e.columns):[]);function a7({table:e}){let{t}=(0,d.useTranslation)(),n=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,i=(0,a.useCallback)(()=>{e.resetColumnVisibility()},[e]);return(0,o.jsx)(ev.MenuButton,{button:(0,o.jsx)(ev.Button,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,o.jsx)(ej.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,o.jsxs)(ej.Flex,{direction:"column",height:"fill",gap:3,children:[(0,o.jsx)(ej.Text,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,o.jsx)(ej.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,o.jsx)(ej.Stack,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(t=>{let i,l,r=t.id.replace(/ /g,"-");return(0,o.jsxs)(ej.Flex,{marginY:2,align:"center",children:[(0,o.jsx)(ej.Checkbox,{readOnly:(i=t.getIsVisible(),l=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length,n&&!i||l&&i),checked:t.getIsVisible(),onChange:()=>{t.toggleVisibility()},id:`col-visibility-${r}`,style:{display:"block"}}),(0,o.jsx)(ej.Box,{flex:1,paddingLeft:3,children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)("label",{htmlFor:`col-visibility-${r}`,children:t.columnDef.header?.toString()})})})]},t.id)})})}),(0,o.jsx)(ev.Button,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:i})]})}),placement:"bottom",popover:{portal:!0}})}let a9=(0,e_.styled)(ej.Flex)`
  flex-shrink: 0;
`;function de(){let e,t,n,i=(0,s.c)(5),{state:l}=(0,d.useSearchState)(),{filtersVisible:r}=l;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.SearchHeader,{}),i[0]=e):e=i[0],i[1]!==r?(t=r&&(0,o.jsx)(d.Filters,{showTypeFilter:!1}),i[1]=r,i[2]=t):t=i[2],i[3]!==t?(n=(0,o.jsxs)(a9,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let dt=e_.styled.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,dn=(0,e_.styled)(dt)`
  position: sticky;
  z-index: 2;
`,di=e_.styled.div`
  visibility: hidden;

  ${dt}:hover & {
    visibility: visible;
  }
`;function dl(e){let{header:t,headerGroup:n}=e,{t:i}=(0,d.useTranslation)(),l=t.column.getIsPinned(),r=n.depth>0&&!t.column.parent?null:(0,o.jsx)(ej.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:nI(t.column.columnDef.header,t.getContext())}),s=t.column.getCanHide()&&(0===n.depth?!t.column.columns.length:t.column.parent),a=l&&t.column.getIsLastColumn("left")?2:1;return(0,o.jsx)(l?dn:dt,{style:{left:t.column.getStart("left")??void 0,borderRight:`${a}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,o.jsxs)(ej.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,o.jsx)(ev.Tooltip,{delay:500,content:r,children:(0,o.jsx)(ej.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:r})}),s&&(0,o.jsx)(di,{children:(0,o.jsx)(ev.MenuButton,{button:(0,o.jsx)(ev.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:m.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,o.jsx)(ej.Menu,{children:(0,o.jsx)(ev.MenuItem,{text:i("sheet-list.hide-field"),icon:m.CloseIcon,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function dr({table:e}){return(0,o.jsx)(ev.TooltipDelayGroupProvider,{children:(0,o.jsxs)(ej.Flex,{gap:3,align:"center",children:[(0,o.jsx)(ev.Button,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:m.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,o.jsx)(ev.Button,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:m.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,o.jsxs)(ej.Text,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,o.jsx)(ev.Button,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:m.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,o.jsx)(ev.Button,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:m.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,o.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]})})}function ds(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let da={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},dd=(0,e_.styled)(ej.Flex)`
  height: 100%;
`,dc=e_.styled.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,du=e_.styled.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function dp({documentSchemaType:e}){let{dispatch:t,state:n}=(0,d.useSearchState)(),{columns:i,initialColumnsVisibility:l}=function(e){let t=(0,d.useDocumentPreviewStore)(),n=(0,a.useMemo)(()=>e?[{id:"selected",enableHiding:!1,header:e=>(0,o.jsxs)(ej.Box,{children:[(0,o.jsx)(ej.Checkbox,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:aX},a4("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,o.jsx)(a3,{...n,documentPreviewStore:t,schemaType:e})}),...a6(e)]:[],[t,e]),[i]=(0,a.useMemo)(()=>a8(n).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(e),{data:r}=function(e){let t,n,i,l,r=(0,s.c)(12),{typeName:o}=e,{state:u}=(0,d.useSearchState)();r[0]!==u.result.hits?(t=new Map,u.result.hits.forEach(e=>t.set((0,c.getPublishedId)(e.hit._id),e.hit)),r[0]=u.result.hits,r[1]=t):t=r[1];let p=t,m=`_type == "${o}"`;r[2]!==m?(n={filter:m},r[2]=m,r[3]=n):n=r[3];let{data:h,isLoading:g}=function(e){let t,n,i,l,r,o,u,p,m,h,g=(0,s.c)(27),{filter:f,params:x,apiVersion:b}=e,y=`*[${f}][0...2000]`,v=b||d.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;g[0]!==v?(t={...d.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:v},g[0]=v,g[1]=t):t=g[1];let j=(0,d.useClient)(t);g[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},g[2]=n):n=g[2];let[w,S]=(0,a.useReducer)(ds,n),[C,_]=(0,a.useState)(null!==j),[I,T]=(0,a.useState)(null);g[3]!==y||g[4]!==j||g[5]!==x?(i=async()=>{if(!j)return void _(!1);try{let e=await j.fetch(y,x);S({type:"DOCUMENTS_SET",documents:e}),_(!1)}catch(e){T(e)}},g[3]=y,g[4]=j,g[5]=x,g[6]=i):i=g[6];let R=i;g[7]!==R?(l=async e=>{if("welcome"===e.type&&(_(!0),await R(),_(!1)),"reconnect"===e.type&&_(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&S({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_UPDATED",payload:t})}}},g[7]=R,g[8]=l):l=g[8];let P=l;e:{let e;if(!j){let e;g[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e3.of)(),g[9]=e):e=g[9],r=e;break e}if(g[10]!==y||g[11]!==j.observable||g[12]!==x){let t;g[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(T(e),(0,e3.of)(e)),g[14]=t):t=g[14],e=j.observable.listen(y,x,da).pipe((0,e$.catchError)(t)),g[10]=y,g[11]=j.observable,g[12]=x,g[13]=e}else e=g[13];r=e}let E=r;g[15]!==P||g[16]!==E?(o=()=>{let e=E.subscribe(P);return()=>{e?.unsubscribe()}},u=[P,E],g[15]=P,g[16]=E,g[17]=o,g[18]=u):(o=g[17],u=g[18]),(0,a.useEffect)(o,u),g[19]!==w.documents?(p=Object.keys(w.documents).reduce((e,t)=>{let n=w.documents[t],i=n._id===(0,c.getDraftId)(n._id),l=i?n._id:(0,c.getDraftId)(n._id);return e[l]&&!i||(e[l]=n),e},{}),g[19]=w.documents,g[20]=p):p=g[20];let k=p;g[21]!==k?(m=Object.values(k),g[21]=k,g[22]=m):m=g[22];let D=m;return g[23]!==D||g[24]!==I||g[25]!==C?(h={data:D,isLoading:C,error:I},g[23]=D,g[24]=I,g[25]=C,g[26]=h):h=g[26],h}(n);if(r[4]!==h||r[5]!==p){let e;r[7]!==p?(e=e=>p.has((0,c.getPublishedId)(e._id)),r[7]=p,r[8]=e):e=r[8],i=h.filter(e),r[4]=h,r[5]=p,r[6]=i}else i=r[6];let f=i;return r[9]!==f||r[10]!==g?(l={data:f,isLoading:g},r[9]=f,r[10]=g,r[11]=l):l=r[11],l}({typeName:e.name}),[u,p]=(0,a.useState)(null),m=n.result.hits.length,h=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=a.useState(()=>({current:function(e){var t,n;let i=[...n_,...null!=(t=e._features)?t:[]],l={_features:i},r=l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l)),{}),o={...null!=(n=e.initialState)?n:{}};l._features.forEach(e=>{var t;o=null!=(t=null==e.getInitialState?void 0:e.getInitialState(o))?t:o});let s=[],a=!1,d={_features:i,options:{...r,...e},initialState:o,_queue:e=>{s.push(e),a||(a=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();a=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{var t;t=tX(e,l.options),l.options=l.options.mergeOptions?l.options.mergeOptions(r,t):{...r,...t}},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,n)=>{var i;return null!=(i=null==l.options.getRowId?void 0:l.options.getRowId(e,t,n))?i:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!n&&!(n=l.getCoreRowModel().rowsById[e]))throw Error();return n},_getDefaultColumnDef:tZ(()=>[l.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},t0(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>l.options.columns,getAllColumns:tZ(()=>[l._getColumnDefs()],e=>{let t=function(e,n,i){return void 0===i&&(i=0),e.map(e=>{let r=function(e,t,n,i){var l,r;let o,s={...e._getDefaultColumnDef(),...t},a=s.accessorKey,d=null!=(l=null!=(r=s.id)?r:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?l:"string"==typeof s.header?s.header:void 0;if(s.accessorFn?o=s.accessorFn:a&&(o=a.includes(".")?e=>{let t=e;for(let e of a.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[s.accessorKey]),!d)throw Error();let c={id:`${String(d)}`,accessorFn:o,parent:i,depth:n,columnDef:s,columns:[],getFlatColumns:tZ(()=>[!0],()=>{var e;return[c,...null==(e=c.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},t0(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:tZ(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=c.columns)&&t.length?e(c.columns.flatMap(e=>e.getLeafColumns())):[c]},t0(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(c,e);return c}(l,e,i,n);return r.columns=e.columns?t(e.columns,r,i+1):[],r})};return t(e)},t0(e,"debugColumns","getAllColumns")),getAllFlatColumns:tZ(()=>[l.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),t0(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:tZ(()=>[l.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),t0(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:tZ(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),t0(e,"debugColumns","getAllLeafColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,d);for(let e=0;e<l._features.length;e++){let t=l._features[e];null==t||null==t.createTable||t.createTable(l)}return l}(t)})),[i,l]=a.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...i,...e.state},onStateChange:t=>{l(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:r,columns:i,getCoreRowModel:e=>tZ(()=>[e.options.data],t=>{let n={rows:[],flatRows:[],rowsById:{}},i=function(t,l,r){void 0===l&&(l=0);let o=[];for(let a=0;a<t.length;a++){let d=t4(e,e._getRowId(t[a],a,r),t[a],a,l,void 0,null==r?void 0:r.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,o.push(d),e.options.getSubRows){var s;d.originalSubRows=e.options.getSubRows(t[a],a),null!=(s=d.originalSubRows)&&s.length&&(d.subRows=i(d.originalSubRows,l+1,d))}}return o};return n.rows=i(t),n},t0(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex())),getFilteredRowModel:e=>tZ(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,i)=>{var l,r,o,s,a,d,c,u,p,m;let h,g,f,x,b,y,v,j,w,S;if(!t.rows.length||!(null!=n&&n.length)&&!i){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let C=[],_=[];(null!=n?n:[]).forEach(t=>{var n;let i=e.getColumn(t.id);if(!i)return;let l=i.getFilterFn();l&&C.push({id:t.id,filterFn:l,resolvedValue:null!=(n=null==l.resolveFilterValue?void 0:l.resolveFilterValue(t.value))?n:t.value})});let I=(null!=n?n:[]).map(e=>e.id),T=e.getGlobalFilterFn(),R=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());i&&T&&R.length&&(I.push("__global__"),R.forEach(e=>{var t;_.push({id:e.id,filterFn:T,resolvedValue:null!=(t=null==T.resolveFilterValue?void 0:T.resolveFilterValue(i))?t:i})}));for(let e=0;e<t.flatRows.length;e++){let n=t.flatRows[e];if(n.columnFilters={},C.length)for(let e=0;e<C.length;e++){let t=(h=C[e]).id;n.columnFilters[t]=h.filterFn(n,t,h.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(_.length){for(let e=0;e<_.length;e++){let t=(g=_[e]).id;if(g.filterFn(n,t,g.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return l=t.rows,r=e=>{for(let t=0;t<I.length;t++)if(!1===e.columnFilters[I[t]])return!1;return!0},e.options.filterFromLeafRows?(o=l,s=r,f=[],x={},b=null!=(d=(a=e).options.maxLeafRowFilterDepth)?d:100,{rows:(y=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){var i;let r=e[l],o=t4(a,r.id,r.original,r.index,r.depth,void 0,r.parentId);if(o.columnFilters=r.columnFilters,null!=(i=r.subRows)&&i.length&&t<b){if(o.subRows=y(r.subRows,t+1),s(r=o)&&!o.subRows.length||s(r)||o.subRows.length){n.push(r),x[r.id]=r,f.push(r);continue}}else s(r=o)&&(n.push(r),x[r.id]=r,f.push(r))}return n})(o),flatRows:f,rowsById:x}):(c=l,u=r,v=[],j={},w=null!=(m=(p=e).options.maxLeafRowFilterDepth)?m:100,{rows:(S=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){let r=e[l];if(u(r)){var i;if(null!=(i=r.subRows)&&i.length&&t<w){let e=t4(p,r.id,r.original,r.index,r.depth,void 0,r.parentId);e.subRows=S(r.subRows,t+1),r=e}n.push(r),v.push(r),j[r.id]=r}}return n})(c),flatRows:v,rowsById:j})},t0(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex())),getPaginationRowModel:e=>tZ(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{let i;if(!n.rows.length)return n;let{pageSize:l,pageIndex:r}=t,{rows:o,flatRows:s,rowsById:a}=n,d=l*r;if(o=o.slice(d,d+l),e.options.paginateExpandedRows)i={rows:o,flatRows:s,rowsById:a};else{var c;let e,t;c={rows:o,flatRows:s,rowsById:a},e=[],t=n=>{var i;e.push(n),null!=(i=n.subRows)&&i.length&&n.getIsExpanded()&&n.subRows.forEach(t)},c.rows.forEach(t),i={rows:e,flatRows:c.flatRows,rowsById:c.rowsById}}i.flatRows=[];let u=e=>{i.flatRows.push(e),e.subRows.length&&e.subRows.forEach(u)};return i.rows.forEach(u),i},t0(e.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:l},getRowId:e=>e._id,meta:{selectedAnchor:u,setSelectedAnchor:p,patchDocument:(e,t,n)=>null}}),{rows:g}=h.getRowModel();(0,a.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let f=(0,a.useCallback)(e=>(0,o.jsx)(ej.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,o.jsx)(a2,{...t},e.original._id+t.id))},e.original._id+e.id),[]),x=`Total: ${m} rows, showing ${g.length} rows`;return(0,o.jsxs)(dd,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,o.jsxs)(ej.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,o.jsxs)(ej.Flex,{direction:"row",align:"center",children:[(0,o.jsx)(de,{}),(0,o.jsx)(ej.Text,{size:0,muted:!0,children:x})]}),(0,o.jsx)(a7,{table:h})]}),(0,o.jsx)(dc,{children:(0,o.jsx)(aJ,{table:h,children:(0,o.jsxs)(du,{children:[(0,o.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,o.jsx)(ej.Box,{as:"tr",children:e.headers.map(t=>(0,o.jsx)(dl,{header:t,headerGroup:e},t.id))},e.id))}),(0,o.jsx)("tbody",{children:h.getRowModel().rows.map(f)})]})})}),(0,o.jsx)(ej.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,o.jsx)(dr,{table:h})})]})}function dm(e){let t,n,i,l=(0,s.c)(7),r=(0,d.useSchema)(),a=e.pane.schemaTypeName;if(l[0]!==r||l[1]!==a?(n=!(t=r.get(a))||!(0,eS.isDocumentSchemaType)(t),l[0]=r,l[1]=a,l[2]=t,l[3]=n):(t=l[2],n=l[3]),n)throw Error(`Schema type "${a}" not found or not a document schema`);return l[4]!==e||l[5]!==t?(i=(0,o.jsx)(d.SearchProvider,{children:(0,o.jsx)(dp,{...e,documentSchemaType:t})}),l[4]=e,l[5]=t,l[6]=i):i=l[6],i}function dh(e){let[t,n]=(0,a.useState)(e);return(0,ez.default)(t,e)?t:(n(e),e)}let dg=(0,a.memo)(function(e){let t,n,i,l,r,a,c,u,p,m=(0,s.c)(36),{index:h,isSelected:g,pane:f,paneKey:x}=e,{name:b}=(0,d.useSource)(),{defaultLayout:y,initialValueTemplates:v,menuItemGroups:j,menuItems:w,options:S}=f,C=void 0===v?d.EMPTY_ARRAY:v,{defaultOrdering:_,filter:I}=S,T=void 0===_?d.EMPTY_ARRAY:_,R=dh(S.params||aS),P=f.source;e:{let e;m[0]!==I||m[1]!==R?(e=aE(I,R),m[0]=I,m[1]=R,m[2]=e):e=m[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let E=t,[k,D]=i2("layout",E??f.id,void 0===y?"default":y),{title:F}=(0,d.useI18nText)(f);m[3]!==T?(n=T?.length>0?{by:T}:aw,m[3]=T,m[4]=n):n=m[4];let A=n,[V,M]=i2("sort-order",E??f.id,A);m[5]!==k||m[6]!==w||m[7]!==V?(i=(e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:(0,eM.isEqual)(n?.by,e?.params?.by||d.EMPTY_ARRAY)}:{...e,selected:!1})})({menuItems:w,sortOrderRaw:V,layout:k}),m[5]=k,m[6]=w,m[7]=V,m[8]=i):i=m[8];let L=i,z="sheetList"===k;m[9]!==z||m[10]!==k||m[11]!==e||m[12]!==V?(l=z?(0,o.jsx)(dm,{...e},e.pane.id):(0,o.jsx)(aq,{...e,sortOrder:V,layout:k}),m[9]=z,m[10]=k,m[11]=e,m[12]=V,m[13]=l):l=m[13];let O=l,B=P||b;return m[14]!==z?(r=z?{}:{currentMaxWidth:350,maxWidth:640},m[14]=z,m[15]=r):r=m[15],m[16]!==f.source?(a=!1,m[16]=f.source,m[17]=a):a=m[17],m[18]!==h||m[19]!==C||m[20]!==j||m[21]!==L||m[22]!==D||m[23]!==M||m[24]!==F?(c=(0,o.jsx)(aY,{index:h,initialValueTemplates:C,menuItemGroups:j,menuItems:L,setLayout:D,setSortOrder:M,title:F}),m[18]=h,m[19]=C,m[20]=j,m[21]=L,m[22]=D,m[23]=M,m[24]=F,m[25]=c):c=m[25],m[26]!==g||m[27]!==x||m[28]!==O||m[29]!==c||m[30]!==r||m[31]!==a?(u=(0,o.jsxs)(n8,{"data-ui":"DocumentListPane",id:x,minWidth:320,...r,selected:g,children:[a,c,O]}),m[26]=g,m[27]=x,m[28]=O,m[29]=c,m[30]=r,m[31]=a,m[32]=u):u=m[32],m[33]!==u||m[34]!==B?(p=(0,o.jsx)(d.SourceProvider,{name:B,children:u}),m[33]=u,m[34]=B,m[35]=p):p=m[35],p});dg.displayName="Memo(PaneContainer)";let df=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};df.displayName="LiveEditBadge";let dx={activePanes:[]};function db(e){dx.activePanes=e}function dy(e,t,n,i){let l=n?.panes||[],r=dx.activePanes||[],o=t.id||(0,eC.uuid)();for(let n=r.length-1;n>=0;n--){let s=r[n];if("object"==typeof s&&(s.canHandleIntent?.(e,t,{pane:s,index:n})||"documentList"===s.type&&s.schemaTypeName===t.type&&"_type == $type"===s.options.filter)){let r=function(e,{template:t,version:n,inspect:i,comment:l,task:r}){switch(e){case"create":return{template:t,version:n};case"edit":return{inspect:i,comment:l,task:r};default:return lQ}}(e,t);return{panes:l.slice(0,n).concat([[{id:o,params:r,payload:i}]])}}}return{intent:e,params:t,payload:i}}let dv=(0,e_.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,dj=(0,e_.styled)(ej.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function dw(e){let t,n,i,l,r,c,u,p,m,h,g,f,x=(0,s.c)(39),{showChanges:b}=e,{documentId:y,schemaType:v,timelineError:j,timelineStore:w,value:S}=iV(),{selectedReleaseId:_}=(0,d.usePerspective)(),[I,T]=(0,a.useState)(null),R=(0,d.useTimelineSelector)(w,dR),P=(0,d.useTimelineSelector)(w,dT),E=(0,d.useTimelineSelector)(w,dI),k=(0,d.useTimelineSelector)(w,d_),D=(0,d.useTimelineSelector)(w,dC),F="loading"===k,A=!E,{t:V}=(0,d.useTranslation)(C);x[0]!==P||x[1]!==y||x[2]!==A||x[3]!==v||x[4]!==S?(t={documentId:y,schemaType:v,FieldWrapper:dS,rootDiff:P,isComparingCurrent:A,value:S,showFromValue:!0},x[0]=P,x[1]=y,x[2]=A,x[3]=v,x[4]=S,x[5]=t):t=x[5];let M=t;if(_){let e;return x[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,o.jsx)(ej.Card,{flex:1,padding:2,paddingTop:0,children:(0,o.jsx)(ow,{versionError:!0})})}),x[6]=e):e=x[6],e}return x[7]!==V?(n=V("changes.from.label"),x[7]=V,x[8]=n):n=x[8],x[9]!==n?(i=(0,o.jsx)(ej.Text,{size:1,muted:!0,children:n}),x[9]=n,x[10]=i):i=x[10],x[11]!==D?(l=(0,o.jsx)(o_,{mode:"since",chunk:D,placement:"bottom-start"}),x[11]=D,x[12]=l):l=x[12],x[13]!==V?(r=V("changes.to.label"),x[13]=V,x[14]=r):r=x[14],x[15]!==r?(c=(0,o.jsx)(ej.Text,{size:1,muted:!0,children:r}),x[15]=r,x[16]=c):c=x[16],x[17]!==R?(u=(0,o.jsx)(o_,{chunk:R,mode:"rev",placement:"bottom-end"}),x[17]=R,x[18]=u):u=x[18],x[19]!==i||x[20]!==l||x[21]!==c||x[22]!==u?(p=(0,o.jsx)(ej.Box,{padding:3,children:(0,o.jsxs)(dj,{paddingX:2,paddingBottom:2,children:[i,l,c,u]})}),x[19]=i,x[20]=l,x[21]=c,x[22]=u,x[23]=p):p=x[23],x[24]!==P||x[25]!==M||x[26]!==F||x[27]!==v||x[28]!==b||x[29]!==j?(m=b&&(0,o.jsx)(dP,{diff:P,documentContext:M,error:j,loading:F,schemaType:v}),x[24]=P,x[25]=M,x[26]=F,x[27]=v,x[28]=b,x[29]=j,x[30]=m):m=x[30],x[31]!==m?(h=(0,o.jsx)(dv,{"data-ui":"Scroller",ref:T,children:(0,o.jsx)(ej.Box,{flex:1,paddingX:3,height:"fill",children:m})}),x[31]=m,x[32]=h):h=x[32],x[33]!==I||x[34]!==h?(g=(0,o.jsx)(ej.Card,{flex:1,paddingX:2,paddingY:2,children:(0,o.jsx)(ej.BoundaryElementProvider,{element:I,children:h})}),x[33]=I,x[34]=h,x[35]=g):g=x[35],x[36]!==g||x[37]!==p?(f=(0,o.jsxs)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[p,g]}),x[36]=g,x[37]=p,x[38]=f):f=x[38],f}function dS(e){return(0,o.jsx)(d.ChangeFieldWrapper,{...e,hasRevertHover:!1})}function dC(e){return e.sinceTime}function d_(e){return e.selectionState}function dI(e){return e.onOlderRevision}function dT(e){return e.diff}function dR(e){return e.revTime}function dP(e){let t,n,i=(0,s.c)(9),{error:l,diff:r,documentContext:a,loading:c,schemaType:p}=e;if(l){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.NoChanges,{}),i[0]=e):e=i[0],e}if(c){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.LoadingBlock,{showText:!0}),i[1]=e):e=i[1],e}if(!r){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.NoChanges,{}),i[2]=e):e=i[2],e}return i[3]!==r||i[4]!==p?(t=(0,o.jsx)(d.ChangeList,{diff:r,schemaType:p}),i[3]=r,i[4]=p,i[5]=t):t=i[5],i[6]!==a||i[7]!==t?(n=(0,o.jsx)(u.DocumentChangeContext.Provider,{value:a,children:t}),i[6]=a,i[7]=t,i[8]=n):n=i[8],n}function dE(e){let t,n,i,l,r,a,c,u,p=(0,s.c)(27),{event:m,isSelected:h,onSelect:g,optionsMenu:f}=e,{t:x}=(0,d.useTranslation)("studio");p[0]!==m?(t=!(0,d.isDeleteDocumentVersionEvent)(m)&&!(0,d.isDeleteDocumentGroupEvent)(m)&&!(0,d.isUnpublishDocumentEvent)(m)&&!(0,d.isScheduleDocumentVersionEvent)(m)&&!(0,d.isUnscheduleDocumentVersionEvent)(m),p[0]=m,p[1]=t):t=p[1];let b=t;p[2]!==m||p[3]!==b||p[4]!==g?(n=e=>{e.preventDefault(),e.stopPropagation(),b&&g(m)},p[2]=m,p[3]=b,p[4]=g,p[5]=n):n=p[5];let y=n;p[6]!==b||p[7]!==x?(i=b?"":x("changes.not-selectable"),p[6]=b,p[7]=x,p[8]=i):i=p[8];let v=b?"button":"div",j=b?"pointer":"default";return p[9]!==j?(l={cursor:j,width:"100%"},p[9]=j,p[10]=l):l=p[10],p[11]!==m?(r=(0,o.jsx)(d.Event,{event:m,showChangesBy:"tooltip"}),p[11]=m,p[12]=r):r=p[12],p[13]!==m.timestamp||p[14]!==y||p[15]!==h||p[16]!==v||p[17]!==l||p[18]!==r?(a=(0,o.jsx)(ej.Card,{as:v,onClick:y,padding:2,pressed:h,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":m.timestamp,style:l,children:r}),p[13]=m.timestamp,p[14]=y,p[15]=h,p[16]=v,p[17]=l,p[18]=r,p[19]=a):a=p[19],p[20]!==b||p[21]!==i||p[22]!==a?(c=(0,o.jsx)(ev.Tooltip,{content:i,disabled:b,children:a}),p[20]=b,p[21]=i,p[22]=a,p[23]=c):c=p[23],p[24]!==f||p[25]!==c?(u=(0,o.jsxs)(ej.Flex,{gap:1,children:[c,f]}),p[24]=f,p[25]=c,p[26]=u):u=p[26],u}function dk(e){let t,n,i,l,r,a,u,p,m,h,g,f,x=(0,s.c)(44),{event:b}=e,{t:y}=(0,d.useTranslation)(C),{t:v}=(0,d.useTranslation)(),j=(0,ej.usePortal)(),{params:w,setParams:S}=lI(),_=(0,d.useSetPerspective)(),{document:I}=(0,d.useWorkspace)(),{drafts:T}=I,{enabled:R}=T;x[0]!==b.id||x[1]!==b.versionId||x[2]!==b.versionRevisionId||x[3]!==w||x[4]!==S?(t=()=>{S({...w,rev:b.versionRevisionId||"@lastPublished",since:void 0,historyEvent:b.id,historyVersion:(0,c.getVersionFromId)(b.versionId)})},x[0]=b.id,x[1]=b.versionId,x[2]=b.versionRevisionId,x[3]=w,x[4]=S,x[5]=t):t=x[5];let P=t;x[6]!==b.versionRevisionId||x[7]!==R||x[8]!==w||x[9]!==S||x[10]!==_?(n=()=>{S({...w,rev:b.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{_(R?"drafts":"published")},100)},x[6]=b.versionRevisionId,x[7]=R,x[8]=w,x[9]=S,x[10]=_,x[11]=n):n=x[11];let E=n;x[12]!==b.release?(i=e=>{let{children:t}=e;return(0,o.jsx)(d.VersionInlineBadge,{$tone:b.release?(0,d.isReleaseDocument)(b.release)?(0,d.getReleaseTone)(b.release):"default":void 0,children:t})},x[12]=b.release,x[13]=i):i=x[13];let k=i;x[14]!==b.release?(l=b.release&&!(0,d.isReleaseDocument)(b.release),x[14]=b.release,x[15]=l):l=x[15];let D=l,F=`timeline-item-menu-button-${b.versionId}`;x[16]!==y?(r=y("timeline-item.menu-button.aria-label"),x[16]=y,x[17]=r):r=x[17],x[18]!==b.release||x[19]!==D||x[20]!==y?(a=D?y("timeline-item.not-found-release.tooltip",{releaseId:b.release?._id?(0,d.getReleaseIdFromReleaseDocumentId)(b.release._id):void 0}):y("timeline-item.menu-button.tooltip"),x[18]=b.release,x[19]=D,x[20]=y,x[21]=a):a=x[21],x[22]!==a?(u={content:a},x[22]=a,x[23]=u):u=x[23],x[24]!==D||x[25]!==r||x[26]!==u?(p=(0,o.jsx)(d.ContextMenuButton,{"aria-label":r,tooltipProps:u,disabled:D}),x[24]=D,x[25]=r,x[26]=u,x[27]=p):p=x[27],x[28]!==k||x[29]!==b.release||x[30]!==b.versionRevisionId||x[31]!==E||x[32]!==P||x[33]!==y||x[34]!==v?(m=(0,o.jsx)(ej.Menu,{padding:1,children:b.release?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eE.IntentLink,{intent:d.RELEASES_INTENT,params:{id:(0,d.getReleaseIdFromReleaseDocumentId)(b.release._id)},style:{textDecoration:"none"},children:(0,o.jsx)(ej.MenuItem,{padding:3,children:(0,o.jsx)(ej.Flex,{align:"center",justify:"flex-start",children:(0,o.jsx)(ej.Text,{size:1,style:{textDecoration:"none"},children:(0,o.jsx)(d.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,o.jsx)(k,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:b.release.metadata?.title||v("release.placeholder-untitled-release")},t:y})})})})}),(0,o.jsx)(ej.MenuItem,{onClick:P,children:(0,o.jsx)(ej.Flex,{align:"center",justify:"flex-start",children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,o.jsx)(k,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:b.release.metadata?.title||v("release.placeholder-untitled-release")},t:y})})})})]}):(0,o.jsx)(ej.MenuItem,{onClick:E,disabled:!b.versionRevisionId,children:(0,o.jsx)(ej.Flex,{align:"center",children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{components:{VersionBadge:dD},i18nKey:"events.open.draft",t:y})})})})}),x[28]=k,x[29]=b.release,x[30]=b.versionRevisionId,x[31]=E,x[32]=P,x[33]=y,x[34]=v,x[35]=m):m=x[35];let A=!j.elements?.[oC]||oC;return x[36]===Symbol.for("react.memo_cache_sentinel")?(h=["bottom-end","bottom-start"],x[36]=h):h=x[36],x[37]!==A?(g={portal:A,placement:"bottom",fallbackPlacements:h},x[37]=A,x[38]=g):g=x[38],x[39]!==p||x[40]!==m||x[41]!==g||x[42]!==F?(f=(0,o.jsx)(ev.MenuButton,{id:F,button:p,menu:m,popover:g}),x[39]=p,x[40]=m,x[41]=g,x[42]=F,x[43]=f):f=x[43],f}function dD(e){let{children:t}=e;return(0,o.jsx)(d.VersionInlineBadge,{$tone:"caution",children:t})}let dF=eT.motion.create(ej.Box),dA={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},dV=e=>{let t,n,i,l,r,c,u,p,m,h,g,f,x=(0,s.c)(38),{events:b,hasMoreEvents:y,selectedEventId:v,onLoadMore:j,onSelect:w,listMaxHeight:S,fetchEventChildren:C}=e,_=void 0===S?"calc(100vh - 280px)":S,[I,T]=(0,a.useState)(!1),{t:R}=(0,d.useTranslation)("studio");x[0]!==b||x[1]!==v?(t=()=>{if(v){let e=b.find(e=>e.id===v);if(e&&"parentId"in e&&e.parentId)return new Set([e.parentId])}return new Set},x[0]=b,x[1]=v,x[2]=t):t=x[2];let[P,E]=(0,a.useState)(t);x[3]===Symbol.for("react.memo_cache_sentinel")?(n=new Set,x[3]=n):n=x[3];let[k,D]=(0,a.useState)(n);x[4]!==b||x[5]!==P?(i=b.filter(e=>(0,d.isCreateDocumentVersionEvent)(e)&&e.parentId?b[b.length-1].id===e.id||P.has(e.parentId):!(0,d.isEditDocumentVersionEvent)(e)||!e.parentId||P.has(e.parentId)),x[4]=b,x[5]=P,x[6]=i):i=x[6];let F=i;x[7]!==C?(l=e=>async()=>{let t=e.id,n=!1;E(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(D(e=>{let n=new Set(e);return n.add(t),n}),await C(e),D(e=>{let n=new Set(e);return n.delete(t),n}))},x[7]=C,x[8]=l):l=x[8];let A=l;x[9]!==w?(r=e=>{w(e)},x[9]=w,x[10]=r):r=x[10];let V=r;x[11]!==P||x[12]!==A?(c=e=>{let t=(0,d.getDocumentVariantType)(e.documentId);return(0,d.isPublishDocumentVersionEvent)(e)&&"published"===t?(0,o.jsx)(dk,{event:e}):(0,d.isPublishDocumentVersionEvent)(e)&&"draft"===t&&e.creationEvent||(0,d.isDeleteDocumentVersionEvent)(e)&&e.creationEvent?(0,o.jsx)(ol,{isExpanded:P.has(e.id),onExpand:A(e)}):null},x[11]=P,x[12]=A,x[13]=c):c=x[13];let M=c;x[14]!==F.length||x[15]!==k||x[16]!==V||x[17]!==y||x[18]!==M||x[19]!==v?(u=(e,t)=>{let{activeIndex:n}=t,i=(0,d.isCreateDocumentVersionEvent)(e)&&e.parentId&&k.has(e.parentId),l=n===F.length-1;return i?(0,o.jsx)(dF,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,o.jsx)(ej.Flex,{align:"center",justify:"center",style:{height:57},children:(0,o.jsx)(ej.Spinner,{})})}):(0,o.jsxs)(dF,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?dA:void 0,paddingLeft:((0,d.isEditDocumentVersionEvent)(e)||(0,d.isCreateDocumentVersionEvent)(e))&&e.parentId&&!l?4:1,children:[(0,o.jsx)(dE,{event:e,isSelected:e.id===v,onSelect:V,optionsMenu:M(e)}),l&&y&&(0,o.jsx)(d.LoadingBlock,{})]},e.timestamp)},x[14]=F.length,x[15]=k,x[16]=V,x[17]=y,x[18]=M,x[19]=v,x[20]=u):u=x[20];let L=u;if(x[21]===Symbol.for("react.memo_cache_sentinel")?(m=()=>T(!0),p=[],x[21]=p,x[22]=m):(p=x[21],m=x[22]),(0,a.useEffect)(m,p),x[23]!==F||x[24]!==v){let e;x[26]!==v?(e=e=>e.id===v,x[26]=v,x[27]=e):e=x[27],h=F.findIndex(e),x[23]=F,x[24]=v,x[25]=h}else h=x[25];let z=h,O=!z||I;return x[28]!==F||x[29]!==_||x[30]!==j||x[31]!==L||x[32]!==z||x[33]!==R?(g=F.length>0?(0,o.jsx)(oo,{direction:"column",$maxHeight:_,id:"timeline-list-wrapper",children:(0,o.jsx)(d.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:R("timeline.list.aria-label"),autoFocus:"list",initialIndex:z,initialScrollAlign:"center",itemHeight:57,items:F,onEndReached:j,onEndReachedIndexOffset:20,overscan:5,renderItem:L,wrapAround:!1})}):(0,o.jsxs)(ej.Stack,{padding:3,space:3,children:[(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:R("timeline.error.no-document-history-title")}),(0,o.jsx)(ej.Text,{muted:!0,size:1,children:R("timeline.error.no-document-history-description")})]}),x[28]=F,x[29]=_,x[30]=j,x[31]=L,x[32]=z,x[33]=R,x[34]=g):g=x[34],x[35]!==O||x[36]!==g?(f=(0,o.jsx)(os,{$visible:O,"data-ui":"timeline",children:g}),x[35]=O,x[36]=g,x[37]=f):f=x[37],f};dV.displayName="EventsTimeline";let dM=(0,e_.styled)(ev.Popover)`
  overflow: hidden;
  overflow: clip;
`,dL={timestamp:{dateStyle:"medium",timeStyle:"short"}};function dz(e){let t,n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w=(0,s.c)(58),{event:S,events:C,mode:_,placement:I}=e,{setTimelineRange:T}=iV(),[R,P]=(0,a.useState)(!1),[E,k]=(0,a.useState)(null),[D,F]=(0,a.useState)(null),A=(0,ew.useToast)(),{nextCursor:V,loading:M,error:L,findRangeForRevision:z,findRangeForSince:O,loadMoreEvents:B,expandEvent:H}=(0,d.useEvents)(),{t:$}=(0,d.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{P(!0)},w[0]=t):t=w[0];let N=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{P(!1)},w[1]=n):n=w[1];let G=n;w[2]!==E||w[3]!==R?(i=e=>{R&&("Escape"===e.key||"Tab"===e.key)&&(G(),E?.focus())},w[2]=E,w[3]=R,w[4]=i):i=w[4],(0,ej.useGlobalKeyDown)(i),w[5]!==E||w[6]!==D?(l=()=>[E,D],w[5]=E,w[6]=D,w[7]=l):l=w[7],(0,ej.useClickOutsideEvent)(R&&G,l),w[8]!==z||w[9]!==T||w[10]!==$||w[11]!==A?(r=e=>{try{(()=>{if((0,d.isDeleteDocumentVersionEvent)(e)||(0,d.isDeleteDocumentGroupEvent)(e)||(0,d.isUnpublishDocumentEvent)(e)||(0,d.isScheduleDocumentVersionEvent)(e)||(0,d.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=z(e?.id);T(t,n),G()})()}catch(e){A.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[8]=z,w[9]=T,w[10]=$,w[11]=A,w[12]=r):r=w[12];let U=r;w[13]!==O||w[14]!==T||w[15]!==$||w[16]!==A?(c=e=>{try{let[t,n]=O(e.id);T(t,n),G()}catch(e){A.push({closable:!0,description:e.message,status:"error",title:$("timeline.error.unable-to-load-revision")})}},w[13]=O,w[14]=T,w[15]=$,w[16]=A,w[17]=c):c=w[17];let q=c;w[18]!==B||w[19]!==M||w[20]!==V?(u=()=>{!M&&V&&B()},w[18]=B,w[19]=M,w[20]=V,w[21]=u):u=w[21];let W=u;e:{let e;if(L){let e;w[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ow,{}),w[22]=e):e=w[22],p=e;break e}let t=!!V,n=S?.id,i="rev"===_?U:q;w[23]!==C||w[24]!==H||w[25]!==W||w[26]!==n||w[27]!==i||w[28]!==t?(e=(0,o.jsx)(dV,{events:C,fetchEventChildren:H,hasMoreEvents:t,selectedEventId:n,onLoadMore:W,onSelect:i}),w[23]=C,w[24]=H,w[25]=W,w[26]=n,w[27]=i,w[28]=t,w[29]=e):e=w[29],p=e}let K=p;w[30]!==S||w[31]!==$?(h=S?$(d.TIMELINE_ITEM_I18N_KEY_MAPPING[S.documentVariantType][S.type],{context:"timestamp",timestamp:new Date(S.timestamp),formatParams:dL}):$("timeline.latest-revision"),w[30]=S,w[31]=$,w[32]=h):h=w[32];let Y=h;w[33]!==S||w[34]!==C||w[35]!==$?(g=S?$(d.TIMELINE_ITEM_I18N_KEY_MAPPING[S.documentVariantType][S.type],{context:"timestamp",timestamp:new Date(S.timestamp),formatParams:dL}):C.length>0?$("timeline.since-version-missing"):$("timeline.no-previous-events"),w[33]=S,w[34]=C,w[35]=$,w[36]=g):g=w[36];let X="rev"===_?Y:g;w[37]!==D?(f={"timeline-menu":D},w[37]=D,w[38]=f):f=w[38];let J=f,Q=R&&K,Z=R?"timeline-menu-close-button":"timeline-menu-open-button",ee=M||!C.length,et=R?G:N;return w[39]===Symbol.for("react.memo_cache_sentinel")?(x={maxWidth:"100%"},w[39]=x):x=w[39],w[40]!==X||w[41]!==M||w[42]!==$?(b=M?$("timeline.loading-history"):X,w[40]=X,w[41]=M,w[42]=$,w[43]=b):b=w[43],w[44]!==R||w[45]!==Z||w[46]!==ee||w[47]!==et||w[48]!==b?(y=(0,o.jsx)(ej.Flex,{width:"fill",children:(0,o.jsx)(ev.Button,{"data-testid":Z,disabled:ee,mode:"ghost",onClick:et,ref:k,selected:R,width:"fill",tooltipProps:null,justify:"space-between",style:x,iconRight:m.ChevronDownIcon,text:b})}),w[44]=R,w[45]=Z,w[46]=ee,w[47]=et,w[48]=b,w[49]=y):y=w[49],w[50]!==R||w[51]!==I||w[52]!==Q||w[53]!==y?(v=(0,o.jsx)(dM,{"data-testid":"timeline-menu",constrainSize:!0,content:Q,"data-ui":"versionMenu",open:R,placement:I,matchReferenceWidth:!0,portal:!0,ref:F,children:y}),w[50]=R,w[51]=I,w[52]=Q,w[53]=y,w[54]=v):v=w[54],w[55]!==J||w[56]!==v?(j=(0,o.jsx)(ej.PortalProvider,{__unstable_elements:J,children:v}),w[55]=J,w[56]=v,w[57]=j):j=w[57],j}let dO=(0,e_.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,dB=(0,e_.styled)(ej.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,dH=(0,e_.styled)(ej.Flex)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,d$={diff:null,loading:!0,error:null},dN=()=>{let e,t,n,i,l,r,a,c,p,m,h,g=(0,s.c)(31),{documentId:f,schemaType:x,editState:b,displayed:y}=iV(),{selectedPerspective:v,selectedPerspectiveName:j,selectedReleaseId:w}=(0,d.usePerspective)(),{t:S}=(0,d.useTranslation)(C);g[0]!==y||g[1]!==b?.published?(e=(0,eI.diffInput)((0,eI.wrap)(b?.published??{},{author:""}),(0,eI.wrap)(y??{},{author:""})),g[0]=y,g[1]=b?.published,g[2]=e):e=g[2];let _=e;return(!w||b?.version)&&("drafts"!==v||b?.draft)&&"published"!==j&&y?._rev?(g[3]!==S?(t=S("events.compare-with-published.title"),g[3]=S,g[4]=t):t=g[4],g[5]!==t?(n=(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:t}),g[5]=t,g[6]=n):n=g[6],g[7]!==v?(i=(0,d.isReleaseDocument)(v)?v.metadata?.title:"draft",g[7]=v,g[8]=i):i=g[8],g[9]!==i?(l={version:i},g[9]=i,g[10]=l):l=g[10],g[11]!==S||g[12]!==l?(r=(0,o.jsx)(ej.Text,{size:1,muted:!0,children:(0,o.jsx)(d.Translate,{i18nKey:"events.compare-with-published.description",t:S,values:l})}),g[11]=S,g[12]=l,g[13]=r):r=g[13],g[14]!==n||g[15]!==r?(a=(0,o.jsx)(ej.Card,{borderBottom:!0,paddingBottom:3,children:(0,o.jsxs)(ej.Stack,{space:3,paddingTop:1,children:[n,r]})}),g[14]=n,g[15]=r,g[16]=a):a=g[16],g[17]!==y||g[18]!==f||g[19]!==_||g[20]!==x?(c={documentId:f,schemaType:x,rootDiff:_,isComparingCurrent:!0,FieldWrapper:dK,value:y,showFromValue:!0},g[17]=y,g[18]=f,g[19]=_,g[20]=x,g[21]=c):c=g[21],g[22]!==_||g[23]!==x?(p=(0,o.jsx)(ej.Box,{paddingY:1,children:(0,o.jsx)(d.ChangeList,{diff:_,schemaType:x})}),g[22]=_,g[23]=x,g[24]=p):p=g[24],g[25]!==c||g[26]!==p?(m=(0,o.jsx)(u.DocumentChangeContext.Provider,{value:c,children:p}),g[25]=c,g[26]=p,g[27]=m):m=g[27],g[28]!==a||g[29]!==m?(h=(0,o.jsxs)(ej.Stack,{space:2,marginBottom:3,children:[a,m]}),g[28]=a,g[29]=m,g[30]=h):h=g[30],h):null};function dG(e){let t,n,i,l,r,c,u,p,m,h,g,f,x,b,y,v,j,w,S,C=(0,s.c)(83),{showChanges:_}=e,{documentId:I,schemaType:T,timelineError:R,value:P,formState:E}=iV(),[k,D]=(0,a.useState)(null),{events:F,revision:A,sinceRevision:V,getChangesList:M}=(0,d.useEvents)(),L=!A?.revisionId;C[0]!==M?(t=M(),C[0]=M,C[1]=t):t=C[1];let z=t,{diff:O,loading:B,error:H}=(0,eP.useObservable)(z,d$),{t:$}=(0,d.useTranslation)("studio");C[2]!==O||C[3]!==I||C[4]!==E?.readOnly||C[5]!==L||C[6]!==T||C[7]!==P?(n=()=>({documentId:I,schemaType:T,FieldWrapper:dU,rootDiff:O,isComparingCurrent:L&&!E?.readOnly,value:P,showFromValue:!0}),C[2]=O,C[3]=I,C[4]=E?.readOnly,C[5]=L,C[6]=T,C[7]=P,C[8]=n):n=C[8],C[9]!==n?(i=n(),C[9]=n,C[10]=i):i=C[10];let N=i;e:{let e,t,n;if(!F){let e;C[11]===Symbol.for("react.memo_cache_sentinel")?(e=[null,null],C[11]=e):e=C[11],l=e;break e}C[12]!==F||C[13]!==V?.revisionId?(e=F.find(e=>e.id===V?.revisionId)||null,C[12]=F,C[13]=V?.revisionId,C[14]=e):e=C[14],C[15]!==F||C[16]!==A?.revisionId?(t=F.find(e=>e.id===A?.revisionId)||F[0],C[15]=F,C[16]=A?.revisionId,C[17]=t):t=C[17],C[18]!==e||C[19]!==t?(n=[e,t],C[18]=e,C[19]=t,C[20]=n):n=C[20],l=n}let[G,U]=l;t:{let e;if(!U){let e;C[21]!==F?(e=F.slice(1),C[21]=F,C[22]=e):e=C[22],r=e;break t}if(C[23]!==F||C[24]!==U){let t;C[26]!==U?(t=e=>"parentId"in U&&"parentId"in e&&e.parentId===U.parentId||"parentId"in e&&U.id===e.parentId?{...e,parentId:void 0}:e,C[26]=U,C[27]=t):t=C[27],e=F.slice(F.indexOf(U)+1).map(t),C[23]=F,C[24]=U,C[25]=e}else e=C[25];r=e}let q=r;if(!F.length){let e,t,n,i,l;return C[28]!==$?(e=$("timeline.error.no-document-history-title"),C[28]=$,C[29]=e):e=C[29],C[30]!==e?(t=(0,o.jsx)(ej.Text,{size:1,weight:"medium",children:e}),C[30]=e,C[31]=t):t=C[31],C[32]!==$?(n=$("timeline.error.no-document-history-description"),C[32]=$,C[33]=n):n=C[33],C[34]!==n?(i=(0,o.jsx)(ej.Text,{muted:!0,size:1,children:n}),C[34]=n,C[35]=i):i=C[35],C[36]!==t||C[37]!==i?(l=(0,o.jsx)(ej.Box,{paddingX:2,children:(0,o.jsxs)(ej.Stack,{padding:3,space:3,children:[t,i]})}),C[36]=t,C[37]=i,C[38]=l):l=C[38],l}C[39]===Symbol.for("react.memo_cache_sentinel")?(c={position:"relative"},C[39]=c):c=C[39],C[40]!==$?(u=$("changes.inspector.from-label"),C[40]=$,C[41]=u):u=C[41],C[42]!==u?(p=(0,o.jsx)(ej.Text,{size:1,muted:!0,children:u}),C[42]=u,C[43]=p):p=C[43];let W=G||null;C[44]!==q||C[45]!==W?(m=(0,o.jsx)(dz,{event:W,events:q,mode:"since",placement:"bottom-start"}),C[44]=q,C[45]=W,C[46]=m):m=C[46],C[47]!==$?(h=$("changes.inspector.to-label"),C[47]=$,C[48]=h):h=C[48],C[49]!==h?(g=(0,o.jsx)(ej.Text,{size:1,muted:!0,children:h}),C[49]=h,C[50]=g):g=C[50];let K=U||null;return C[51]!==F||C[52]!==K?(f=(0,o.jsx)(dz,{event:K,events:F,mode:"rev",placement:"bottom-end"}),C[51]=F,C[52]=K,C[53]=f):f=C[53],C[54]!==m||C[55]!==g||C[56]!==f||C[57]!==p?(x=(0,o.jsxs)(dB,{paddingX:2,paddingBottom:2,children:[p,m,g,f]}),C[54]=m,C[55]=g,C[56]=f,C[57]=p,C[58]=x):x=C[58],C[59]!==B||C[60]!==$?(b=B&&(0,o.jsx)(eT.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,o.jsxs)(dH,{justify:"center",align:"center",gap:2,children:[(0,o.jsx)(ej.Text,{muted:!0,size:0,children:$("changes.loading-changes")}),(0,o.jsx)(ej.Spinner,{size:0})]})}),C[59]=B,C[60]=$,C[61]=b):b=C[61],C[62]!==x||C[63]!==b?(y=(0,o.jsxs)(ej.Box,{padding:3,style:c,children:[x,b]}),C[62]=x,C[63]=b,C[64]=y):y=C[64],C[65]!==H||C[66]!==N||C[67]!==A?.loading||C[68]!==T||C[69]!==_||C[70]!==G||C[71]!==V?.loading||C[72]!==R||C[73]!==U?.id?(v=_&&(0,o.jsx)(dq,{documentContext:N,error:R||H,loading:A?.loading||V?.loading||!1,schemaType:T,sameRevisionSelected:G?.id===U?.id,sinceEvent:G}),C[65]=H,C[66]=N,C[67]=A?.loading,C[68]=T,C[69]=_,C[70]=G,C[71]=V?.loading,C[72]=R,C[73]=U?.id,C[74]=v):v=C[74],C[75]!==v?(j=(0,o.jsx)(dO,{"data-ui":"Scroller",ref:D,children:(0,o.jsx)(ej.Box,{flex:1,paddingX:3,height:"fill",children:v})}),C[75]=v,C[76]=j):j=C[76],C[77]!==k||C[78]!==j?(w=(0,o.jsx)(ej.Card,{flex:1,paddingX:2,paddingY:2,children:(0,o.jsx)(ej.BoundaryElementProvider,{element:k,children:j})}),C[77]=k,C[78]=j,C[79]=w):w=C[79],C[80]!==y||C[81]!==w?(S=(0,o.jsxs)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[y,w]}),C[80]=y,C[81]=w,C[82]=S):S=C[82],S}function dU(e){return e.path.length>0?(0,o.jsx)(d.ChangeFieldWrapper,{...e}):e.children}function dq(e){let t,n,i=(0,s.c)(15),{error:l,documentContext:r,loading:a,schemaType:c,sameRevisionSelected:p,sinceEvent:m}=e;if(l){let e,t,n;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(dN,{}),i[0]=e):e=i[0],i[1]!==l||i[2]!==m?.type?(t=m?.type!=="historyCleared"&&(0,o.jsx)(d.ChangesError,{error:l}),i[1]=l,i[2]=m?.type,i[3]=t):t=i[3],i[4]!==t?(n=(0,o.jsxs)(o.Fragment,{children:[e,t]}),i[4]=t,i[5]=n):n=i[5],n}if(a){let e;return i[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.LoadingBlock,{showText:!0}),i[6]=e):e=i[6],e}if(p){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(dW,{}),i[7]=e):e=i[7],e}if(!r.rootDiff){let e;return i[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(eT.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,o.jsx)(d.NoChanges,{})}),i[8]=e):e=i[8],e}return i[9]!==r.rootDiff||i[10]!==c?(t=(0,o.jsx)(ej.Box,{paddingY:1,children:(0,o.jsx)(d.ChangeList,{diff:r.rootDiff,schemaType:c})}),i[9]=r.rootDiff,i[10]=c,i[11]=t):t=i[11],i[12]!==r||i[13]!==t?(n=(0,o.jsx)(u.DocumentChangeContext.Provider,{value:r,children:t}),i[12]=r,i[13]=t,i[14]=n):n=i[14],n}function dW(){let e,t,n,i,l,r,a,c=(0,s.c)(12),{t:u}=(0,d.useTranslation)("");return c[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},n={delay:.2,duration:.2},c[0]=e,c[1]=t,c[2]=n):(e=c[0],t=c[1],n=c[2]),c[3]!==u?(i=u("changes.same-revision-selected-title"),c[3]=u,c[4]=i):i=c[4],c[5]!==i?(l=(0,o.jsx)(ej.Text,{size:1,weight:"medium",as:"h3",children:i}),c[5]=i,c[6]=l):l=c[6],c[7]!==u?(r=(0,o.jsx)(ej.Text,{as:"p",size:1,muted:!0,children:(0,o.jsx)(d.Translate,{i18nKey:"changes.same-revision-selected-description",t:u})}),c[7]=u,c[8]=r):r=c[8],c[9]!==l||c[10]!==r?(a=(0,o.jsx)(eT.motion.div,{animate:e,initial:t,transition:n,children:(0,o.jsxs)(ej.Stack,{space:3,paddingTop:2,children:[l,r]})}),c[9]=l,c[10]=r,c[11]=a):a=c[11],a}function dK(e){return e.children}let dY=(0,e_.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function dX(e){let t,n,i,l=(0,s.c)(21),{showList:r}=e,[c,u]=(0,a.useState)(null),[p,m]=(0,a.useState)(0),{setTimelineRange:h}=iV();l[0]!==p?(t=e=>{!p&&e&&(m(e.clientHeight?e.clientHeight-1:0),u(e))},l[0]=p,l[1]=t):t=l[1];let g=t,{events:f,nextCursor:x,loading:b,error:y,revision:v,loadMoreEvents:j,findRangeForRevision:w,expandEvent:S}=(0,d.useEvents)(),{t:C}=(0,d.useTranslation)("studio"),_=(0,ew.useToast)();l[2]!==w||l[3]!==h||l[4]!==C||l[5]!==_?(n=e=>{try{(()=>{if((0,d.isDeleteDocumentVersionEvent)(e)||(0,d.isDeleteDocumentGroupEvent)(e)||(0,d.isUnpublishDocumentEvent)(e)||(0,d.isScheduleDocumentVersionEvent)(e)||(0,d.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=w(e.id);h(t,n)})()}catch(e){_.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},l[2]=w,l[3]=h,l[4]=C,l[5]=_,l[6]=n):n=l[6];let I=n,T=b&&!f.length;return l[7]!==y||l[8]!==f||l[9]!==S||l[10]!==g||l[11]!==T||l[12]!==p||l[13]!==j||l[14]!==b||l[15]!==x||l[16]!==v?.revisionId||l[17]!==c||l[18]!==I||l[19]!==r?(i=(0,o.jsx)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,o.jsx)(ej.Card,{flex:1,padding:2,paddingTop:0,children:y?(0,o.jsx)(ow,{}):(0,o.jsx)(ej.BoundaryElementProvider,{element:c,children:(0,o.jsxs)(dY,{"data-ui":"Scroller",ref:g,children:[p&&r&&!T?(0,o.jsx)(dV,{events:f,fetchEventChildren:S,hasMoreEvents:!!x,selectedEventId:v?.revisionId||f[0]?.id,onLoadMore:j,onSelect:I,listMaxHeight:`${p}px`}):null,b&&(0,o.jsx)(d.LoadingBlock,{})]})})})}),l[7]=y,l[8]=f,l[9]=S,l[10]=g,l[11]=T,l[12]=p,l[13]=j,l[14]=b,l[15]=x,l[16]=v?.revisionId,l[17]=c,l[18]=I,l[19]=r,l[20]=i):i=l[20],i}let dJ=(0,e_.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function dQ(e){let t,n,i,l,r=(0,s.c)(20),{showList:c}=e,{timelineError:u,setTimelineRange:p,timelineStore:m}=iV(),{selectedReleaseId:h}=(0,d.usePerspective)(),[g,f]=(0,a.useState)(null),[x,b]=(0,a.useState)(0);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e?.clientHeight&&(b(e.clientHeight-1),f(e))},r[0]=t):t=r[0];let y=t,v=(0,d.useTimelineSelector)(m,d2),j=(0,d.useTimelineSelector)(m,d1),w=(0,d.useTimelineSelector)(m,d0),S=(0,d.useTimelineSelector)(m,dZ),{t:C}=(0,d.useTranslation)("studio"),_=(0,ew.useToast)();r[1]!==p||r[2]!==C||r[3]!==m||r[4]!==_?(n=e=>{try{(()=>{let[t,n]=m?.findRangeForRev(e)||[null,null];p(t,n)})()}catch(e){_.push({closable:!0,description:e.message,status:"error",title:C("timeline.error.unable-to-load-revision")})}},r[1]=p,r[2]=C,r[3]=m,r[4]=_,r[5]=n):n=r[5];let I=n;r[6]!==S||r[7]!==m?(i=()=>{S||m?.loadMore()},r[6]=S,r[7]=m,r[8]=i):i=r[8];let T=i;return r[9]!==v||r[10]!==T||r[11]!==w||r[12]!==x||r[13]!==j||r[14]!==g||r[15]!==I||r[16]!==h||r[17]!==c||r[18]!==u?(l=(0,o.jsx)(ej.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,o.jsx)(ej.Card,{flex:1,padding:2,paddingTop:0,children:u||h?(0,o.jsx)(ow,{versionError:!!h}):(0,o.jsx)(ej.BoundaryElementProvider,{element:g,children:(0,o.jsx)(dJ,{"data-ui":"Scroller",ref:y,children:x&&c?(0,o.jsx)(oj,{chunks:v,hasMoreChunks:w,lastChunk:j,onLoadMore:T,onSelect:I,listMaxHeight:`${x}px`}):null})})})}),r[9]=v,r[10]=T,r[11]=w,r[12]=x,r[13]=j,r[14]=g,r[15]=I,r[16]=h,r[17]=c,r[18]=u,r[19]=l):l=r[19],l}function dZ(e){return e.isLoading}function d0(e){return e.hasMoreChunks}function d1(e){return e.realRevChunk}function d2(e){return e.chunks}let d3=(0,e_.styled)(ej.Flex)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,d4=["history","review"],d5={error:m.ErrorOutlineIcon,warning:m.WarningOutlineIcon,info:m.InfoOutlineIcon},d6={error:"critical",warning:"caution",info:"primary"};function d8(e){let t,n,i,l,r=(0,s.c)(17),{marker:d,onOpen:c,schemaType:u,value:p}=e;r[0]!==d.path||r[1]!==c?(t=()=>c(d.path),r[0]=d.path,r[1]=c,r[2]=t):t=r[2];let m=t,[h,g]=(0,a.useState)(null),f=d5[d.level];return r[3]!==h?(n=h&&(0,o.jsx)(ej.Card,{padding:3,radius:2,tone:"critical",children:(0,o.jsx)(ej.Text,{size:1,children:h.error.message})}),r[3]=h,r[4]=n):n=r[4],r[5]!==f||r[6]!==h||r[7]!==m||r[8]!==d.level||r[9]!==d.message||r[10]!==d.path||r[11]!==u||r[12]!==p?(i=!h&&(0,o.jsx)(ej.Card,{__unstable_focusRing:!0,as:"button",onClick:m,padding:3,radius:2,tone:d6[d.level],children:(0,o.jsxs)(ej.Flex,{align:"flex-start",gap:3,children:[(0,o.jsx)(ej.Box,{flex:"none",children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(f,{})})}),(0,o.jsxs)(ej.Stack,{flex:1,space:2,children:[(0,o.jsx)(d7,{path:d.path,schemaType:u,value:p}),(0,o.jsx)(ej.Text,{muted:!0,size:1,children:d.message})]})]})}),r[5]=f,r[6]=h,r[7]=m,r[8]=d.level,r[9]=d.message,r[10]=d.path,r[11]=u,r[12]=p,r[13]=i):i=r[13],r[14]!==n||r[15]!==i?(l=(0,o.jsxs)(ev.ErrorBoundary,{onCatch:g,children:[n,i]}),r[14]=n,r[15]=i,r[16]=l):l=r[16],l}function d7(e){let t,n,i,l=(0,s.c)(8),{path:r,schemaType:a,value:c}=e;e:{try{let e;l[0]!==r||l[1]!==a||l[2]!==c?(e=function(e){let{path:t,schemaType:n,value:i}=e,l=[],r=n,o=i;for(let e of t){if("string"==typeof e){if(!(0,d.isRecord)(o)&&void 0!==o)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==r.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);o=o?.[e];let t=r.fields.find(t=>t.name===e);if(!t)return l.push({name:e}),l;r=t.type,l.push(r);continue}if("number"==typeof e){if(!(0,d.isArray)(o)&&void 0!==o)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);o=o?.[e];let t=r.of.find(e=>"string"==typeof o?"string"===e.jsonType:"number"==typeof o?"number"===e.jsonType:"boolean"==typeof o?"boolean"===e.jsonType:!!(0,d.isRecord)(o)&&e.name===o?._type);if(!t)throw Error(`Item type not found: [${e}]`);r=t,l.push(r);continue}if((0,d.isRecord)(e)&&e._key){if(typeof o>"u")return l;if(!(0,d.isArray)(o))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(typeof(o=(o??[]).find(t=>(0,d.isRecord)(t)&&t._key===e._key))>"u")return l;if(!(0,d.isRecord)(o))throw Error(`Array item not found: [_key == ${e._key}]`);let t=r.of.find(e=>(0,d.isRecord)(o)&&e.name===o?._type);if(!t)throw Error(`Array item type not found: .${o?._type}`);r=t,l.push(r);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return l}({path:r,schemaType:a,value:c}),l[0]=r,l[1]=a,l[2]=c,l[3]=e):e=l[3],t=e;break e}catch(e){console.error(e)}t=null}let u=t;return u?.length?(l[4]!==u?(n=u.map(d9),l[4]=u,l[5]=n):n=l[5],l[6]!==n?(i=(0,o.jsx)(ej.Text,{size:1,children:n}),l[6]=n,l[7]=i):i=l[7],i):null}function d9(e,t){return(0,o.jsxs)(a.Fragment,{children:[t>0&&(0,o.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,o.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t)}function ce(e){return{level:e.level,message:e.message,path:e.path}}let ct={},cn=eE.route.create("/",[eE.route.intents("/intent"),eE.route.create("/edit/:type/:editDocumentId",[eE.route.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),eE.route.create({path:"/:panes",children:[eE.route.create("/:action",eE.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(ci)||[];if(!e){n=n.slice(1);continue}let r=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(l);t.push({id:i,payload:r}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let t,[n,...i]=e.split(",");return t={id:n,params:ct,payload:void 0},i.reduce((e,t)=>{if(/^[a-z0-9]+=[^=]+/i.test(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(t)?e.payload=function(e){try{return e?(0,eE.decodeJsonParams)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},t)});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...(0,eV.omit)(t.params,cl),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(co).join("|")).map(encodeURIComponent).join(";")}}}})]),ci=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,cl=["view","since","rev","inspect","comment"],cr=Boolean;function co(e,t,n){let{payload:i,params:l={},id:r}=e,[o]=n,s=e===o,a=0!==t&&r===o.id,d=typeof i>"u"?void 0:(0,eE.encodeJsonParams)(i),c=Object.entries(l).filter(e=>{let[t,n]=e;return!!n&&(!!s||!(n===o.params?.[t]&&!cl.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":r].concat([c.length>0&&c,d].filter(cr).flat()).join(",")||","}let cs=[rZ,r1,rG,rq,rH,rl],ca=["delete","discardChanges"],cd=[df],cc=[{name:"sanity/structure/validation",component:function(e){let t,n,i,l,r,a,c,u=(0,s.c)(23),{onClose:p}=e,{onFocus:m,onPathOpen:h,schemaType:g,validation:f,value:x,editState:b}=iV(),{t:y}=(0,d.useTranslation)("validation");u[0]!==m||u[1]!==h?(t=e=>{h(e),m(e)},u[0]=m,u[1]=h,u[2]=t):t=u[2];let v=t;u[3]!==b?(n=b&&b.version&&(0,d.isGoingToUnpublish)(b.version),u[3]=b,u[4]=n):n=u[4];let j=n;return u[5]!==y?(i=y("panel.close-button-aria-label"),u[5]=y,u[6]=i):i=u[6],u[7]!==y?(l=y("panel.title"),u[7]=y,u[8]=l):l=u[8],u[9]!==p||u[10]!==i||u[11]!==l?(r=(0,o.jsx)(i0,{as:"header",closeButtonLabel:i,flex:"none",onClose:p,title:l}),u[9]=p,u[10]=i,u[11]=l,u[12]=r):r=u[12],u[13]!==v||u[14]!==j||u[15]!==g||u[16]!==y||u[17]!==f||u[18]!==x?(a=(0,o.jsx)(ej.Card,{flex:1,overflow:"auto",padding:3,children:j?(0,o.jsx)(ej.Box,{padding:2,children:(0,o.jsx)(ej.Text,{muted:!0,size:1,children:y("panel.unpublish-message")})}):(0,o.jsxs)(o.Fragment,{children:[0===f.length&&(0,o.jsx)(ej.Box,{padding:2,children:(0,o.jsx)(ej.Text,{muted:!0,size:1,children:y("panel.no-errors-message")})}),f.length>0&&(0,o.jsx)(ej.Stack,{space:2,children:f.map((e,t)=>(0,o.jsx)(d8,{marker:e,onOpen:v,schemaType:g,value:x},t))})]})}),u[13]=v,u[14]=j,u[15]=g,u[16]=y,u[17]=f,u[18]=x,u[19]=a):a=u[19],u[20]!==r||u[21]!==a?(c=(0,o.jsxs)(ej.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[r,a]}),u[20]=r,u[21]=a,u[22]=c):c=u[22],c},useMenuItem:function(e){let t,n,i,l,r,o,a=(0,s.c)(11),{documentType:c}=e,{t:u}=(0,d.useTranslation)("validation"),{selectedReleaseId:p}=(0,d.usePerspective)(),{value:h}=iV(),{validation:g}=(0,d.useValidationStatus)(h._id,c,!p);a[0]!==g?(t=g.map(ce),a[0]=g,a[1]=t):t=a[1];let f=t,x=f.some(eS.isValidationError),b=f.some(eS.isValidationWarning);a[2]!==h?(n=(0,d.isGoingToUnpublish)(h),a[2]=h,a[3]=n):n=a[3];let y=n;e:{if(x){i=m.ErrorOutlineIcon;break e}if(b){i=m.WarningOutlineIcon;break e}i=m.CheckmarkCircleIcon}let v=i;t:{if(x){l="critical";break t}if(b){l="caution";break t}l="positive"}let j=l,w=0===f.length||y;return a[4]!==u?(r=u("panel.title"),a[4]=u,a[5]=r):r=a[5],a[6]!==v||a[7]!==w||a[8]!==r||a[9]!==j?(o={hidden:w,icon:v,title:r,tone:j,showAsAction:!0},a[6]=v,a[7]=w,a[8]=r,a[9]=j,a[10]=o):o=a[10],o}},{name:iq,useMenuItem:()=>{let{features:e}=i$(),{t}=(0,d.useTranslation)();return{hidden:!e.reviewChanges,icon:m.RestoreIcon,title:t("changes.title")}},component:function(e){let t,n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w,S,_,I,T,R,P,E,k,D,F,A=(0,s.c)(72),{params:V,setParams:M}=lI(),L=(0,d.useSource)(),[z,O]=(0,a.useState)(null),{t:B}=(0,d.useTranslation)(C),H=V?.inspect===iq,{selectedPerspective:$}=(0,d.usePerspective)();A[0]!==V?(t=(F=V?.changesInspectorTab)&&d4.includes(F)?V.changesInspectorTab:d4[0],A[0]=V,A[1]=t):t=A[1];let N=t;A[2]!==V||A[3]!==M?(n=e=>M({...V,changesInspectorTab:e,since:"history"===e?void 0:V?.since}),A[2]=V,A[3]=M,A[4]=n):n=A[4];let G=n,U=H?"":void 0;A[5]!==B?(i=B("changes.tab.history"),A[5]=B,A[6]=i):i=A[6],A[7]!==G?(l=()=>G("history"),A[7]=G,A[8]=l):l=A[8];let q="history"===N;A[9]!==i||A[10]!==l||A[11]!==q?(r=(0,o.jsx)(ev.Tab,{"aria-controls":"history-panel",id:"history-tab",label:i,onClick:l,selected:q}),A[9]=i,A[10]=l,A[11]=q,A[12]=r):r=A[12],A[13]!==B?(c=B("changes.tab.review-changes"),A[13]=B,A[14]=c):c=A[14],A[15]!==G?(u=()=>G("review"),A[15]=G,A[16]=u):u=A[16];let W="review"===N;A[17]!==c||A[18]!==u||A[19]!==W?(p=(0,o.jsx)(ev.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:c,onClick:u,selected:W}),A[17]=c,A[18]=u,A[19]=W,A[20]=p):p=A[20],A[21]!==p||A[22]!==r?(h=(0,o.jsxs)(ej.TabList,{space:1,flex:1,children:[r,p]}),A[21]=p,A[22]=r,A[23]=h):h=A[23],A[24]!==B?(g=B("changes.action.close-label"),A[24]=B,A[25]=g):g=A[25];let K=e.onClose;A[26]!==B?(f=B("document-inspector.close-button.tooltip"),A[26]=B,A[27]=f):f=A[27],A[28]!==f?(x={content:f},A[28]=f,A[29]=x):x=A[29],A[30]!==e.onClose||A[31]!==g||A[32]!==x?(b=(0,o.jsx)(ev.Button,{"aria-label":g,icon:m.CloseIcon,mode:"bleed",onClick:K,tooltipProps:x}),A[30]=e.onClose,A[31]=g,A[32]=x,A[33]=b):b=A[33],A[34]!==h||A[35]!==b?(y=(0,o.jsx)(ej.Card,{paddingBottom:1,children:(0,o.jsxs)(ej.Flex,{align:"center",padding:3,gap:2,children:[h,b]})}),A[34]=h,A[35]=b,A[36]=y):y=A[36],A[37]!==B?(v=(0,o.jsx)(ej.Box,{flex:1,padding:1,children:(0,o.jsx)(ej.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:B,i18nKey:"changes.banner.tooltip"})})}),A[37]=B,A[38]=v):v=A[38],A[39]===Symbol.for("react.memo_cache_sentinel")?(j=(0,o.jsx)(ej.Text,{size:0,muted:!0,children:(0,o.jsx)(m.InfoOutlineIcon,{fontSize:1})}),A[39]=j):j=A[39],A[40]!==z||A[41]!==v?(w=(0,o.jsx)(ev.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:z,content:v,children:j}),A[40]=z,A[41]=v,A[42]=w):w=A[42],A[43]!==$||A[44]!==B?(S=function(e,{t}){return(0,d.isReleaseDocument)(e)?e.metadata.title??e._id:"drafts"===e?t("compare-versions.status.draft"):"published"===e?t("compare-versions.status.published"):e}($,{t:B}),A[43]=$,A[44]=B,A[45]=S):S=A[45],A[46]!==S?(_={perspective:S},A[46]=S,A[47]=_):_=A[47],A[48]!==B||A[49]!==_?(I=(0,o.jsx)(ej.Text,{size:0,muted:!0,children:(0,o.jsx)(d.Translate,{t:B,values:_,i18nKey:"changes.banner.description"})}),A[48]=B,A[49]=_,A[50]=I):I=A[50],A[51]!==w||A[52]!==I?(T=(0,o.jsx)(ej.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,o.jsxs)(ej.Flex,{gap:2,align:"flex-start",children:[w,I]})}),A[51]=w,A[52]=I,A[53]=T):T=A[53];let Y="history"!==N;A[54]!==N||A[55]!==L.beta?.eventsAPI?.documents?(R=L.beta?.eventsAPI?.documents?(0,o.jsx)(dX,{showList:"history"===N}):(0,o.jsx)(dQ,{showList:"history"===N}),A[54]=N,A[55]=L.beta?.eventsAPI?.documents,A[56]=R):R=A[56],A[57]!==Y||A[58]!==R?(P=(0,o.jsx)(ew.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:Y,id:"history-panel",children:R}),A[57]=Y,A[58]=R,A[59]=P):P=A[59];let X="review"!==N;return A[60]!==N||A[61]!==L.beta?.eventsAPI?.documents?(E=L.beta?.eventsAPI?.documents?(0,o.jsx)(o.Fragment,{children:"review"===N?(0,o.jsx)(dG,{showChanges:"review"===N}):null}):(0,o.jsx)(dw,{showChanges:"review"===N}),A[60]=N,A[61]=L.beta?.eventsAPI?.documents,A[62]=E):E=A[62],A[63]!==X||A[64]!==E?(k=(0,o.jsx)(ew.TabPanel,{"aria-labelledby":"review-tab",hidden:X,id:"review-panel",height:"fill",children:E}),A[63]=X,A[64]=E,A[65]=k):k=A[65],A[66]!==y||A[67]!==U||A[68]!==T||A[69]!==P||A[70]!==k?(D=(0,o.jsxs)(d3,{direction:"column",padding:0,height:"fill","data-ready":U,ref:O,children:[y,T,P,k]}),A[66]=y,A[67]=U,A[68]=T,A[69]=P,A[70]=k,A[71]=D):D=A[71],D},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],cu=(0,d.definePlugin)(t=>{let n=t?.icon||m.MasterDetailIcon;return{name:"sanity/structure",document:{actions:(e,t)=>{let n=Array.from(new Set([...e,...cs])),i=n.filter(e=>ca.includes(e.action)),l=n.filter(e=>!ca.includes(e.action));return"published"===t.versionType?[...[...l].sort((e,t)=>"unpublish"===e.action?-1:+("unpublish"===t.action)),...i]:[...l,...i]},badges:e=>Array.from(new Set([...e,...cd])),inspectors:e=>Array.from(new Set([...e,...cc]))},tools:[{name:t?.name||"structure",title:t?.title||"Structure",icon:n,component:(0,a.lazy)(()=>e.A(53267)),canHandleIntent:(e,t)=>{var n;return"create"===e?function(e){if(!("type"in e))return!1;let t={};return"mode"in e&&(t.mode="structure"===e.mode),"template"in e&&(t.template=!0),!Object.keys(t).length||t}(t):"edit"===e&&"id"in(n=t)&&(!("mode"in n)||{mode:"structure"===n.mode})},getIntentState:dy,controlsDocumentTitle:!0,options:t,router:cn,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[_]}}});var cp=Object.freeze({__proto__:null,default:sI}),cm=Object.freeze({__proto__:null,default:dg});e.s(["BackLink",()=>sE,"LOADING_PANE",()=>lZ,"LoadingPane",()=>iA,"Pane",()=>n8,"PaneContent",()=>ie,"PaneHeader",()=>iv,"PaneHeaderActions",()=>ac,"PaneItem",()=>ab,"PaneLayout",()=>iR,"StructureToolPane",()=>sO,"_DEBUG",()=>!1,"setActivePanes",()=>db,"structureTool",()=>cu,"useDocumentLastRev",()=>so,"usePane",()=>n9,"usePaneLayout",()=>n3,"useStructureTool",()=>i$],26047)}]);